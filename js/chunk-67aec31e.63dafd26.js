(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67aec31e"],{"28a5":function(t,i,e){e("214f")("split",2,function(t,i,s){"use strict";var n=e("aae3"),c=s,o=[].push,a="split",r="length",l="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[r]||2!="ab"[a](/(?:ab)*/)[r]||4!="."[a](/(.?)(.?)/)[r]||"."[a](/()()/)[r]>1||""[a](/.?/)[r]){var d=void 0===/()??/.exec("")[1];s=function(t,i){var e=String(this);if(void 0===t&&0===i)return[];if(!n(t))return c.call(e,t,i);var s,a,p,u,h,g=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,b=void 0===i?4294967295:i>>>0,I=new RegExp(t.source,v+"g");d||(s=new RegExp("^"+I.source+"$(?!\\s)",v));while(a=I.exec(e)){if(p=a.index+a[0][r],p>f&&(g.push(e.slice(f,a.index)),!d&&a[r]>1&&a[0].replace(s,function(){for(h=1;h<arguments[r]-2;h++)void 0===arguments[h]&&(a[h]=void 0)}),a[r]>1&&a.index<e[r]&&o.apply(g,a.slice(1)),u=a[0][r],f=p,g[r]>=b))break;I[l]===a.index&&I[l]++}return f===e[r]?!u&&I.test("")||g.push(""):g.push(e.slice(f)),g[r]>b?g.slice(0,b):g}}else"0"[a](void 0,0)[r]&&(s=function(t,i){return void 0===t&&0===i?[]:c.call(this,t,i)});return[function(e,n){var c=t(this),o=void 0==e?void 0:e[i];return void 0!==o?o.call(e,c,n):s.call(String(c),e,n)},s]})},"2aa0":function(t,i,e){"use strict";var s=e("c8c7"),n=e.n(s);n.a},"4a32":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,"\n.select-width{width:250px\n}\n.demo-split{height:400px;border:1px solid #dcdee2\n}\n.row-top{margin-top:5.5px\n}\n.span-margin-right{margin-right:30px\n}\n.span-margin-left{margin-left:60px\n}\n.my-small-font textarea{font-size:12px\n}\n.background-color-black textarea{background-color:#000;color:#fff\n}",""])},7514:function(t,i,e){"use strict";var s=e("5ca1"),n=e("0a49")(5),c="find",o=!0;c in[]&&Array(1)[c](function(){o=!1}),s(s.P+s.F*o,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),e("9c6c")(c)},c8c7:function(t,i,e){var s=e("4a32");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var n=e("499e").default;n("67a8ee59",s,!0,{sourceMap:!1,shadowMode:!1})},d063:function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"backupBackpass"},[e("Card",[e("Row",[e("Row",[e("Form",{ref:"searchForm",attrs:{inline:"","label-width":80}},[e("FormItem",{attrs:{label:t.$t("backupScheduler.city"),prop:"cityId"}},[e("Select",{staticClass:"select-width",staticStyle:{width:"250px"},attrs:{placeholder:t.$t("backupScheduler.cityTip"),clearable:""},on:{"on-change":t.changeDistrict},model:{value:t.cityId,callback:function(i){t.cityId=i},expression:"cityId"}},t._l(t.cityList,function(i){return e("Option",{key:i.id,attrs:{value:i.id}},[t._v(t._s(i.name))])}))],1),e("FormItem",{attrs:{label:t.$t("backupScheduler.district"),prop:"districtId"}},[e("Select",{staticClass:"select-width",staticStyle:{width:"250px"},attrs:{placeholder:t.$t("backupScheduler.districtTip"),clearable:""},on:{"on-change":t.districtChanged},model:{value:t.districtId,callback:function(i){t.districtId=i},expression:"districtId"}},t._l(t.districtList,function(i){return e("Option",{key:i.id,attrs:{value:i.id}},[t._v(t._s(i.name))])}))],1),e("br"),e("FormItem",{attrs:{label:t.$t("backupJobDetail.deviceId"),prop:"deviceId"}},[e("Select",{staticClass:"select-width",staticStyle:{width:"250px"},attrs:{placeholder:t.$t("backupJobDetail.deviceIdTip"),clearable:""},on:{"on-change":t.changeDevice},model:{value:t.deviceId,callback:function(i){t.deviceId=i},expression:"deviceId"}},t._l(t.deviceList,function(i,s){return e("Option",{key:s,attrs:{value:i.id}},[t._v(t._s(i.deviceName)+"\n                            ")])}))],1),e("FormItem",{attrs:{label:t.$t("backupJobDetail.connectionIds"),prop:"connectionId"}},[e("Select",{staticClass:"select-width",staticStyle:{width:"250px"},attrs:{filterable:"",placeholder:t.$t("backupJobDetail.connectionIdsTip"),clearable:""},model:{value:t.connectionId,callback:function(i){t.connectionId=i},expression:"connectionId"}},t._l(t.neList,function(i){return e("Option",{key:i.id,attrs:{value:i.id}},[t._v(t._s(i.connName))])}))],1),e("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-50px"}},[e("Button",{staticClass:"login-btn",attrs:{type:"primary",disabled:!t.isclose||t.resetting,icon:"md-person",loading:t.loading},on:{click:t.submitLogin}},[t.loading?e("span",[t._v(t._s(t.$t("logining")))]):e("span",[t._v(t._s(t.$t("login")))])]),t._v("\n                         \n                        "),e("Button",{attrs:{type:"error",icon:"md-close",disabled:t.isclose||t.loading||t.resetting,loading:t.closeLoading},on:{click:t.closeConnection}},[t.closeLoading?e("span",[t._v(t._s(t.$t("backpass.closing")))]):e("span",[t._v(t._s(t.$t("backpass.close")))])]),t._v("\n                         \n                        "),e("Button",{attrs:{type:"warning",icon:"md-refresh",disabled:t.closeLoading||t.loading,loading:t.resetting},on:{click:t.reset}},[t.resetting?e("span",[t._v(t._s(t.$t("backpass.resetting")))]):e("span",[t._v(t._s(t.$t("backpass.reset")))])])],1)],1)],1)],1),e("Row",[e("Row",[e("p",[e("span",[t._v(t._s(t.$t("backpass.output")))]),e("span",{staticClass:"span-margin-left"},[t._v(t._s(t.$t("backpass.connectionType"))+"："),t._l(t.connection.types,function(i,s){return e("span",{staticClass:"span-margin-right"},[t._v(t._s(i.name)+"("+t._s(i.port)+")")])}),e("span",{staticClass:"span-margin-left"},[t._v(t._s(t.$t("backpass.ipAddress"))+"："+t._s(t.connection.ip))])],2)])]),e("Row",[e("Col",{staticClass:"my-small-font",class:t.isclose?"":"background-color-black",attrs:{span:"18"}},[e("Input",{attrs:{"element-id":"logTextId",type:"textarea",readonly:"",size:"small",autosize:{minRows:16,maxRows:16},wrap:"hard"},model:{value:t.logForm.log,callback:function(i){t.$set(t.logForm,"log",i)},expression:"logForm.log"}})],1),e("Col",{attrs:{span:"6"}},[e("div",{staticStyle:{padding:"0 10px","font-size":"12px"}},[e("div",t._l(this.backupDesc,function(i){return e("p",[t._v(t._s(i))])}))])])],1)],1),t._v("\n         \n        "),e("Row",[e("Row",[e("p",[t._v(t._s(t.$t("backpass.input")))])]),e("Row",[e("Col",{attrs:{span:"18"}},[e("Input",{attrs:{disabled:t.isclose||t.isExecuting,type:"text","element-id":"logTextAreaId"},on:{"on-enter":t.send},model:{value:t.cmd,callback:function(i){t.cmd=i},expression:"cmd"}})],1),e("Col",{attrs:{span:"6"}},[e("div",{staticStyle:{"margin-left":"20px"}},[e("Button",{staticStyle:{"margin-right":"8px"},attrs:{disabled:t.isclose,type:"success"},on:{click:t.send}},[t._v(t._s(t.$t("backpass.send"))+"\n                        ")]),e("Button",{staticStyle:{"margin-right":"8px"},attrs:{type:"error"},on:{click:t.clear}},[t._v(t._s(t.$t("backpass.clear"))+"\n                        ")]),e("export-button",{attrs:{exportParams:t.logForm,exportUrl:t.exportLogUrl,exportFromId:t.exportLogFromId,suffix:t.logSuffix}})],1)])],1)],1)],1)],1)},n=[],c=(e("7514"),e("28a5"),e("365c")),o=e("3eac"),a=e("a78e"),r=e.n(a),l={name:"backup-backpass-manual",components:{"export-button":o["default"]},data:function(){return{loading:!1,closeLoading:!1,resetting:!1,isclose:!0,isOpe:!1,deviceId:"",areaId:"",cityId:"",districtId:"",serverId:"",jobDetailId:"",cityList:[],districtList:[],deviceList:[],connectionId:"",neList:[],cmd:"",connection:{types:[]},backupDesc:"",logForm:{log:""},exportLogUrl:"/backup/web/backup/backpass/exportLog",exportLogFromId:"backpass-log",logSuffix:".txt",isExecuting:!1}},methods:{init:function(){this.getCityList(),this.initDevice()},getCityList:function(){var t=this;Object(c["X"])(this.areaId).then(function(i){0===i.code&&(t.cityList=i.content)})},changeDistrict:function(t){var i=this;this.connectionId="",this.districtId="",this.districtList=[],this.neList=[],void 0!==t&&Object(c["db"])(t,this.areaId).then(function(t){if(0===t.code)if(t.content.length>0)i.districtId="",i.districtList=[],i.districtList=t.content;else{i.districtId=i.cityId;for(var e=i.cityList,s=0;s<e.length;s++)i.districtId==e[s].id&&(i.districtList=new Array(e[s]))}})},initDevice:function(){var t=this;Object(c["D"])().then(function(i){0===i.code&&(t.deviceList=i.content)})},initConnection:function(){var t=this;this.neList=[];var i={deviceId:this.deviceId,areaId:this.districtId};Object(c["V"])(i).then(function(i){0===i.code&&(t.neList=i.content)})},reset:function(){var t=this;this.resetting=!0,void 0!==this.serverId&&""!=this.serverId?Object(c["u"])({serverId:this.serverId}).then(function(i){t.resetting=!1,0===i.code&&t.resetDataAndBtn()}):this.resetDataAndBtn()},resetDataAndBtn:function(){this.loading=!1,this.closeLoading=!1,this.isclose=!0,this.isOpe=!1,this.deviceId="",this.cityId="",this.districtId="",this.districtList=[],this.serverId="",this.backupDesc="",this.jobDetailId="",this.connectionId="",this.resetting=!1,this.neList=[]},isNoNull:function(t){if(void 0!==t&&null!=t&&""!=t)return!0},submitLogin:function(){var t=this;if(this.isNoNull(this.cityId))if(this.isNoNull(this.districtId))if(this.isNoNull(this.deviceId))if(this.isNoNull(this.connectionId)){this.clear(),this.loading=!0;var i={areaId:this.districtId,deviceId:this.deviceId};Object(c["J"])(i).then(function(i){if(0===i.code){if(1!==i.content.length)return t.$Message.warning(t.$t("backpass.selectTip")),void(t.loading=!1);var e=i.content[0];t.jobDetailId=e.id,t.serverId=e.serverId,t.isOpe=!0,Object(c["Z"])({id:t.connectionId}).then(function(i){if(0===i.code){t.connection=i.content;var e=[];t.isNoNull(t.connection.telnetPort)?e.push({name:"telnet",port:t.connection.telnetPort}):t.isNoNull(t.connection.sshPort)?e.push({name:"ssh",port:t.connection.sshPort}):t.isNoNull(t.connection.ftpPort)?e.push({name:"ftp",port:t.connection.ftpPort}):t.isNoNull(t.connection.sftpPort)&&e.push({name:"sftp",port:t.connection.sftpPort}),t.connection.types=e,Object(c["m"])({jobDetailId:t.jobDetailId}).then(function(i){0===i.code?(t.$Message.success(t.$t("backpass.serverLoginTip")),t.isOpe=!1,t.isclose=!1,t.loading=!1,t.logForm.log=i.content):(t.loading=!1,t.isOpe=!1)})}else t.loading=!1,t.isOpe=!1})}})}else this.$Message.warning(this.$t("backupJobDetail.connectionIdsTip"));else this.$Message.warning(this.$t("backupJobDetail.deviceIdTip"));else this.$Message.warning(this.$t("backupScheduler.districtTip"));else this.$Message.warning(this.$t("backupScheduler.cityTip"))},closeConnection:function(){var t=this;this.closeLoading=!0,this.isOpe=!0,Object(c["u"])({serverId:this.serverId}).then(function(i){t.closeLoading=!1,0===i.code&&(t.$Message.success(t.$t("backpass.closeTip")),t.isOpe=!1,t.isclose=!0)})},changeArea:function(t){void 0!==t&&""!=this.deviceId&&(this.connectionId="",this.initConnection())},districtChanged:function(t){this.backupDesc="",this.isNoNull(this.deviceId)&&this.changeDevice(this.deviceId)},changeDevice:function(t){this.backupDesc="";for(var i=0;i<this.deviceList.length;i++)if(this.deviceList[i].id==t&&this.isNoNull(this.deviceList[i].backupDesc)){this.backupDesc=this.deviceList[i].backupDesc.split("\n");break}void 0!==t&&this.isNoNull(this.districtId)&&(this.connectionId="",this.initConnection())},changeConnection:function(t){if(void 0!==t){var i=this.neList.find(function(i){return i.id===t});this.areaId=i.areaId}},clear:function(){this.logForm.log="",this.cmd=""},send:function(){var t=this,i=this.cmd;this.cmd="",this.isExecuting=!0,Object(c["B"])({command:i,serverId:this.serverId}).then(function(i){0===i.code&&(t.logForm.log=t.logForm.log+i.content,setTimeout(function(){var t=document.getElementById("logTextId"),i=document.getElementById("logTextAreaId");t.scrollTop=t.scrollHeight,i.focus()},200)),t.isExecuting=!1})}},mounted:function(){var t=JSON.parse(r.a.get("userInfo"));this.areaId=t.address,this.init()}},d=l,p=(e("2aa0"),e("2877")),u=Object(p["a"])(d,s,n,!1,null,null,null);u.options.__file="backupBackpassManual.vue";i["default"]=u.exports}}]);