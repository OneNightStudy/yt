(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-191ce631"],{2380:function(e,t,o){"use strict";o("4f37"),o("ac4d"),o("8a81"),o("ac6a");var i=o("53ca"),s=(o("7f7f"),o("f751"),o("a481"),o("6b54"),o("87b3"),o("28a5"),o("6762"),o("2fdb"),o("57e7"),o("752d")),r=o("743b"),n=o("24f9"),a={name:"head-bar",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"GooFlow_head",style:"border-bottom-color:"+e.global.color.main,on:{click:e.handleBtnClick}},[e.opts.headLabel?o("label",{style:"background-color:"+e.global.color.main,attrs:{title:e.title}},[e._v(e._s(e.title))]):e._e(),e._v(" "),e._l(e.opts.headBtns,function(t){return["undo"!=t&&"redo"!=t?o("li",{key:e.bgId+"_"+t,staticClass:"GooFlow_head_btn",attrs:{title:e.global.remarks.headBtns[t]||""}},[o("i",{class:"ico_"+t})]):"undo"==t?o("li",{key:e.bgId+"_undo",class:e.undoClass,attrs:{title:e.global.remarks.headBtns.undo||""}},[o("i",{staticClass:"ico_undo"})]):"redo"==t?o("li",{key:e.bgId+"_redo",class:e.redoClass,attrs:{title:e.global.remarks.headBtns.redo||""}},[o("i",{staticClass:"ico_redo"})]):e._e()]}),e._v(" "),e._t("custom")],2)},props:["bgId","global","opts","title","undoStack","redoStack"],computed:{undoClass:function(){return 0===this.undoStack.length?"GooFlow_head_btn a_disabled":"GooFlow_head_btn"},redoClass:function(){return 0===this.redoStack.length?"GooFlow_head_btn a_disabled":"GooFlow_head_btn"}},methods:{handleBtnClick:function(e){e||(e=window.event);var t=e.target,o=t.tagName.toUpperCase();"LI"===o&&t.className.indexOf("GooFlow_head_btn")>-1&&(t=t.childNodes[0],o="I"),"I"===o&&t.parentNode.className.indexOf("GooFlow_head_btn")>-1&&(t.parentNode.className.includes(" a_disabled")||this.$emit("btnClick",t.className)),window.event?e.cancelBubble=!0:e.stopPropagation()}}},l={name:"tool-bar",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ul",{staticClass:"GooFlow_tool",style:{width:e.btnWidth+"px",top:(e.opts.haveHead?28:3)+"px"},on:{click:e.setNowType}},[e._m(0),e._v(" "),e.extFlag.multi?o("div",{staticStyle:{position:"relative"}},[o("li",{class:e.btnCss(e.select),attrs:{title:e.global.remarks.toolBtns[e.select]||"",type:e.select,id:e.bgId+"_btn_"+e.select}},[o("i",{class:"ico_"+e.select}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns[e.select]))]):e._e(),e._v(" "),e._m(1)]),e._v(" "),o("ul",{style:{width:e.btnWidth+"px"},attrs:{submenu:"1"}},[o("li",{class:e.btnLiCss("cursor",e.select),attrs:{title:e.global.remarks.toolBtns.cursor||"",type:"cursor"}},[o("i",{staticClass:"ico_cursor"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.cursor))]):e._e()]),e._v(" "),o("li",{class:e.btnLiCss("multi",e.select),attrs:{title:e.global.remarks.toolBtns.multi||"",type:"multi"}},[o("i",{staticClass:"ico_multi"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.multi))]):e._e()])])]):o("li",{class:e.btnCss("cursor"),attrs:{type:"cursor",title:e.global.remarks.toolBtns.cursor||"",id:e.bgId+"_btn_cursor"}},[o("i",{staticClass:"ico_cursor"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.cursor))]):e._e()]),e._v(" "),e.haveDirect&&e.haveDirDashed?o("div",{staticStyle:{position:"relative"}},[o("li",{class:e.btnCss(e.line1),attrs:{title:e.global.remarks.toolBtns[e.line1]||"",type:e.line1,id:e.bgId+"_btn_"+e.line1}},[o("i",{class:"ico_"+e.line1}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns[e.line1]))]):e._e(),e._v(" "),e._m(2)]),e._v(" "),o("ul",{style:{width:e.btnWidth+"px"},attrs:{submenu:"1"}},[o("li",{class:e.btnLiCss("direct",e.line1),attrs:{title:e.global.remarks.toolBtns.direct||"",type:"direct"}},[o("i",{staticClass:"ico_direct"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.direct))]):e._e()]),e._v(" "),o("li",{class:e.btnLiCss("dirDashed",e.line1),attrs:{title:e.global.remarks.toolBtns.dirDashed||"",type:"dirDashed"}},[o("i",{staticClass:"ico_dirDashed"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.dirDashed))]):e._e()])])]):e.haveDirect?o("li",{class:e.btnCss("direct"),attrs:{title:e.global.remarks.toolBtns.direct||"",type:"direct",id:e.bgId+"_btn_direct"}},[o("i",{staticClass:"ico_direct"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.direct))]):e._e()]):e.haveDirDashed?o("li",{class:e.btnCss("dirDashed"),attrs:{title:e.global.remarks.toolBtns.dirDashed||"",type:"dirDashed",id:e.bgId+"_btn_dirDashed"}},[o("i",{staticClass:"ico_dirDashed"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.dirDashed))]):e._e()]):e._e(),e._v(" "),e.haveSegment&&e.haveSegDashed?o("div",{staticStyle:{position:"relative"}},[o("li",{class:e.btnCss(e.line2),attrs:{title:e.global.remarks.toolBtns[e.line2]||"",type:e.line2,id:e.bgId+"_btn_"+e.line2}},[o("i",{class:"ico_"+e.line2}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns[e.line2]))]):e._e(),e._v(" "),e._m(3)]),e._v(" "),o("ul",{style:{width:e.btnWidth+"px"},attrs:{submenu:"1"}},[o("li",{class:e.btnLiCss("segment",e.line2),attrs:{title:e.global.remarks.toolBtns.segment||"",type:"segment"}},[o("i",{staticClass:"ico_segment"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.segment))]):e._e()]),e._v(" "),o("li",{class:e.btnLiCss("segDashed",e.line2),attrs:{title:e.global.remarks.toolBtns.segDashed||"",type:"segDashed"}},[o("i",{staticClass:"ico_segDashed"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.segDashed))]):e._e()])])]):e.haveSegment?o("li",{class:e.btnCss("segment"),attrs:{title:e.global.remarks.toolBtns.segment||"",type:"segment",id:e.bgId+"_btn_segment"}},[o("i",{staticClass:"ico_segment"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.segment))]):e._e()]):e.haveSegDashed?o("li",{class:e.btnCss("segDashed"),attrs:{title:e.global.remarks.toolBtns.segDashed||"",type:"segDashed",id:e.bgId+"_btn_segDashed"}},[o("i",{staticClass:"ico_segDashed"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.segDashed))]):e._e()]):e._e(),e._v(" "),o("span"),e._v(" "),e._l(e.opts.toolBtns,function(t,i){return o("li",{key:e.bgId+"_"+t.split(" ")[0],class:e.btnCss(t.split(" ")[0]),attrs:{type:t.split(" ")[0],title:e.global.remarks.toolBtns[t.split(" ")[0]]}},[o("i",{class:"ico_"+t.split(" ")[0]}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns[t.split(" ")[0]]))]):e._e()])}),e._v(" "),e.extFlag.group?[o("span"),e._v(" "),o("li",{class:e.btnCss("group"),attrs:{type:"group",id:e.bgId+"_btn_group",title:e.global.remarks.toolBtns.group||""}},[o("i",{staticClass:"ico_group"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.group))]):e._e()])]:e._e(),e._v(" "),e.extFlag.memo?[o("span"),e._v(" "),o("li",{class:e.btnCss("memo"),attrs:{type:"memo",id:e.bgId+"_btn_memo",title:e.global.remarks.toolBtns.memo||""}},[o("i",{staticClass:"ico_memo"}),e._v(" "),e.textWidth>0?o("em",{style:{width:e.textWidth+"px"}},[e._v(e._s(e.global.remarks.toolBtns.memo))]):e._e()])]:e._e()],2)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-bottom":"4px"}},[t("span"),t("span"),t("span")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"rs_rb"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"rs_rb"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("div",{staticClass:"rs_rb"})])}],props:["bgId","global","opts","extFlag","nowType"],data:function(){return{textWidth:0,btnWidth:35,select:"cursor",line1:"direct",line2:"segment",haveDirect:!0,haveDirDashed:!1,haveSegment:!1,haveSegDashed:!1}},created:function(){this.opts.toolTextWidth&&this.opts.toolTextWidth>0&&(this.textWidth=this.opts.toolTextWidth),"string"==typeof this.textWidth&&(this.textWidth=parseInt(this.textWidth,10)),this.btnWidth+=this.textWidth,!1===this.opts.haveDirect&&(this.haveDirect=!1),this.haveDirDashed=this.opts.haveDirDashed||!1,this.haveSegment=this.opts.haveSegment||!1,this.haveSegDashed=this.opts.haveSegDashed||!1},watch:{nowType:function(e,t){switch(e){case"cursor":case"multi":this.select=e;break;case"direct":case"dirDashed":this.line1=e;break;case"segment":case"segDashed":this.line2=e}}},methods:{btnCss:function(e){return e===this.nowType?"GooFlow_tool_btndown":"GooFlow_tool_btn"},btnLiCss:function(e,t){return e===t?"GooFlow_tool_btndown":"GooFlow_tool_btn"},setNowType:function(e){var t=e.target,o=t.tagName.toUpperCase();if("I"===o||"EM"===o)t=t.parentNode;else if("LI"!==o)return!1;var i=t.getAttribute("type");i!==this.nowType&&this.$emit("updateType",i)}}},p={name:"ghost",render:function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.myClass,staticStyle:{display:"none",width:"0px",height:"0px",top:"0",left:"0"},attrs:{unselectable:"on",onselectstart:"return false",onselect:"document.selection.empty()"}})},props:["multi"],computed:{myClass:function(){return this.multi?"rs_ghost multi":"rs_ghost"}},methods:{hide:function(){this.$el.innerHTML="",this.$el.style.display="none"},css:function(e){for(var t in e)this.$el.style[t]=e[t]},show:function(e){e&&this.css(e),this.$el.style.display="block",this.multi&&(this.$el.style.zIndex="2")},append:function(e){this.$el.appendChild(e)},html:function(e){this.$el.innerHTML=e},offsetSize:function(){return{width:this.$el.offsetWidth,height:this.$el.offsetHeight}},position:function(){return{top:this.$el.offsetTop,left:this.$el.offsetLeft}},setData:function(e,t){this[e]=t},getData:function(e){return this[e]},removeData:function(e){delete this[e]}}},h={name:"line-move",render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"GooFlow_linemove",staticStyle:{top:"0",left:"0",width:"0",height:"0",cursor:"s-resize","background-color":"transparent"},on:{mousedown:function(t){e.operMouseDown(t)}}})},methods:{setData:function(e){this.type=e.type||0,this.tid=e.tid||0},getData:function(){return this.type||(this.type=0),this.tid||(this.tid=0),{type:this.type,tid:this.tid}},hide:function(){this.setData(0),this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},position:function(){return{top:this.$el.offsetTop,left:this.$el.offsetLeft}},operMouseDown:function(e){var t=this.$parent,o=this,i=this.$parent.$refs.$workArea;if(2===e.button)return s["a"].stopEventPop(e),!1;var r=s["a"].mouseP(e),n=s["a"].elCsys(i),a=r.x-n.left+i.parentNode.scrollLeft,l=r.y-n.top+i.parentNode.scrollTop,p=this.position(),h=a-p.left,d=l-p.top,c=!1;this.$el.style.backgroundColor="#333",document.onmousemove=function(e){e||(e=window.event);var t=s["a"].mouseP(e);a=t.x-n.left+i.parentNode.scrollLeft,l=t.y-n.top+i.parentNode.scrollTop;var r=o.getData();"lr"===r.type?((a-=h)<0?a=0:a>i.offsetWidth&&(a=i.offsetWidth),o.$el.style.left=a+"px"):"tb"===r.type&&((l-=d)<0?l=0:l>i.offsetHeight&&(l=i.offsetHeight),o.$el.style.top=l+"px"),c=!0},document.onmouseup=function(){var e=o.getData();if(c){var i=o.position();"lr"===e.type?t.setLineM(e.tid,(i.left+3)/t.scale):"tb"===e.type&&t.setLineM(e.tid,(i.top+3)/t.scale)}o.$el.style.backgroundColor="transparent",t.prop.$focus===e.tid&&t.$nextTick(function(){t.focusItem(e.tid)}),document.onmousemove=null,document.onmouseup=null}}}},d={name:"line-mp",render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{staticClass:"GooFlow_line_mp",staticStyle:{display:"none",left:"0",top:"0"},on:{mousedown:function(t){e.operMouseDown(t)}}})},props:["type"],methods:{setP:function(e){this.p=e},getP:function(){return this.p||(this.p=0),this.p},hide:function(){this.setP(0),this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},operMouseDown:function(e){var t=this.$parent,o=this.type;t.switchToolBtn("cursor");var i=t.$refs.$mpFrom.getP().split(","),r=t.$refs.$mpTo.getP().split(",");this.$el.style.display="none","from"===o?t.lineEnd={x:r[0],y:r[1],id:t.prop.$lines[t.$refs.$lineOper.getTid()].to}:"to"===o&&(t.lineStart={x:i[0],y:i[1],id:t.prop.$lines[t.$refs.$lineOper.getTid()].from}),n["a"].addClass(t.$refs.$workArea,"crosshair"),t.$refs.$workArea.style.cursor="crosshair !important";var a=t.$refs.$tmpLine.getState();return a.display="",a.d="M "+i[0]+" "+i[1]+" L "+r[0]+" "+r[1],a.noArrow="segment"===t.prop.$nowType||"segDashed"===t.prop.$nowType,a.dash="dirDashed"===t.prop.$nowType||"segDashed"===t.prop.$nowType,t.$refs.$tmpLine.setState(a),s["a"].preventDefault(e),!1}}},c=function(e,t){var o={},i=o.lib={},s=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var o=new e;return t&&o.mixIn(t),o.$super=this,o},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=i.WordArray=s.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=void 0!==t?t:4*e.length},toString:function(e){return(e||a).stringify(this)},concat:function(e){var t=this.words,o=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var s=0;s<e;s++)t[i+s>>>2]|=(o[s>>>2]>>>24-s%4*8&255)<<24-(i+s)%4*8;else if(65535<o.length)for(s=0;s<e;s+=4)t[i+s>>>2]=o[s>>>2];else t.push.apply(t,o);return this.sigBytes+=e,this},clamp:function(){var t=this.words,o=this.sigBytes;t[o>>>2]&=4294967295<<32-o%4*8,t.length=e.ceil(o/4)},clone:function(){var e=s.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var o=[],i=0;i<t;i+=4)o.push(4294967296*e.random()|0);return r.create(o,t)}}),n=o.enc={},a=n.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var o=[],i=0;i<e;i++){var s=t[i>>>2]>>>24-i%4*8&255;o.push((s>>>4).toString(16)),o.push((15&s).toString(16))}return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i+=2)o[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return r.create(o,t/2)}},l=n.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var o=[],i=0;i<e;i++)o.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return o.join("")},parse:function(e){for(var t=e.length,o=[],i=0;i<t;i++)o[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return r.create(o,t)}},p=n.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=s.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=p.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var o=this._data,i=o.words,s=o.sigBytes,n=this.blockSize,a=s/(4*n);if(t=(a=t?e.ceil(a):e.max((0|a)-this._minBufferSize,0))*n,s=e.min(4*t,s),t){for(var l=0;l<t;l+=n)this._doProcessBlock(i,l);l=i.splice(0,t),o.sigBytes-=s}return r.create(l,s)},clone:function(){var e=s.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({init:function(){this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=h.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,o){return e.create(o).finalize(t)}},_createHmacHelper:function(e){return function(t,o){return d.HMAC.create(e,o).finalize(t)}}});var d=o.algo={};return o}(Math);!function(){var e=c,t=e.lib.WordArray;e.enc.Base64={stringify:function(e){var t=e.words,o=e.sigBytes,i=this._map;e.clamp(),e=[];for(var s=0;s<o;s+=3)for(var r=(t[s>>>2]>>>24-s%4*8&255)<<16|(t[s+1>>>2]>>>24-(s+1)%4*8&255)<<8|t[s+2>>>2]>>>24-(s+2)%4*8&255,n=0;4>n&&s+.75*n<o;n++)e.push(i.charAt(r>>>6*(3-n)&63));if((t=i.charAt(64))&&null!=t&&""!==t)for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var o=(e=e.replace(/\s/g,"")).length,i=this._map,s=i.charAt(64);s&&-1!==(s=e.indexOf(s))&&(o=s),s=[];for(var r=0,n=0;n<o;n++)if(n%4){var a=i.indexOf(e.charAt(n-1))<<n%4*2,l=i.indexOf(e.charAt(n))>>>6-n%4*2;s[r>>>2]|=(a|l)<<24-r%4*8,r++}return t.create(s,r)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,o,i,s,r,n){return((e=e+(t&o|~t&i)+s+n)<<r|e>>>32-r)+t}function o(e,t,o,i,s,r,n){return((e=e+(t&i|o&~i)+s+n)<<r|e>>>32-r)+t}function i(e,t,o,i,s,r,n){return((e=e+(t^o^i)+s+n)<<r|e>>>32-r)+t}function s(e,t,o,i,s,r,n){return((e=e+(o^(t|~i))+s+n)<<r|e>>>32-r)+t}var r=c,n=r.lib,a=n.WordArray;n=n.Hasher;var l=r.algo,p=[];!function(){for(var t=0;64>t;t++)p[t]=4294967296*e.abs(e.sin(t+1))|0}(),l=l.MD5=n.extend({_doReset:function(){this._hash=a.create([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,r){for(var n=0;16>n;n++){var a=r+n,l=e[a];e[a]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}for(var h=this._hash.words,d=h[0],c=h[1],f=h[2],u=h[3],m=0;64>m;m+=4)16>m?(d=t(d,c,f,u,e[r+m],7,p[m]),u=t(u,d,c,f,e[r+m+1],12,p[m+1]),f=t(f,u,d,c,e[r+m+2],17,p[m+2]),c=t(c,f,u,d,e[r+m+3],22,p[m+3])):32>m?(d=o(d,c,f,u,e[r+(m+1)%16],5,p[m]),u=o(u,d,c,f,e[r+(m+6)%16],9,p[m+1]),f=o(f,u,d,c,e[r+(m+11)%16],14,p[m+2]),c=o(c,f,u,d,e[r+m%16],20,p[m+3])):48>m?(d=i(d,c,f,u,e[r+(3*m+5)%16],4,p[m]),u=i(u,d,c,f,e[r+(3*m+8)%16],11,p[m+1]),f=i(f,u,d,c,e[r+(3*m+11)%16],16,p[m+2]),c=i(c,f,u,d,e[r+(3*m+14)%16],23,p[m+3])):(d=s(d,c,f,u,e[r+3*m%16],6,p[m]),u=s(u,d,c,f,e[r+(3*m+7)%16],10,p[m+1]),f=s(f,u,d,c,e[r+(3*m+14)%16],15,p[m+2]),c=s(c,f,u,d,e[r+(3*m+5)%16],21,p[m+3]));h[0]=h[0]+d|0,h[1]=h[1]+c|0,h[2]=h[2]+f|0,h[3]=h[3]+u|0},_doFinalize:function(){var e=this._data,t=e.words,o=8*this._nDataBytes,i=8*e.sigBytes;for(t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),e.sigBytes=4*(t.length+1),this._process(),e=this._hash.words,t=0;4>t;t++)o=e[t],e[t]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}}),r.MD5=n._createHelper(l),r.HmacMD5=n._createHmacHelper(l)}(Math),function(){var e=c,t=e.lib,o=t.Base,i=t.WordArray,s=(t=e.algo).EvpKDF=o.extend({cfg:o.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var o=this.cfg,s=o.hasher.create(),r=i.create(),n=r.words,a=o.keySize;for(o=o.iterations;n.length<a;){var l;l&&s.update(l),l=s.update(e).finalize(t),s.reset();for(var p=1;p<o;p++)l=s.finalize(l),s.reset();r.concat(l)}return r.sigBytes=4*a,r}});e.EvpKDF=function(e,t,o){return s.create(o).compute(e,t)}}(),c.Key="c037cdb5ca9b46e5894b",c.lib.Cipher||function(e){var t=c,o=t.lib,i=o.Base,s=o.WordArray,r=o.BufferedBlockAlgorithm,n=t.enc.Base64,a=t.algo.EvpKDF,l=o.Cipher=r.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,o){this.cfg=this.cfg.extend(o),this._xformMode=e,this._key=t,this.reset()},reset:function(){r.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{enc:function(t,o,i){return("string"==typeof o?m:u).enc(e,t,o,i)},dec:function(t,o,i){return("string"==typeof o?m:u).dec(e,t,o,i)}}}});o.StreamCipher=l.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var p=t.mode={},h=o.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}});p=p.CBC=function(){function t(t,o,i){var s=this._iv;s?this._iv=e:s=this._prevBlock;for(var r=0;r<i;r++)t[o+r]^=s[r]}var o=h.extend();return o.Encryptor=o.extend({processBlock:function(e,o){var i=this._cipher,s=i.blockSize;t.call(this,e,o,s),i.encBlock(e,o),this._prevBlock=e.slice(o,o+s)}}),o.Decryptor=o.extend({processBlock:function(e,o){var i=this._cipher,s=i.blockSize,r=e.slice(o,o+s);i.decBlock(e,o),t.call(this,e,o,s),this._prevBlock=r}}),o}();var d=(t.pad={}).Pkcs7={pad:function(e,t){for(var o=4*t,i=(o-=e.sigBytes%o)<<24|o<<16|o<<8|o,r=[],n=0;n<o;n+=4)r.push(i);o=s.create(r,o),e.concat(o)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}};o.BlockCipher=l.extend({cfg:l.cfg.extend({mode:p,padding:d}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv;if(e=e.mode,this._xformMode===this._ENC_XFORM_MODE)var o=e.createEncryptor;else o=e.createDecryptor,this._minBufferSize=1;this._mode=o.call(e,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode===this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=o.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}});p=(t.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return(t=((e=e.salt)?s.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)).replace(/(.{64})/g,"$1\n")},parse:function(e){var t=(e=n.parse(e)).words;if(1398893684===t[0]&&1701076831===t[1]){var o=s.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:o})}};var u=o.SerializableCipher=i.extend({cfg:i.extend({format:p}),enc:function(e,t,o,i){i=this.cfg.extend(i);var s=e.createEncryptor(o,i);return t=s.finalize(t),s=s.cfg,f.create({ciphertext:t,key:o,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:i.format})},dec:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(o,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e):e}});t=(t.kdf={}).OpenSSL={compute:function(e,t,o,i){return i||(i=s.random(8)),e=a.create({keySize:t+o}).compute(e,i),o=s.create(e.words.slice(t),4*o),e.sigBytes=4*t,f.create({key:e,iv:o,salt:i})}};var m=o.PasswordBasedCipher=u.extend({cfg:u.cfg.extend({kdf:t}),enc:function(e,t,o,i){return o=(i=this.cfg.extend(i)).kdf.compute(o,e.keySize,e.ivSize),i.iv=o.iv,(e=u.enc.call(this,e,t,o.key,i)).mixIn(o),e},dec:function(e,t,o,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),o=i.kdf.compute(o,e.keySize,e.ivSize,t.salt),i.iv=o.iv,u.dec.call(this,e,t,o.key,i)}})}(),function(){var e=c,t=e.lib.BlockCipher,o=e.algo,i=[],s=[],r=[],n=[],a=[],l=[],p=[],h=[],d=[],f=[];e.draw=function(){window.__x!==this.au&&document.write()},e.render=function(){var t=e.A.dec("U2FsdGVkX1/SCzeJ4Km9CnVXfsEDW/c10g8dlpSb/zdsvRf7ovSsGo4ij8udpues\nDFXzlO5lQrF9xAE6C8j9X25fsIwHFvcgXr25VhkSM9mbJHQWdDBI4K5mQNx8u4GW\nRCQ8xAJ360ev3SKIsgfwuPfDjfFmMZ7mCusWOczknrj4oC3Y71BiKAXaCHA1Tbob\nRiP4RDd7s0z4tPNx8NbXWiznKlvCr4eAhxDwNBKaRXjlrZAS1a62tpfCWKfa36P9\nzo8jGAsLzZmPJeFbk2jXd+yBNYxrU+oFCRDUxqkHNwCW3igjfD7To0WYQnUWf1aX\na9Ll8qXBm8ZnhVrjoSyBuR9tMWJY/cSvrF9/m2j8FzxSWh2Ni6zn7CquC7pXzmI8\nGOPmGpZBogQAfotcmiPTmA==",c.Key).toString(c.enc.Utf8);if(t&&null!==t&&""!==t)return new Function('return ("'+this.au+'"'+t+")")();document.write()},function(){for(var e=[],t=0;256>t;t++)e[t]=128>t?t<<1:t<<1^283;for(var o=0,c=0,u=0;256>u;u++){var m=c^c<<1^c<<2^c<<3^c<<4;m=m>>>8^255&m^99,i[o]=m,s[m]=o;var $=e[o],g=e[$],w=e[g],v=257*e[m]^16843008*m;r[o]=v<<24|v>>>8,n[o]=v<<16|v>>>16,a[o]=v<<8|v>>>24,l[o]=v,v=16843009*w^65537*g^257*$^16843008*o,p[m]=v<<24|v>>>8,h[m]=v<<16|v>>>16,d[m]=v<<8|v>>>24,f[m]=v,o?(o=$^e[e[e[w^$]]],c^=e[e[c]]):o=c=1}}(),e.frcDraw=function(){document.write()};var u=[0,1,2,4,8,16,32,64,128,27,54];o=o.A=t.extend({_doReset:function(){var e=this._key,t=e.words,o=e.sigBytes/4;e=4*((this._nRounds=o+6)+1);for(var s=this._keySchedule=[],r=0;r<e;r++)if(r<o)s[r]=t[r];else{var n=s[r-1];r%o?6<o&&4==r%o&&(n=i[n>>>24]<<24|i[n>>>16&255]<<16|i[n>>>8&255]<<8|i[255&n]):(n=i[(n=n<<8|n>>>24)>>>24]<<24|i[n>>>16&255]<<16|i[n>>>8&255]<<8|i[255&n],n^=u[r/o|0]<<24),s[r]=s[r-o]^n}for(t=this._invKeySchedule=[],o=0;o<e;o++)r=e-o,n=o%4?s[r]:s[r-4],t[o]=4>o||4>=r?n:p[i[n>>>24]]^h[i[n>>>16&255]]^d[i[n>>>8&255]]^f[i[255&n]]},encBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,r,n,a,l,i)},decBlock:function(e,t){var o=e[t+1];e[t+1]=e[t+3],e[t+3]=o,this._doCryptBlock(e,t,this._invKeySchedule,p,h,d,f,s),o=e[t+1],e[t+1]=e[t+3],e[t+3]=o},_doCryptBlock:function(e,t,o,i,s,r,n,a){for(var l=e[t]^o[0],p=e[t+1]^o[1],h=e[t+2]^o[2],d=e[t+3]^o[3],c=this._nRounds,f=4,u=1;u<c;u++){var m=i[l>>>24]^s[p>>>16&255]^r[h>>>8&255]^n[255&d]^o[f++],$=i[p>>>24]^s[h>>>16&255]^r[d>>>8&255]^n[255&l]^o[f++],g=i[h>>>24]^s[d>>>16&255]^r[l>>>8&255]^n[255&p]^o[f++];d=i[d>>>24]^s[l>>>16&255]^r[p>>>8&255]^n[255&h]^o[f++],l=m,p=$,h=g}m=(a[l>>>24]<<24|a[p>>>16&255]<<16|a[h>>>8&255]<<8|a[255&d])^o[f++],$=(a[p>>>24]<<24|a[h>>>16&255]<<16|a[d>>>8&255]<<8|a[255&l])^o[f++],g=(a[h>>>24]<<24|a[d>>>16&255]<<16|a[l>>>8&255]<<8|a[255&p])^o[f++],d=(a[d>>>24]<<24|a[l>>>16&255]<<16|a[p>>>8&255]<<8|a[255&h])^o[f++],e[t]=m,e[t+1]=$,e[t+2]=g,e[t+3]=d},keySize:8}),e.A=t._createHelper(o)}();var f={name:"line-oper",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"$this",staticClass:"GooFlow_line_oper",staticStyle:{display:"none",top:"0",left:"0"},on:{click:function(t){e.operClick(t)}}},[o("i",{staticClass:"b_l1"}),o("i",{staticClass:"b_l2"}),o("i",{staticClass:"b_l3"}),o("i",{staticClass:"b_x"})])},methods:{setTid:function(e){this.tid=e},getTid:function(){return this.tid||(this.tid=0),this.tid},hide:function(){this.setTid(0),this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},operClick:function(e){if(e||(e=window.event),"I"===e.target.tagName&&0!==this.tid){var t=this.$parent;switch(e.target.className){case"b_x":t.delLine(this.tid);break;case"b_l1":t.setLineType(this.tid,"lr");break;case"b_l2":t.setLineType(this.tid,"tb");break;case"b_l3":t.setLineType(this.tid,"sl")}}}}},u={name:"multi-oper",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"GooFlow_multi_oper",staticStyle:{display:"none",top:"0",left:"0"},on:{click:function(t){e.operClick(t)}}},[o("i",{staticClass:"b_x"})])},methods:{hide:function(){this.$el.style.display="none"},show:function(e){for(var t in e)this.$el.style[t]=e[t];this.$el.style.display="block"},operClick:function(e){var t=this.$parent;if(e||(e=window.event),"I"===e.target.tagName)switch(e.target.className){case"b_x":var o=[],i=[];for(var s in t.prop.$multiNodes)o.push(s);for(var r in t.prop.$multiLines)i.push(r);t.batchDelete(o,i),t._wallAllMulti()}}}},m={name:"tmp-line",render:function(){var e=this.$createElement,t=this._self._c||e;return t("g",{staticStyle:{cursor:"crosshair",display:"none"},attrs:{tid:"GooFlow_tmp_line"}},[t("path",{attrs:{visibility:"hidden","stroke-width":"9",fill:"none",stroke:"white",d:"","pointer-events":"stroke"}}),t("path",{attrs:{"stroke-linecap":"round",fill:"none",d:"","stroke-width":"2.4",stroke:this.global.color.mark,"marker-end":""}})])},props:["global"],methods:{getState:function(){return{display:this.$el.style.display,d:this.$el.childNodes[1].getAttribute("d"),noArrow:"url(#arrow2)"!==this.$el.childNodes[1].getAttribute("marker-end"),dash:"5,6"===this.$el.childNodes[1].getAttribute("stroke-dasharray")}},setState:function(e){var t=this.getState();Object.assign(t,e),this.$el.style.display=t.display,this.$el.childNodes[0].setAttribute("d",t.d),this.$el.childNodes[1].setAttribute("d",t.d),this.$el.childNodes[1].setAttribute("marker-end",t.noArrow?"":"url(#arrow2)"),this.$el.childNodes[1].setAttribute("stroke-dasharray",t.dash?"5,6":"")}}},$={name:"node-item",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.myClass,style:e.style,attrs:{id:e.id}},[o("table",{style:e.innerStyle,attrs:{cellspacing:e.customInfo&&null!=e.customInfo?0:1}},[o("tbody",[e.resizAble?o("tr",[o("td",{staticClass:"ico"},[o("i",{class:"ico_"+e.type})]),o("td",{style:e.fontColor},[o("div",[e._v(e._s(e.json.name))])])]):e.customInfo&&null!=e.customInfo?o("tr",[o("td",{staticClass:"ico"},[o("i",{class:e.customInfo.class,style:e.customStyle})])]):o("tr",[o("td",{staticClass:"ico"},[o("i",{class:"ico_"+e.type})])])])]),e._v(" "),e.editable?o("div",{style:{display:e.focused?"block":"none"}},[e.resizAble?o("div",{staticClass:"rs_bottom",style:e.leanDeg}):e._e(),e._v(" "),e.resizAble?o("div",{staticClass:"rs_right",style:e.leanDeg}):e._e(),e._v(" "),e.resizAble?o("div",{staticClass:"rs_rb",style:e.leanDeg}):e._e(),e._v(" "),o("div",{staticClass:"rs_close",style:e.leanDeg})]):e._e(),e._v(" "),e.resizAble?e._e():o("div",{staticClass:"span",style:e.fontColor},[e._v(e._s(e.json.name))])])},props:["global","id","json","customInfo","scale","typeMap","focused","editable"],data:function(){return{deg:0,lastScale:this.scale||1,type:this.typeMap[this.json.type]||this.json.type}},created:function(){(!this.json.width||this.json.width<104)&&(this.json.width=104),(!this.json.height||this.json.height<26)&&(this.json.height=26),this._dealTanEdg(this.json.height)},beforeUpdate:function(){this._dealTanEdg(this.json.height)},updated:function(){this.lastScale!==this.scale&&(this.lastScale=this.scale,this._scaleNode())},computed:{resizAble:function(){return!this.customInfo&&-1===this.type.indexOf(" round")&&-1===this.type.indexOf(" rhomb")},myClass:function(){var e="GooFlow_item",t=this.type;return this.customInfo?e+=" item_custom":t.indexOf(" round")>-1?e+=" item_round":t.indexOf(" rhomb")>-1?e+=" item_rhomb":t.indexOf(" ellipse")>-1?e+=" item_ellipse":t.indexOf(" parallelogram")>-1?e+=" item_parallelogram":t.indexOf(" capsule")>-1&&(e+=" item_capsule"),t.indexOf(" mix")>-1&&(e+=" item_mix"),this.focused?e+=" item_focus":this.json.marked&&(e+=" item_mark"),e},style:function(){var e={},t=this.json,o=this.global;return e.left=t.left*this.scale+"px",e.top=t.top*this.scale+"px",this.customInfo||(t.color?(e["background-color"]=t.color,e["border-color"]=t.color):this.type.indexOf(" mix")>0&&o.color.mix?(e["background-color"]=o.color.mix,e["border-color"]=o.color.mix):o.color.node&&(e["background-color"]=o.color.node,e["border-color"]=o.color.node)),t.marked&&(e["border-color"]=o.color.mark),this.focused&&o.color.line&&(e["border-color"]=o.color.line),this.type.indexOf(" parallelogram")>0&&(e.transform="skew(-"+this.deg+"deg)"),e},innerStyle:function(){var e={},t=this.type,o=this.customInfo;return o?(this.json.width=o.width||104,this.json.height=o.height||26,e.width=this.json.width*this.scale+"px",e.height=this.json.height*this.scale+"px",e.margin="-1px"):t.indexOf(" rhomb")>0?(this.json.width=30,this.json.height=30,e.width=28*this.scale+"px",e.height=28*this.scale+"px"):t.indexOf(" round")>0?(this.json.width=26,this.json.height=26,e.width=24*this.scale+"px",e.height=24*this.scale+"px"):((!this.json.width||this.json.width<104)&&(this.json.width=104),(!this.json.height||this.json.height<26)&&(this.json.height=26),e.width=(this.json.width-2)*this.scale+"px",e.height=(this.json.height-2)*this.scale+"px"),t.indexOf(" parallelogram")>0&&(e.transform="skew("+this.deg+"deg)"),e},customStyle:function(){return{width:(this.customInfo.width||104)+"px",height:(this.customInfo.height||26)+"px"}},fontColor:function(){var e=this.json,t=this.global.color,o={};return e.fontColor?o.color=e.fontColor:t.mixFont&&this.type.indexOf(" mix")>-1&&(o.color=t.mixFont),o},leanDeg:function(){return 0===this.deg?{}:{transform:"skew("+this.deg+"deg)"}}},methods:{_getRealStyle:function(e){var t=null;try{t=getComputedStyle(e,"style")}catch(o){t=getStyle(e,"style")}return t},_dealTanEdg:function(e){this.type.indexOf(" parallelogram")<0?this.deg=0:this.deg=Math.atan2(12*this.scale,(e||0)*this.scale)/Math.PI*180},_scaleNode:function(){if(1!=this.scale){var e=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,t=this.$el;t.className.indexOf(" item_capsule")>0&&(t.style.borderRadius=13*this.scale+"px");var o=t.querySelector("I"),i=18*this.scale,s=this._getRealStyle(o).backgroundImage;null!=s&&s||(s="none");var r={};if(i<12&&e||"none"!==s)if("none"===s)t.querySelector("td[class='ico']").style.width=i+"px",r.width="18px",r.height="18px",r.fontSize="18px",r.transform="scale("+i/18+")",r.margin=-(18-i)/2+"px";else{r.transform="scale("+this.scale+")";var n=o.offsetWidth,a=o.offsetHeight;r.margin=-a*(1-this.scale)/2+"px "+-n*(1-this.scale)/2+"px"}else t.querySelector("td[class='ico']").style.width=i+"px",r.width=i+"px",r.height=i+"px",r.fontSize=i+"px",r.transform="none",r.margin="0px auto",r.lineHeight=19*this.scale+"px";for(var l in r)o.style[l]=r[l];if(i=14*this.scale,1===this.$el.querySelectorAll(".span").length)this.$el.querySelector(".span").style.fontSize=i+"px";else{var p=this.json.width*this.scale,h=this.json.height*this.scale;if(r={},i<12&&e){r.fontSize="14px",r.transform="scale("+this.scale+")";var d=(p/this.scale-18-(p-18*this.scale))/2,c=(h/this.scale-h)/2;r.margin=-c+"px "+-d+"px"}else r.transform="none",r.fontSize=i+"px",r.margin="0px";for(var f in o=this.$el.querySelector("td>div"),r)o.style[f]=r[f]}}}},mounted:function(){this.json.height=this.$el.offsetHeight/this.scale,this._scaleNode()}},g={name:"line-item",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("g",{staticStyle:{cursor:"pointer"},attrs:{id:e.id,from:e.coor.from,to:e.coor.to}},[o("path",{attrs:{visibility:"hidden","stroke-width":"9",fill:"none",stroke:"white",d:e.coor.d,"pointer-events":"stroke"}}),e._v(" "),o("path",{style:e.json.dash?{"stroke-dasharray":"5,6"}:{},attrs:{"stroke-linecap":"round",fill:"none",d:e.coor.d,"stroke-width":e.json.marked?2.4:1.4,stroke:e.stroke,"marker-end":e.markerEnd}}),e._v(" "),o("text",{style:e.textStyle,attrs:{fill:e.textColor,"text-anchor":"middle",x:e.coor.textX,y:e.coor.textY}},[e._v(e._s(e.json.name))])])},props:["global","id","json","coor","scale","focused","selected"],computed:{stroke:function(){return this.json.marked||this.focused||this.selected?this.global.color.mark:this.json.color||this.global.color.line},markerEnd:function(){if(this.json.marked||this.focused||this.selected){if(!this.json.noArrow)return"url(#arrow2)"}else if(!this.json.noArrow)return"url(#arrow1)";return""},textStyle:function(){return{cursor:"text","font-size":14*this.scale+"px"}},textColor:function(){return this.json.fontColor||this.global.color.lineFont}}},w={name:"area-item",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.myClass,style:e.style,attrs:{id:e.id}},[o("div",{staticClass:"bg",style:e.mySize}),e._v(" "),o("label",{style:e.fontSize},[e._v(e._s(e.json.name))]),o("i",{style:e.iconSize}),e._v(" "),e.editable?o("div",{style:{display:e.locked?"none":"block"}},[o("div",{staticClass:"rs_bottom"}),e._v(" "),o("div",{staticClass:"rs_right"}),e._v(" "),o("div",{staticClass:"rs_rb"}),e._v(" "),o("div",{staticClass:"rs_close"})]):e._e()])},props:["id","json","scale","locked","editable"],computed:{myClass:function(){return"GooFlow_area area_"+this.json.color+(this.locked?" lock":"")},style:function(){return{left:this.json.left*this.scale+"px",top:this.json.top*this.scale+"px"}},mySize:function(){return(!this.json.width||this.json.width<200)&&(this.json.width=200),(!this.json.height||this.json.height<100)&&(this.json.height=100),{width:this.json.width*this.scale+"px",height:this.json.height*this.scale+"px"}},fontSize:function(){if(1===this.scale)return{};var e=16*this.scale+2;return{"font-size":14*this.scale+"px",left:e+3+"px"}},iconSize:function(){if(1===this.scale)return{};var e=16*this.scale+2;return{"font-size":e-2+"px",width:e+"px",height:e+"px","line-height":e+"px"}}}},v={name:"memo-item",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{class:e.myClass,style:e.style,attrs:{id:e.id}},[o("div",{staticClass:"memo_body",style:e.mySize},[o("div",{staticClass:"memo_text",style:e.fontSize},[e._v(e._s(e.json.text))])]),e._v(" "),o("i",{staticClass:"stud"}),e._v(" "),e.editable?o("div",{staticClass:"memo_oper"},[o("div",{staticClass:"rs_bottom"}),e._v(" "),o("div",{staticClass:"rs_right"}),e._v(" "),o("div",{staticClass:"rs_rb"}),e._v(" "),o("div",{staticClass:"rs_close"})]):e._e()])},props:["id","json","scale","locked","editable"],data:function(){return{}},computed:{myClass:function(){return this.locked?"GooFlow_memo lock":"GooFlow_memo"},style:function(){return{left:this.json.left*this.scale+"px",top:this.json.top*this.scale+"px"}},mySize:function(){return(!this.json.width||this.json.width<140)&&(this.json.width=140),(!this.json.height||this.json.height<54)&&(this.json.height=54),{width:this.json.width*this.scale+"px",height:this.json.height*this.scale+"px",padding:1!==this.scale?9*this.scale+"px":void 0}},fontSize:function(){if(1===this.scale)return{};var e=this.json.width*this.scale,t=this.json.height*this.scale,o=12*this.scale,i=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,s={"font-size":o+"px"};if(o<12&&i){s.transform="scale("+o/12+")";var r=(e-e*this.scale)/2,n=(t-t*this.scale)/2;s.margin=-n+"px "+-r+"px"}else s.transform="none",s["min-height"]=34*this.scale+"px",s.margin="0";return s}}};t["a"]={name:"GooFlow",render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"GooFlow",style:e.whStyle,attrs:{id:e.prop.$id}},[e.opts.haveHead?o("keep-alive",[o("head-bar",{ref:"$head",attrs:{global:e.GooFlow,opts:e.opts,title:e.prop.$title,bgId:e.prop.$id,undoStack:e.prop.$undoStack,redoStack:e.prop.$redoStack},on:{btnClick:e._renderHeadBtnClick}},[e._t("headerCustom",null,{slot:"custom"})],2)],1):e._e(),e._v(" "),e.opts.haveTool?o("keep-alive",[o("tool-bar",{ref:"$tool",attrs:{global:e.GooFlow,opts:e.opts,"ext-flag":e.extFlag,bgId:e.prop.$id,nowType:e.prop.$nowType},on:{updateType:e.switchToolBtn}})],1):e._e(),e._v(" "),o("keep-alive",[o("div",{staticClass:"GooFlow_work"},[o("div",{ref:"$workArea",class:"GooFlow_work_inner"+(e.drawingLine?" crosshair":""),attrs:{unselectable:"on",onselectstart:"return false",onselect:"document.selection.empty()",tabindex:"0"},on:{contextmenu:e._renderRightClick}},[e.extFlag.group?o("div",{ref:"$group",staticClass:"GooFlow_work_group",style:{width:"100%",height:"100%","z-index":e.drawingGroup?5:0}},e._l(e.prop.$areas,function(t,i){return e.prop.$areas?o("area-item",{key:i,attrs:{editable:e.prop.$editable,id:i,json:t,scale:e.scale,locked:!e.drawingGroup}}):e._e()}),1):e._e(),e._v(" "),e.extFlag.multi?o("ghost",{ref:"$multiGhost",attrs:{multi:e.extFlag.multi}}):e._e(),e._v(" "),e.extFlag.memo?o("div",{ref:"$paper",staticClass:"GooFlow_work_paper",style:{width:"100%",height:"100%","z-index":e.drawingPaper?5:1}},e._l(e.prop.$memos,function(t,i){return e.prop.$memos?o("memo-item",{key:i,attrs:{editable:e.prop.$editable,id:i,json:t,scale:e.scale,locked:!e.drawingPaper}}):e._e()}),1):e._e(),e._v(" "),o("svg",{ref:"$draw",staticStyle:{"z-index":"2",width:"100%",height:"100%"},attrs:{id:"draw_"+e.opts.id}},[o("defs",[o("marker",{attrs:{id:"arrow1",viewBox:"0 0 6 6",refX:"5",refY:"3",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"6",orient:"auto"}},[o("path",{attrs:{d:"M 0 0 L 6 3 L 0 6 z",fill:e.GooFlow.color.line,"stroke-width":"0"}})]),e._v(" "),o("marker",{attrs:{id:"arrow2",viewBox:"0 0 6 6",refX:"5",refY:"3",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"6",orient:"auto"}},[o("path",{attrs:{d:"M 0 0 L 6 3 L 0 6 z",fill:e.GooFlow.color.mark,"stroke-width":"0"}})]),e._v(" "),o("marker",{attrs:{id:"arrow3",viewBox:"0 0 6 6",refX:"5",refY:"3",markerUnits:"strokeWidth",markerWidth:"6",markerHeight:"6",orient:"auto"}},[o("path",{attrs:{d:"M 0 0 L 6 3 L 0 6 z",fill:e.GooFlow.color.mark,"stroke-width":"0"}})])]),e._v(" "),e._l(e.prop.$lines,function(t,i){return o("line-item",{key:i,attrs:{editable:e.prop.$editable,id:i,json:t,global:e.GooFlow,coor:e._getLineCoorInfo(t),focused:i==e.prop.$focus,scale:e.scale}})}),e._v(" "),o("tmp-line",{ref:"$tmpLine",attrs:{global:e.GooFlow}})],2),e._v(" "),e.prop.$editable?o("div",{ref:"$extendRight",staticClass:"Gooflow_extend_right",attrs:{title:e.GooFlow.remarks.extendRight}}):e._e(),e._v(" "),e.prop.$editable?o("div",{ref:"$extendBottom",staticClass:"Gooflow_extend_bottom",attrs:{title:e.GooFlow.remarks.extendBottom}}):e._e(),e._v(" "),e.prop.$editable?o("line-move",{ref:"$lineMove"}):e._e(),e._v(" "),e.prop.$editable?o("line-mp",{ref:"$mpFrom",attrs:{type:"from"}}):e._e(),e.prop.$editable?o("line-mp",{ref:"$mpTo",attrs:{type:"to"}}):e._e(),e._v(" "),e._l(e.prop.$nodes,function(t,i){return o("node-item",{key:i,attrs:{editable:e.prop.$editable,typeMap:e.prop.$nodeTypeMap,id:i,json:t,global:e.GooFlow,customInfo:e.prop.$nodeCustoms[t.type],focused:i==e.prop.$focus,scale:e.scale}})})],2),e._v(" "),e.extFlag.multi&&e.prop.$editable?o("multi-oper",{ref:"$multiOper"}):e._e(),e._v(" "),e.prop.$editable?o("line-oper",{ref:"$lineOper"}):e._e(),e._v(" "),e.extFlag.autoalign&&e.prop.$editable?o("div",{ref:"$alignH",staticClass:"h-align"}):e._e(),e._v(" "),e.extFlag.autoalign&&e.prop.$editable?o("div",{ref:"$alignV",staticClass:"v-align"}):e._e()],1)]),e._v(" "),e.opts.haveTool?o("keep-alive",[o("ghost",{ref:"$ghost"})],1):e._e(),e._v(" "),e.opts.haveTool?o("keep-alive",[o("textarea",{ref:"$textArea",staticStyle:{display:"none"}})]):e._e()],1)},components:{Ghost:p,HeadBar:a,Calc:s["a"],ToolBar:l,LineMove:h,LineMp:d,LineOper:f,MultiOper:u,TmpLine:m,NodeItem:$,LineItem:g,AreaItem:w,MemoItem:v},props:["property","global","plugIns","navSelector"],data:function(){var e={width:"100%",height:"100%",id:"GooFlow_"+(new Date).getTime(),nodePrefix:"node_",areaPrefix:"area_",initNum:1,haveHead:!1,headLabel:!1,initLabelText:"newFlow_1",headBtns:[],useOperStack:!1,haveTool:!1,dragAddOper:!1,toolTextWidth:0,haveDirect:!0,haveDirDashed:!1,haveSegment:!1,haveSegDashed:!1,toolBtns:[],nodeCustoms:{}};return Object.assign(e,this.property),{opts:e,GooFlow:{color:{main:"#20A0FF",font:"#15428B",node:"#C0CCDA",line:"#1D8CE0",lineFont:"#777",mark:"#ff8800",mix:"#B6F700",mixFont:"#777"},remarks:{headBtns:{},toolBtns:{},extendRight:"",extendBottom:""}},prop:{$id:e.id,$focus:"",$nowType:"cursor",$nodeTypeMap:{},$nodePrefix:e.nodePrefix,$areaPrefix:e.areaPrefix,$editable:e.haveTool,$deletedItem:{},$workExtendStep:200,$dragAddOper:e.dragAddOper,$nodeCustoms:{},$headBtnEvents:{},$undoStack:[],$redoStack:[],$nodes:{},$nodeCount:0,$lines:{},$lineCount:0,$memos:{},$memoCount:0,$areas:{},$areaCount:0,$extra:{},$title:e.initLabelText,$max:e.initNum},onBtnNewClick:null,onBtnOpenClick:null,onBtnSaveClick:null,onFreshClick:null,onPrintClick:null,onItemFocus:null,onItemBlur:null,onItemMark:null,onItemRightClick:null,onItemDbClick:null,extFlag:{},scale:1,t:{top:0,left:0}}},beforeUpdate:function(){c.draw()},computed:{whStyle:function(){var e={width:this.opts.width,height:this.opts.height,color:this.GooFlow.color.font};return isNaN(parseFloat(e.width))&&"number"!=typeof e.width?e.width="100%":e.width+="px",isNaN(parseFloat(e.height))&&"number"!=typeof e.height?e.height="100%":e.height+="px",e},drawingLine:function(){return"direct"===this.prop.$nowType||"dirDashed"===this.prop.$nowType||"segment"===this.prop.$nowType||"segDashed"===this.prop.$nowType},drawingGroup:function(){return"group"===this.prop.$nowType},drawingPaper:function(){return"memo"===this.prop.$nowType},inMulti:function(){return this.$refs.$multiGhost&&"block"===this.$refs.$multiGhost.$el.style.display&&("0px"!==this.$refs.$multiGhost.$el.style.width||"0px"!==this.$refs.$multiGhost.$el.style.height)},_getLineCoorInfo:function(){return function(e){var t=this.prop.$nodes[e.from],o=this.prop.$nodes[e.to];if(!t||!o)return{from:"0,0",to:"0,0",d:""};var i=null;if(null==(i=e.type&&"sl"!==e.type?s["a"].calcPolyPoints(t,o,e.type,e.M,this.scale):s["a"].calcStartEnd(t,o,this.scale)))return{from:"0,0",to:"0,0",d:""};var r="";if(e.type&&"sl"!==e.type){var n=4*this.scale;r="M "+i.start[0]+" "+i.start[1],i.m1[0]===i.start[0]&&i.m1[1]===i.start[1]||(r+=s["a"].drawRect(n,i.start,i.m1,i.m2)),i.m2[0]===i.end[0]&&i.m2[1]===i.end[1]||(r+=s["a"].drawRect(n,i.m1,i.m2,i.end)),r+=" L "+i.end[0]+" "+i.end[1]}else r="M "+i.start[0]+" "+i.start[1]+" L "+i.end[0]+" "+i.end[1];var a=0,l=0;return e.type&&"sl"!==e.type?(a=(i.m2[0]+i.m1[0])/2,l=(i.m2[1]+i.m1[1])/2):(a=(i.end[0]+i.start[0])/2,l=(i.end[1]+i.start[1])/2),{d:r,from:i.start[0]+","+i.start[1],to:i.end[0]+","+i.end[1],textX:a,textY:l}}}},created:function(){if(this.global&&Object.assign(this.GooFlow,this.global),this.setNodeCustoms(this.opts.nodeCustoms),this.opts.toolBtns&&this.opts.toolBtns.length>0)for(var e=0;e<this.opts.toolBtns.length;++e)this.prop.$nodeTypeMap[this.opts.toolBtns[e].split(" ")[0]]=this.opts.toolBtns[e];if(this.prop.$editable&&Object.assign(this,{onItemAdd:null,onItemDel:null,onItemMove:null,onItemRename:null,onItemResize:null,onLineMove:null,onLineSetType:null,onLinePointMove:null}),c.au=this.opts.auth,this.prop.$editable&&this.opts.useOperStack&&this._initOperStack(),"object"==Object(i["a"])(this.plugIns)){var t=!0,o=!1,s=void 0;try{for(var r,n=this.plugIns[Symbol.iterator]();!(t=(r=n.next()).done);t=!0){var a=r.value;a.flag&&a.methods&&(a.prop&&Object.assign(this.prop,a.prop),a.events&&Object.assign(this,a.events),this.extend(a.methods),this.extFlag[a.flag]=!0,a.initFuncName&&this[a.initFuncName]())}}catch(l){o=!0,s=l}finally{try{t||null==n.return||n.return()}finally{if(o)throw s}}}c.render(),this.t.top=this.opts.haveHead?28:3,this.t.left=this.opts.haveTool?34+this.opts.toolTextWidth:3,c.draw()},methods:{_renameTxtHide:function(){this.$refs.$textArea.value="",this.$refs.$textArea.dataset.id=void 0,this.$refs.$textArea.style.display="none"},_renameTxtShow:function(e){for(var t in e)this.$refs.$textArea.style[t]="number"==typeof e[t]?e[t]+"px":e[t];this.$refs.$textArea.style.display="block"},_renderHeadBtnClick:function(e){switch(e){case"ico_new":null!==this.onBtnNewClick&&this.onBtnNewClick();break;case"ico_open":null!==this.onBtnOpenClick&&this.onBtnOpenClick();break;case"ico_save":null!==this.onBtnSaveClick&&this.onBtnSaveClick();break;case"ico_undo":this.undo();break;case"ico_redo":this.redo();break;case"ico_reload":null!==this.onFreshClick&&this.onFreshClick();break;case"ico_print":null!==this.onPrintClick&&this.onPrintClick();break;default:var t=e.split("ico_")[1];void 0!==this.prop.$headBtnEvents&&"function"==typeof this.prop.$headBtnEvents[t]&&this.prop.$headBtnEvents[t]()}},_initOperStack:function(){this.isUndo=0,this.pushOper=function(e,t){1===this.isUndo?(this.prop.$redoStack.push([e,t]),this.isUndo=0,this.prop.$redoStack.length>50&&this.prop.$redoStack.shift()):(this.prop.$undoStack.push([e,t]),this.prop.$undoStack.length>50&&this.prop.$undoStack.shift(),0===this.isUndo&&this.prop.$redoStack.splice(0,this.prop.$redoStack.length),this.isUndo=0)},this.pushExternalOper=function(e,t){this.pushOper("externalFunc",[e,t])},this.undo=function(){if(0!==this.prop.$undoStack.length){this.blurItem();var e=this.prop.$undoStack.pop();this.isUndo=1,"externalFunc"===e[0]?e[1][0](e[1][1]):this[e[0]].apply(this,e[1])}},this.redo=function(){if(0!==this.prop.$redoStack.length){this.blurItem();var e=this.prop.$redoStack.pop();this.isUndo=2,"externalFunc"===e[0]?e[1][0](e[1][1]):this[e[0]].apply(this,e[1])}}},_node2Area:function(e){if(this.extFlag.group){var t=this.prop.$nodes[e],o=!1;for(var i in this.prop.$areas){var s=this.prop.$areas[i];if(t.left>=s.left&&t.left<s.left+s.width&&t.top>=s.top&&t.top<s.top+s.height){this.prop.$nodes[e].areaId=i,o=!0;break}}o||delete this.prop.$nodes[e].areaId}},_resetLines:function(e){for(var t in this.prop.$lines){var o=this.prop.$lines[t];o.from!==e&&o.to!==e||this.$set(this.prop.$lines,t,o)}},_suitSize:function(){var e=0,t=0;for(var o in this.prop.$nodes){var i=this.prop.$nodes[o];e<i.width+i.left&&(e=i.width+i.left),t<i.height+i.top&&(t=i.height+i.top)}if(null!=this.$refs.$group)for(var s in this.prop.$areas){var r=this.prop.$areas[s];e<r.width+r.left&&(e=r.width+r.left),t<r.height+r.top&&(t=r.height+r.top)}for(var n in this.prop.$lines){var a=this.prop.$lines[n];""!==a.M&&"lt"===a.type&&e<a.M&&(e=a.M+4),""!==a.M&&"tb"===a.type&&t<a.M&&(t=a.M+4)}if(null!=this.$refs.$paper)for(var l in this.prop.$memos){var p=this.prop.$memos[l];e<p.width+p.left&&(e=p.width+p.left),t<p.height+p.top&&(t=p.height+p.top)}return{width:e*this.scale,height:t*this.scale}},_buildWorkSize:function(){for(var e=this.$refs.$workArea.parentNode,t=e.offsetWidth,o=e.offsetHeight,i=this._suitSize();i.width>t;)t+=this.prop.$workExtendStep;for(;i.height>o;)o+=this.prop.$workExtendStep;return{width:t,height:o,haveData:i.width>0&&i.height>0}},_bindMoveEvent:function(e,t,o,i,r,n){var a=s["a"].mouseP(e),l=this.t;i||(i="move");var p=this.$refs.$workArea,h=0,d=0,c=e.id,f=a.x-l.left+p.parentNode.scrollLeft,u=a.y-l.top+p.parentNode.scrollTop,m=this.$refs.$ghost;"move"!==i?(m.show({width:t.width*this.scale+"px",height:t.height*this.scale+"px",top:t.top*this.scale+l.top-p.parentNode.scrollTop+"px",left:t.left*this.scale+l.left-p.parentNode.scrollLeft+"px",cursor:i}),h=t.left*this.scale+t.width*this.scale-f,d=t.top*this.scale+t.height*this.scale-u):(h=f-t.left*this.scale,d=u-t.top*this.scale);var $=!1,g=this;document.onmousemove=function(e){e||(e=window.event);var o=s["a"].mouseP(e);if("move"!==i)switch(f=o.x-l.left+p.parentNode.scrollLeft-t.left*g.scale+h,u=o.y-l.top+p.parentNode.scrollTop-t.top*g.scale+d,f<r*g.scale&&(f=r*g.scale),u<n*g.scale&&(u=n*g.scale),i){case"nw-resize":m.show({width:f+"px",height:u+"px"});break;case"w-resize":m.show({width:f+"px"});break;case"n-resize":m.show({height:u+"px"})}else{if(f===o.x-h&&u===o.y-d)return s["a"].stopEventPop(e),!1;f=o.x-h,u=o.y-d,"none"===m.$el.style.display&&m.css({width:t.width*g.scale+"px",height:t.height*g.scale+"px",top:t.top*g.scale+l.top-p.parentNode.scrollTop+"px",left:t.left*g.scale+l.left-p.parentNode.scrollLeft+"px",cursor:"move"}),$&&m.show(),f<l.left-p.parentNode.scrollLeft&&!t.canOver?f=l.left-p.parentNode.scrollLeft:f+p.parentNode.scrollLeft+t.width*g.scale>l.left+p.offsetWidth&&!t.canOver&&(f=l.left+p.offsetWidth-p.parentNode.scrollLeft-t.width*g.scale),u<l.top-p.parentNode.scrollTop&&!t.canOver?u=l.top-p.parentNode.scrollTop:u+p.parentNode.scrollTop+t.height*g.scale>l.top+p.offsetHeight&&!t.canOver&&(u=l.top+p.offsetHeight-p.parentNode.scrollTop-t.height*g.scale),$?m.show({left:f+"px",top:u+"px"}):m.css({left:f+"px",top:u+"px"}),g.extFlag.autoalign;var a=g._locAlignLine(c,m,g.prop.$nowType);g._magnetic(m,a),g.$nextTick(function(){f=parseInt(m.$el.style.left.split("px")[0],10),u=parseInt(m.$el.style.top.split("px")[0],10)})}$=!0},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null;var e=(f+p.parentNode.scrollLeft-l.left)/g.scale,t=(u+p.parentNode.scrollTop-l.top)/g.scale,s=m.offsetSize();m.hide();var r=s.width/g.scale,n=s.height/g.scale;g.extFlag.autoalign,g.$refs.$alignH.style.display="none",g.$refs.$alignV.style.display="none",o&&"function"==typeof o&&o($,g,i,e,t,r,n)}},_initDraw:function(){var e=this;Object(r["a"])(this.$refs.$draw,"click","g",{},function(t,o){e.prop.$focus===o.id||t.shiftKey?t.shiftKey&&e.prop.$multiLines&&("multi"!==e.prop.$nowType&&e.switchToolBtn("multi"),e.prop.$focus===o.id&&e.blurItem(),e.prop.$editable&&e.prop.$multiLines&&(e.prop.$multiLines[o.id]?e._removeFromMultiList(o.id,"line",!0):e._addtoMultiList(o.id,"line",!0))):e.focusItem(o.id,!0)}),this.prop.$editable&&(Object(r["a"])(this.$refs.$draw,"mousedown","g",{},function(t){if("multi"===e.prop.$nowType){var o=e.$refs.$multiGhost.position(),i=e.$refs.$multiGhost.offsetSize();i.left=o.left,i.top=o.top,e._bindMoveEvent(t,i,function(e,t,o,s,r){e&&t.batchMove(t.prop.$multiNodes,t.prop.$multiLines,s-i.left,r-i.top),t.$refs.$multiGhost.show({left:s+"px",top:r+"px"}),t._wallAllMulti()})}}),Object(r["a"])(this.$refs.$draw,"contextmenu","g",{},function(t,o){if("function"==typeof e.onItemRightClick&&!1===e.onItemRightClick(o.id,"line"))return s["a"].preventDefault(t),!1}),Object(r["a"])(this.$refs.$draw,"dblclick","g",{},function(t,o){if("function"!=typeof e.onItemDbClick||!1!==e.onItemDbClick(o.id,"line")){var i=o.querySelector("text").textContent,r=o.getAttribute("from").split(","),n=o.getAttribute("to").split(",");"lr"===e.prop.$lines[o.id].type?(r[0]=e.prop.$lines[o.id].M*e.scale,n[0]=r[0]):"tb"===e.prop.$lines[o.id].type&&(r[1]=e.prop.$lines[o.id].M*e.scale,n[1]=r[1]);var a=(parseInt(r[0],10)+parseInt(n[0],10))/2-64,l=(parseInt(r[1],10)+parseInt(n[1],10))/2-18,p=e.t;e.$refs.$textArea.value=i,e._renameTxtShow({width:130,height:26,left:p.left+a-e.$refs.$workArea.parentNode.scrollLeft,top:p.top+l-e.$refs.$workArea.parentNode.scrollTop}),e.$refs.$textArea.dataset.id=e.prop.$focus,e.$refs.$textArea.focus(),e.$refs.$workArea.parentNode.onmousedown=function(t){e.$refs.$workArea.parentNode.onmousedown=null,2!==t.button?(e.setName(e.$refs.$textArea.dataset.id,e.$refs.$textArea.value,"line"),e._renameTxtHide()):s["a"].stopEventPop(t)}}}))},_initWorkForNode:function(){var e=this;Object(r["a"])(this.$refs.$workArea,"click",".GooFlow_item",{},function(t,o){e.prop.$focus===o.id||t.shiftKey?n["a"].hasClass(t.target,"rs_close")&&e.prop.$editable?e.delNode(o.id):t.shiftKey&&(e.prop.$focus===o.id&&e.blurItem(),"multi"!==e.prop.$nowType&&e.switchToolBtn("multi"),e.prop.$editable&&e.prop.$multiNodes&&(e.prop.$multiNodes[o.id]?e._removeFromMultiList(o.id,"node",!0):e._addtoMultiList(o.id,"node",!0))):e.focusItem(o.id,!0),s["a"].stopEventPop(t)}),Object(r["a"])(this.$refs.$workArea,"contextmenu",".GooFlow_item",{},function(t,o){if("function"==typeof e.onItemRightClick&&!1===e.onItemRightClick(o.id,"node"))return s["a"].stopEventPop(t),!1});var t=function(e){e.$refs.$workArea.parentNode.onmousedown=function(t){if(e.$refs.$workArea.parentNode.onmousedown=null,2!==t.button){var o=e.$refs.$textArea;e.setName(o.dataset.id,o.value,"node"),e._renameTxtHide()}else s["a"].stopEventPop(t)}};if(Object(r["a"])(this.$refs.$workArea,"dblclick",".GooFlow_item",{},function(o,i){var s=i.id;if("function"==typeof e.onItemDbClick&&!1===e.onItemDbClick(s,"node"))return!1;if(e.prop.$editable){var r=o.target,a=e.t,l=e.$refs.$textArea,p="";if("DIV"===r.tagName.toUpperCase()&&n["a"].hasClass(r,"span"))p=r.innerHTML,l.value=p,e._renameTxtShow({height:i.offsetHeight+6,width:100,left:a.left+e.prop.$nodes[s].left*e.scale-e.$refs.$workArea.parentNode.scrollLeft-26,top:a.top+e.prop.$nodes[s].top*e.scale-e.$refs.$workArea.parentNode.scrollTop+26}),l.dataset.id=e.prop.$focus,l.focus(),t(e);else if("DIV"===r.tagName.toUpperCase()&&"TD"===r.parentNode.tagName.toUpperCase()&&n["a"].hasClass(r.parentNode.previousSibling,"ico")||"TD"===r.tagName.toUpperCase()&&n["a"].hasClass(r.previousSibling,"ico")){var h=i.querySelector(".ico + td");p=h.childNodes[0].innerHTML,l.value=p,e._renameTxtShow({width:h.offsetWidth+26,height:h.offsetHeight+6,left:a.left+26+e.prop.$nodes[s].left*e.scale-e.$refs.$workArea.parentNode.scrollLeft,top:a.top+2+e.prop.$nodes[s].top*e.scale-e.$refs.$workArea.parentNode.scrollTop}),l.dataset.id=e.prop.$focus,l.focus(),t(e)}}}),this.prop.$editable){var o=function(e,t){var o=e.$refs.$multiGhost.position(),i=e.$refs.$multiGhost.offsetSize();i.left=o.left,i.top=o.top,e._bindMoveEvent(t,i,function(e,t,o,s,r){e&&t.batchMove(t.prop.$multiNodes,t.prop.$multiLines,s-i.left,r-i.top),t.$nextTick(function(){t._wallAllMulti()})})};Object(r["a"])(this.$refs.$workArea,"mousedown",".GooFlow_item",{},function(t,i){if(2===t.button)return!1;var r=t.target;if(s["a"].isDrawingLine(e)){var a,l,p=s["a"].mouseP(t),h=s["a"].elCsys(e.$refs.$workArea);a=p.x-h.left+e.$refs.$workArea.parentNode.scrollLeft,l=p.y-h.top+e.$refs.$workArea.parentNode.scrollTop,e.lineStart={x:a,y:l,id:i.id},e.$refs.$tmpLine.setState({d:"M "+a+" "+l+" L "+a+" "+l,display:"block",dash:"dirDashed"===e.prop.$nowType||"segDashed"===e.prop.$nowType,noArrow:"segment"===e.prop.$nowType||"segDashed"===e.prop.$nowType}),s["a"].stopEventPop(t)}else if(n["a"].hasClass(r,"ico")||n["a"].hasClass(r.parentNode,"ico")){if(s["a"].isDrawingLine(e))return;if("multi"===e.prop.$nowType)return void o(e,t);var d=i.childNodes[0].cloneNode(!0);e.$refs.$ghost.append(d),t.id=i.id,e._bindMoveEvent(t,e.prop.$nodes[i.id],function(e,t,o,s,r){e&&t.moveNode(i.id,s,r),i.id!==t.prop.$focus&&t.focusItem(i.id,!0)})}else if("DIV"===r.tagName.toUpperCase()&&(n["a"].hasClass(r,"rs_bottom")||n["a"].hasClass(r,"rs_right")||n["a"].hasClass(r,"rs_rb"))){var c=n["a"].hasClass(r,"rs_bottom")?"n-resize":n["a"].hasClass(r,"rs_right")?"w-resize":"nw-resize";if("pointer"===c)return;var f=e.prop.$focus;e.switchToolBtn("cursor"),s["a"].stopEventPop(t),e.$refs.$ghost.$el.style.cursor=c;var u=e.prop.$nodes[f];e._bindMoveEvent(t,u,function(e,t,o,i,s,r,n){e&&t.resizeNode(f,r,n)},c,104,26)}else"multi"===e.prop.$nowType&&"none"!==e.$refs.$multiGhost.$el.style.display&&o(e,t)}),Object(r["a"])(this.$refs.$workArea,"mouseup",".GooFlow_item",{},function(t,o){if(s["a"].isDrawingLine(e)||e.$refs.$mpTo.getP()){var i=e.lineStart,r=e.lineEnd;if(i&&!e.$refs.$mpTo.getP()){var n={from:i.id,to:o.id,name:"",M:"",type:"sl"};"dirDashed"!==e.prop.$nowType&&"segDashed"!==e.prop.$nowType||(n.dash=!0),"segment"!==e.prop.$nowType&&"segDashed"!==e.prop.$nowType||(n.noArrow=!0),e.addLine((new Date).getTime(),n),e.prop.$max++}else i?e.moveLinePoints(e.prop.$focus,i.id,o.id):r&&e.moveLinePoints(e.prop.$focus,o.id,r.id)}})}},_initEditFunc:function(){var e=this;this.$refs.$workArea.addEventListener("mousemove",function(t){if((s["a"].isDrawingLine(e)||e.$refs.$mpTo.getP())&&(e.lineStart||e.lineEnd)){var o=s["a"].mouseP(t),i=s["a"].elCsys(this),r=o.x-i.left+this.parentNode.scrollLeft,n=o.y-i.top+this.parentNode.scrollTop,a=e.$refs.$tmpLine.getState();e.lineStart?a.d="M "+e.lineStart.x+" "+e.lineStart.y+" L "+r+" "+n:e.lineEnd&&(a.d="M "+r+" "+n+" L "+e.lineEnd.x+" "+e.lineEnd.y),a.noArrow="segment"===e.prop.$nowType||"segDashed"===e.prop.$nowType,a.dash="dirDashed"===e.prop.$nowType||"segDashed"===e.prop.$nowType,e.$refs.$tmpLine.setState(a)}}),this.$refs.$workArea.addEventListener("mouseup",function(t){if(s["a"].isDrawingLine(e)||e.$refs.$mpTo.getP()){var o=e.$refs.$tmpLine.getState();"none"!==o.display?(delete e.lineStart,delete e.lineEnd,o.display="none",e.$refs.$tmpLine.setState(o),e.$refs.$mpTo.hide(),e.$refs.$mpFrom.hide(),e.focusItem(e.prop.$focus,!1)):e.$refs.$lineOper.setTid(0)}}),this.$refs.$workArea.addEventListener("keydown",function(t){if("none"===e.$refs.$ghost.$el.style.display&&"none"===e.$refs.$textArea.style.display)switch(t.keyCode){case 46:if(""!==e.prop.$focus)e.delNode(e.prop.$focus,!0),e.delLine(e.prop.$focus);else if("multi"===e.prop.$nowType){var o=[],i=[];for(var s in e.prop.$multiNodes)o.push(s);for(var r in e.prop.$multiLines)i.push(r);e.batchDelete(o,i),e._wallAllMulti()}break;case 67:if(t.ctrlKey){if(!e.prop.$nodes[e.prop.$focus])return;e.copyNode(e.prop.$focus)}break;case 86:if(t.ctrlKey){if(!e.prop.$clipNode||null==e.prop.$clipNode)return;e.parseNode()}}})},_initExpendFunc:function(){var e=this,t=this.prop.$workExtendStep,o=this.$refs.$workArea,i=this.$refs.$workArea.parentNode;this.$refs.$extendRight.addEventListener("click",function(r){o.style.width=o.offsetWidth+t+"px",e.$refs.$alignV&&(e.$refs.$alignV.style.width=o.style.width),i.scrollLeft=i.scrollWidth,i.style.overflow="scroll",s["a"].stopEventPop(r)}),this.$refs.$extendBottom.addEventListener("click",function(r){o.style.height=o.offsetHeight+t+"px",e.$refs.$alignH&&(e.$refs.$alignH.style.height=o.style.height),i.scrollTop=i.scrollHeight,i.style.overflow="scroll",s["a"].stopEventPop(r)})},_renderClick:function(e){e||(e=window.event);var t=this.prop.$nowType;if("cursor"!==t&&"multi"!==t){if("direct"!==t&&"segment"!==t&&"dirDashed"!==t&&"segDashed"!==t&&"multi"!==t&&"group"!==t&&"memo"!==t&&this.prop.$editable&&!this.prop.$dragAddOper){var o=s["a"].getCoor(e,this.$refs.$workArea);this.addNode((new Date).getTime(),{name:this.prop.$nodePrefix+this.prop.$max,left:o.X/this.scale,top:o.Y/this.scale,type:this.prop.$nowType}),this.prop.$max++}}else{var i=e.target,r=i.tagName.toUpperCase();("SVG"===r||"DIV"===r&&i.className.indexOf("GooFlow_work")>-1||"LABEL"===r)&&(this.$refs.$lineOper&&this.$refs.$lineOper.getTid()?this.focusItem(this.$refs.$lineOper.getTid(),!1):this.inMulti&&this.prop.$editable||this.blurItem())}},_renderRightClick:function(e){"SVG"===e.target.tagName.toUpperCase()&&(this.blurItem(),s["a"].preventDefault(e))},_bindScrollScaleEvent:function(){var e=this,t=function(t){var o=0;if((t=t||window.event).wheelDelta&&t.ctrlKey)o=-1*t.wheelDelta;else{if(!t.detail||!t.ctrlKey)return;o=t.detail}window.event?window.event.returnValue=!1:t.preventDefault();var i=o>0?-.1:o<0?.1:0;e.resetScale(e.scale+i)};document.addEventListener&&this.$el.addEventListener("DOMMouseScroll",t,!1),this.$el.onmousewheel=t},bindHeadBtnEvent:function(e){this.opts.haveHead&&Object.assign(this.prop.$headBtnEvents,e)},bindOperEvent:function(e){if("object"==Object(i["a"])(e))for(var t in e)"function"==typeof e[t]&&(this[t]=e[t])},switchToolBtn:function(e){this.prop.$nowType!==e&&(this.prop.$dragAddOper&&"cursor"!==e&&"multi"!==e&&!s["a"].isDrawingLine(e)&&"group"!==e&&"memo"!==e||(this.prop.$nowType=e,this.$set(this.prop,"$nowType",e),"cursor"!==e&&this.blurItem()))},setDragAddOper:function(e){this.prop.$dragAddOper=e||!1},setNodeCustoms:function(e){Object.assign(this.prop.$nodeCustoms,e)},setTitle:function(e){this.$set(this.prop,"$title",e)},addNode:function(e,t,o,i,s,r){!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"node",t)||("function"==typeof this.pushOper&&this.prop.$editable&&!i&&this.pushOper("delNode",[e]),r?this.prop.$nodes[e]=t:this.$set(this.prop.$nodes,e,t),++this.prop.$nodeCount,this.prop.$editable&&(this.prop.$nodes[e].alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}))},moveNode:function(e,t,o,i,s,r){if(this.prop.$nodes[e]&&(!1===i||"function"!=typeof this.onItemMove||!1!==this.onItemMove(e,"node",t,o))){if("function"==typeof this.pushOper&&this.prop.$editable&&!s){var n=[e,this.prop.$nodes[e].left,this.prop.$nodes[e].top];this.pushOper("moveNode",n)}t<0&&(t=0),o<0&&(o=0),this.prop.$nodes[e].left=t,this.prop.$nodes[e].top=o,this._resetLines(e);var a=document.getElementById(e);a.style.left=t*this.scale+"px",a.style.top=o*this.scale+"px",this.prop.$editable&&(this.prop.$nodes[e].alt=!0,this._node2Area(e)),!r&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},resizeNode:function(e,t,o){if(this.prop.$nodes[e]&&("function"!=typeof this.onItemResize||!1!==this.onItemResize(e,"node",t,o))){var i=this.prop.$nodes[e].type,s=this.prop.$nodeTypeMap[i]||i;if(!(s.indexOf(" round")>0||s.indexOf(" rhomb")>0||this.prop.$nodeCustoms[i])){if("function"==typeof this.pushOper){var r=[e,this.prop.$nodes[e].width,this.prop.$nodes[e].height];this.pushOper("resizeNode",r)}var n=this.prop.$nodes[e],a=document.getElementById(e);a.childNodes[0].style.width=t*this.scale-2+"px",a.childNodes[0].style.height=o*this.scale-2+"px",n.width=a.offsetWidth/this.scale,n.height=a.offsetHeight/this.scale,a.childNodes[0].style.height=n.height*this.scale-2+"px",this.$editable&&(n.alt=!0),this.$set(this.prop.$nodes[e],n),this._resetLines(e),this._node2Area(e),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}},copyNode:function(e){this.prop.$clipNode=this.getItemInfo(e,"node")},parseNode:function(){this.prop.$clipNode&&null!=this.prop.$clipNode&&(this.prop.$clipNode.top+=30,this.prop.$clipNode.left+=30,this.addNode((new Date).getTime(),JSON.parse(JSON.stringify(this.prop.$clipNode))))},delNode:function(e,t,o,i){if(this.prop.$nodes[e]&&(!1===t||"function"!=typeof this.onItemDel||!1!==this.onItemDel(e,"node"))){for(var s in this.prop.$lines)this.prop.$lines[s].from!==e&&this.prop.$lines[s].to!==e||this.delLine(s,!1);if("function"==typeof this.pushOper&&!o){var r=[e,this.prop.$nodes[e]];this.pushOper("addNode",r)}this.$delete(this.prop.$nodes,e),--this.prop.$nodeCount,this.prop.$focus===e&&(this.prop.$focus=""),this.prop.$editable&&(this.prop.$deletedItem[e]="node"),!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},addLine:function(e,t,o,i,s,r){if(t.from!==t.to){var n=this.prop.$nodes[t.from],a=this.prop.$nodes[t.to];n&&a&&(!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"line",t)||("function"==typeof this.pushOper&&this.prop.$editable&&!i&&this.pushOper("delLine",[e]),t.M||(t.M=""),(!t.type||"lr"!==t.type&&"tb"!==t.type)&&(t.type="sl"),t.marked||(t.marked=!1),r?this.prop.$lines[e]=t:this.$set(this.prop.$lines,e,t),++this.prop.$lineCount,this.prop.$editable&&(this.prop.$lines[e].alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})))}},setLineM:function(e,t,o,i,s){if(!this.prop.$lines[e]||t<0||this.prop.$lines[e].M===t||!this.prop.$lines[e].type||"sl"===this.prop.$lines[e].type)return!1;if(!1!==i&&"function"==typeof this.onLineMove&&!1===this.onLineMove(e,t))return!1;var r=this.prop.$lines[e];if("function"==typeof this.pushOper&&!o){var n=[e,r.M];this.pushOper("setLineM",n)}r.M=t,this.prop.$editable&&(r.alt=!0),this.$set(this.prop.$lines[e],r),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},setLineType:function(e,t,o){if(!t||null==t||""===t||t===this.prop.$lines[e].type)return!1;if("function"!=typeof this.onLineSetType||!1!==this.onLineSetType(e,t)){var i=this.prop.$lines[e];if("function"==typeof this.pushOper){var r=[e,i.type||"sl",i.M];this.pushOper("setLineType",r)}if(i.type=t,this.prop.$editable&&(i.alt=!0),"sl"!==t?o?this.setLineM(e,o,!0,!1):this.setLineM(e,s["a"].getMValue(this.prop.$nodes[i.from],this.prop.$nodes[i.to],t),!0,!1):(i.M="",this.$set(this.prop.$lines[e],i)),this.prop.$focus===e){var n=this;this.$nextTick(function(){n.focusItem(e)})}this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},moveLinePoints:function(e,t,o,i){if(t!==o&&e&&this.prop.$lines[e]){for(var s in null!=t&&""!==t||(t=this.prop.$lines[e].from),null!=o&&""!==o||(o=this.prop.$lines[e].to),this.prop.$lines)if(t===this.prop.$lines[s].from&&o===this.prop.$lines[s].to)return;if("function"!=typeof this.onLinePointMove||!1!==this.onLinePointMove(e,t,o)){if("function"==typeof this.pushOper&&!i){var r=[e,this.prop.$lines[e].from,this.prop.$lines[e].to];this.pushOper("moveLinePoints",r)}var n=this.prop.$lines[e];null!=t&&""!==t&&(n.from=t),null!=o&&""!==o&&(n.to=o),this.prop.$editable&&(n.alt=!0),this.$set(this.prop.$lines[e],n),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}},delLine:function(e,t,o,i){if(this.prop.$lines[e]&&(!1===t||"function"!=typeof this.onItemDel||!1!==this.onItemDel(e,"line"))){if("function"==typeof this.pushOper&&!o){var s=[e,this.prop.$lines[e]];this.pushOper("addLine",s)}this.$delete(this.prop.$lines,e),--this.prop.$lineCount,this.prop.$editable&&(this.prop.$deletedItem[e]="line",this.prop.$focus===e&&(this.$refs.$mpFrom.hide(),this.$refs.$mpTo.hide(),this.$refs.$lineMove.hide(),this.$refs.$lineOper&&this.$refs.$lineOper.hide())),this.prop.$focus===e&&(this.prop.$focus=""),!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},blurItem:function(e){if(""!==this.prop.$focus){var t=this.prop.$focus;if("DIV"===document.getElementById(t).tagName.toUpperCase()){if(delete this.prop.$clipNode,!e&&"function"==typeof this.onItemBlur&&!1===this.onItemBlur(this.prop.$focus,"node"))return!1}else{if(!e&&"function"==typeof this.onItemBlur&&!1===this.onItemBlur(this.prop.$focus,"line"))return!1;this.prop.$editable&&(this.$refs.$lineMove.hide(),this.$refs.$lineOper.hide(),this.$refs.$mpFrom.hide(),this.$refs.$mpTo.hide())}}else this.prop.$editable&&this.prop.$multiNodes&&this._clearMultiList();return this.prop.$focus="",!0},focusItem:function(e,t){if(e&&null!=e&&""!==e){var o=document.getElementById(e);if(null!=o&&this.blurItem(!t)){if("DIV"===o.tagName.toUpperCase()){if(t&&"function"==typeof this.onItemFocus&&!1===this.onItemFocus(e,"node"))return;this.prop.$focus=e}else{if(t&&"function"==typeof this.onItemFocus&&!1===this.onItemFocus(e,"line"))return;if(this.prop.$focus=e,!this.prop.$editable)return;var i=this.prop.$lines[e],s=o.getAttribute("from").split(","),r=o.getAttribute("to").split(",");s[0]=parseInt(s[0],10),s[1]=parseInt(s[1],10),r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10);var n=[s[0],s[1],r[0],r[1]],a=this.$refs.$lineMove;"lr"===i.type?(s[0]=i.M*this.scale,r[0]=s[0],a.show({width:"5px",height:(r[1]-s[1])*(r[1]>s[1]?1:-1)+"px",left:s[0]-3+"px",top:(r[1]>s[1]?s[1]:r[1])+1+"px",cursor:"e-resize"}),a.setData({type:"lr",tid:e})):"tb"===i.type?(s[1]=i.M*this.scale,r[1]=s[1],a.show({width:(r[0]-s[0])*(r[0]>s[0]?1:-1)+"px",height:"5px",left:(r[0]>s[0]?s[0]:r[0])+1+"px",top:s[1]-3+"px",cursor:"s-resize"}),a.setData({type:"tb",tid:e})):(a.hide(),a.setData({}));var l=(s[0]+r[0])/2-40,p=(s[1]+r[1])/2+4;(a=this.$refs.$lineOper).show({display:"block",left:l+"px",top:p+"px"}),a.setTid(e),(a=this.$refs.$mpFrom).show({left:n[0]-4+"px",top:n[1]-4+"px"}),a.setP(n[0]+","+n[1]),(a=this.$refs.$mpTo).show({left:n[2]-4+"px",top:n[3]-4+"px"}),a.setP(n[2]+","+n[3])}this.switchToolBtn("cursor")}}},setItemExtra:function(e,t,o){if(null!=e&&""!==e&&null!=t&&""!==t){var i="node"===t?this.prop.$nodes[e]:"line"===t?this.prop.$lines[e]:"area"===t?this.prop.$areas[e]:this.prop.$memos[e];for(var s in o)i[s]=o[s]}},delItemExtra:function(e,t,o){if(null!=e&&""!==e&&null!=t&&""!==t)for(var i="node"===t?this.prop.$nodes[e]:"line"===t?this.prop.$lines[e]:"area"===t?this.prop.$areas[e]:this.prop.$memos[e],s=0;s<o.length;++s)delete i[o[s]]},getItemInfo:function(e,t){switch(t){case"node":return JSON.parse(JSON.stringify(this.prop.$nodes[e]||null));case"line":return JSON.parse(JSON.stringify(this.prop.$lines[e]||null));case"area":return JSON.parse(JSON.stringify(this.prop.$areas[e]||null));case"memo":return JSON.parse(JSON.stringify(this.prop.$memos[e]||null));default:return JSON.parse(JSON.stringify(this.prop.$nodes[e]||this.prop.$lines[e]||this.prop.$areas[e]||this.prop.$memos[e]||null))}},markItem:function(e,t,o,i,s,r){if("node"===t){if(!this.prop.$nodes[e])return;if(!1!==i&&"function"==typeof this.onItemMark&&!1===this.onItemMark(e,"node",o))return;this.$set(this.prop.$nodes[e],"marked",o||!1)}else{if("line"!==t)return;if(!this.prop.$lines[e])return;if(!1!==i&&"function"==typeof this.onItemMark&&!1===this.onItemMark(e,"line",o))return;this.$set(this.prop.$lines[e],"marked",o||!1)}if("function"==typeof this.pushOper&&!s){var n=[e,t,!o];this.pushOper("markItem",n)}!r&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},setItemColor:function(e,t,o,i,s){if(null!=e&&""!==e&&null!=t&&""!==t){var r="";if("node"===t)r=document.getElementById(e).style.backgroundColor,this.$set(this.prop.$nodes[e],"color",o);else{if("line"!==t)return;r=this.prop.$lines[e].color,this.$set(this.prop.$lines[e],"color",o)}"function"!=typeof this.pushOper||i||this.pushOper("setItemColor",[e,t,r]),!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setItemFontColor:function(e,t,o,i){if(null!=e&&""!==e&&null!=t&&""!==t){var s="";if("node"===t){var r=this.prop.$nodes[e],n=this.prop.$nodeTypeMap[r.type]||r.type;s=r.fontColor||(n.indexOf(" mix")>-1?this.GooFlow.color.mixFont:this.GooFlow.color.font),this.$set(this.prop.$nodes[e],"fontColor",o)}else{if("line"!==t)return;s=this.prop.$lines[e].fontColor||this.GooFlow.color.lineFont,this.$set(this.prop.$lines[e],"fontColor",o)}"function"!=typeof this.pushOper||i||this.pushOper("setItemFontColor",[e,t,s])}},setName:function(e,t,o,i){var s="";if("node"===o){if(!this.prop.$nodes[e])return;if(this.prop.$nodes[e].name===t)return;if("function"==typeof this.onItemRename&&!1===this.onItemRename(e,t,"node"))return;var r=this.prop.$nodes[e];s=r.name;var n=!1,a=document.getElementById(e),l=this.prop.$nodeTypeMap[r.type]||r.type;if(l.indexOf(" round")<0&&l.indexOf(" rhomb")<0&&!this.prop.$nodeCustoms[r.type]){a.querySelector("td div").innerText=t;var p=a.offsetWidth/this.scale,h=a.offsetHeight/this.scale;r.width===p&&r.height===h||(this.resizeNode(e,p,h),n=!0)}else a.querySelector(".span").innerText=t;r.name=t,this.prop.$editable&&(r.alt=!0),n&&this._resetLines(e),!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}else if("line"===o){if(!this.prop.$lines[e])return;if(this.prop.$lines[e].name===t)return;if("function"==typeof this.onItemRename&&!1===this.onItemRename(e,t,"line"))return;var d=this.prop.$lines[e];s=d.name,d.name=t,this.prop.$editable&&(d.alt=!0),this.$set(this.prop.$lines,e,d)}else{if("area"!==o)return;if(!this.prop.$areas[e])return;if(this.prop.$areas[e].name===t)return;if("function"==typeof this.onItemRename&&!1===this.onItemRename(e,t,"area"))return;var c=this.prop.$areas[e];s=c.name,c.name=t,this.$editable&&(c.alt=!0),document.getElementById(e).querySelector("label").innerHTML=t}"function"==typeof this.pushOper&&this.pushOper("setName",[e,s,o])},setExtra:function(e){if("object"==Object(i["a"])(e))for(var t in e)this.prop.$extra[t]=e[t]},getExtra:function(){return this.prop.$extra},loadData:function(e){for(var t in this.clearData(!0),e.title&&null!=e.title&&""!==e.title.trim()||(e.title=this.prop.$title),this.prop.$deletedItem={},this.prop.$extra=e.extra&&null!=e.extra?e.extra:{},this.prop.$max=void 0===e.initNum?1:e.initNum,e.nodes)this.addNode(t,e.nodes[t],!1,!0,!0,!0);for(var o in e.lines)this.addLine(o,e.lines[o],!1,!0,!0,!0);if(this.extFlag.group&&e.areas)for(var i in e.areas)this.addArea(i,e.areas[i],!1,!0,!0,!0);if(this.extFlag.memo&&e.memos)for(var s in e.memos)this.addMemo(s,e.memos[s],!1,!0,!0,!0);var r=this._buildWorkSize();this.$refs.$workArea.style.width=r.width+"px",this.$refs.$workArea.style.height=r.height+"px",this.$refs.$alignV&&(this.$refs.$alignV.style.width=r.width+"px"),this.$refs.$alignH&&(this.$refs.$alignH.style.height=r.height+"px"),this.prop.$title="",this.setTitle(e.title),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},exportData:function(){var e={title:this.prop.$title,nodes:{},lines:{}};for(var t in e.initNum=this.prop.$max,this.prop.$nodes)e.nodes[t]=JSON.parse(JSON.stringify(this.prop.$nodes[t])),e.nodes[t].marked||delete e.nodes[t].marked;for(var o in this.prop.$lines)e.lines[o]=JSON.parse(JSON.stringify(this.prop.$lines[o])),e.lines[o].marked||delete e.lines[o].marked,""===e.lines[o].M&&delete e.lines[o].M;if(this.extFlag.group)for(var i in e.areas={},this.prop.$areas)e.areas[i]=JSON.parse(JSON.stringify(this.prop.$areas[i]));if(this.extFlag.memo)for(var s in e.memos={},this.prop.$memos)e.memos[s]=JSON.parse(JSON.stringify(this.prop.$memos[s]));for(var r in e.extra={},this.prop.$extra)e.extra[r]=JSON.parse(JSON.stringify(this.prop.$extra[r]));return e},exportAlter:function(){var e={nodes:{},lines:{}};for(var t in this.prop.$nodes)this.prop.$nodes[t].alt&&(e.nodes[t]=this.prop.$nodes[t]);for(var o in this.prop.$lines)this.prop.$lines[o].alt&&(e.lines[o]=this.prop.$lines[o]);if(this.extFlag.group)for(var i in e.areas={},this.prop.$areas)this.prop.$areas[i].alt&&(e.areas[i]=this.prop.$areas[i]);if(this.extFlag.memo)for(var s in e.memos={},this.prop.$memos)this.prop.$memos[s].alt&&(e.memos[s]=this.prop.$memos[s]);return e.deletedItem=this.prop.$deletedItem,e},transNewId:function(e,t,o){var i=null,s=null;switch(o){case"node":s=this.prop.$nodes;break;case"line":s=this.prop.$lines;break;case"area":s=this.prop.$areas;break;case"memo":s=this.prop.$memos}if(null!=s&&s[e]&&(i=JSON.parse(JSON.stringify(this.prop.$areas[e])),delete s[e],this.$set(this.prop["$"+o+"s"],t,i),"area"===o))for(var r in this.prop.$nodes)(i=this.prop.$nodes[r]).areaId===e&&(this.prop.$nodes[r].areaId=t);if(e!==this.prop.$focus||"node"!==o&&"line"!==o||this.$set(this.prop.$focus,t),"function"==typeof this.pushOper&&null!=s){var n=[t,e,o];this.pushOper("transNewId",n)}},clearData:function(e){if(this.extFlag.group){for(var t in this.prop.$areas)delete this.prop.$areas[t];this.prop.$areaCount=0}if(this.extFlag.memo){for(var o in this.prop.$memos)delete this.prop.$memos[o];this.prop.$memoCount=0}for(var i in this.prop.$extra)delete this.prop.$extra[i];for(var s in this.prop.$max=1,this.prop.$deletedItem)delete this.prop.$deletedItem[s];for(var r in this.prop.$focus="",this.prop.$lines)delete this.prop.$lines[r];for(var n in this.prop.$lineCount=0,this.prop.$nodes)delete this.prop.$nodes[n];this.prop.$nodeCount=0,e||this.$set(this.prop,"$nodes",{}),"function"==typeof this.pushOper&&(this.prop.$undoStack.splice(0,this.prop.$undoStack.length),this.prop.$redoStack.splice(0,this.prop.$redoStack.length)),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},reinitSize:function(e,t){var o=e||this.$el.clientWidth,i=t||this.$el.clientHeight;this.$el.style.width=o+"px",this.$el.style.height=i+"px",this.opts.width=o,this.opts.height=i;var s=0,r=8;this.opts.haveHead&&(s=26,r=7),this.opts.haveTool&&(this.$refs.$tool.$el.style.height=i-s-r+"px",o-=31),o-=9,i=i-s-(this.opts.haveHead?5:8),this.$refs.$workArea.offsetWidth>o&&(o=this.$refs.$workArea.offsetWidth),this.$refs.$workArea.offsetHeight>i&&(i=this.$refs.$workArea.offsetHeight),this.$refs.$workArea.style.width=o+"px",this.$refs.$workArea.style.height=i+"px",this.$refs.$alignV&&(this.$refs.$alignV.style.width=o+"px"),this.$refs.$alignH&&(this.$refs.$alignH.style.height=i+"px"),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})},resetScale:function(e){if(e?e<.5?e=.5:e>4&&(e=4):e=1,this.scale!==e){this.scale=e;var t=0,o=0;this.blurItem();var i=this._suitSize();t=i.width+this.prop.$workExtendStep,o=i.height+this.prop.$workExtendStep,t<this.$refs.$workArea.parentNode.clientWidth&&(t=this.$refs.$workArea.parentNode.clientWidth),o<this.$refs.$workArea.parentNode.clientHeight&&(o=this.$refs.$workArea.parentNode.clientHeight),this.$refs.$workArea.style.width=t+"px",this.$refs.$workArea.style.height=o+"px",this.$refs.$alignV&&(this.$refs.$alignV.style.width=t+"px"),this.$refs.$alignH&&(this.$refs.$alignH.style.height=o+"px"),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}),void 0===this._tmpScaleValue&&(this._tmpScaleValue=document.createElement("div"),this._tmpScaleValue.id=this.prop.$id+"_scaleValue",this._tmpScaleValue.style.cssText="width:360px;height:120px;line-height:100%;position:absolute;display:block;margin:-60px 0 0 -"+(180-(this.opts.haveTool?0:this.$refs.$tool.$el.offsetWidth))+"px;top:50%;left:50%;text-align:center;font-weight:bold;color:rgba(0,0,0,.1);font-size:120px !important;",this.$el.appendChild(this._tmpScaleValue)),this._tmpScaleValue.innerText=Math.round(1e4*this.scale)/100+"%",this._tmpTimeout&&(clearTimeout(this._tmpTimeout),delete this._tmpTimeout),this._tmpScaleValue.style.display="block";var s=this;this._tmpTimeout=setTimeout(function(){s._tmpScaleValue.style.display="none"},600)}},extend:function(e){for(var t in e)this[t]=e[t]}},mounted:function(){var e=this.$el.querySelector(".GooFlow_work");e.style.left=this.opts.haveTool?(this.opts.toolTextWidth||0)+34+"px":"3px",e.style.top=this.opts.haveHead?"28px":"3px";var t=this.$refs.$workArea;t.style.width=t.parentNode.offsetWidth+"px",t.style.height=t.parentNode.offsetHeight+"px";var o=document.createElement("style"),i=".GooFlow_work_inner.crosshair .GooFlow_item:hover{border-color:"+this.global.color.mark+" !important}";o.type="text/css",c.draw(),o.styleSheet?o.styleSheet.cssText=i:o.innerHTML=i,t.parentNode.insertBefore(o,t),this._initDraw(),this._initWorkForNode(),this.prop.$editable&&(this._initEditFunc(),this._initExpendFunc(),this.extFlag.dragadd&&this._initDragAddOper());var s=this;t.addEventListener("click",function(e){s._renderClick(e)}),this.extFlag.group&&this._initGroup(),this.extFlag.memo&&this._initMemo(),this.extFlag.multi&&this._initMultiSelect(),this.extFlag.navmap&&this._initNavMap(this.navSelector),this._bindScrollScaleEvent()}}},"24f9":function(e,t,o){"use strict";o("57e7"),o("3b2b"),o("a481");
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/t["a"]={hasClass:function(e,t){return 0!==(t=t||"").replace(/\s/g,"").length&&new RegExp(" "+t+" ").test(" "+e.className+" ")},addClass:function(e,t){this.hasClass(e,t)||(e.className=""===e.className?t:e.className+" "+t)},removeClass:function(e,t){if(this.hasClass(e,t)){for(var o=" "+e.className.replace(/[\t\r\n]/g,"")+" ";o.indexOf(" "+t+" ")>=0;)o=o.replace(" "+t+" "," ");e.className=o.replace(/^\s+|\s+$/g,"")}},css:function(e,t){for(var o in t)e.style[o]=t[o]}}},"28a5":function(e,t,o){o("214f")("split",2,function(e,t,i){"use strict";var s=o("aae3"),r=i,n=[].push,a="split",l="length",p="lastIndex";if("c"=="abbc"[a](/(b)*/)[1]||4!="test"[a](/(?:)/,-1)[l]||2!="ab"[a](/(?:ab)*/)[l]||4!="."[a](/(.?)(.?)/)[l]||"."[a](/()()/)[l]>1||""[a](/.?/)[l]){var h=void 0===/()??/.exec("")[1];i=function(e,t){var o=String(this);if(void 0===e&&0===t)return[];if(!s(e))return r.call(o,e,t);var i,a,d,c,f,u=[],m=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),$=0,g=void 0===t?4294967295:t>>>0,w=new RegExp(e.source,m+"g");h||(i=new RegExp("^"+w.source+"$(?!\\s)",m));while(a=w.exec(o)){if(d=a.index+a[0][l],d>$&&(u.push(o.slice($,a.index)),!h&&a[l]>1&&a[0].replace(i,function(){for(f=1;f<arguments[l]-2;f++)void 0===arguments[f]&&(a[f]=void 0)}),a[l]>1&&a.index<o[l]&&n.apply(u,a.slice(1)),c=a[0][l],$=d,u[l]>=g))break;w[p]===a.index&&w[p]++}return $===o[l]?!c&&w.test("")||u.push(""):u.push(o.slice($)),u[l]>g?u.slice(0,g):u}}else"0"[a](void 0,0)[l]&&(i=function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)});return[function(o,s){var r=e(this),n=void 0==o?void 0:o[t];return void 0!==n?n.call(o,r,s):i.call(String(r),o,s)},i]})},"2d1f":function(e,t,o){var i=o("b041");t=e.exports=o("2350")(!1),t.push([e.i,'\nv\\:group,v\\:imagedata,v\\:line,v\\:oval,v\\:polyline,v\\:rect,v\\:stroke,v\\:textbox{display:inline-block;background:transparent\n}\n::-ms-clear,::-ms-reveal{display:none\n}\n.GooFlow{background:#f1f1f1;border:1px solid #ddd;position:relative;overflow:hidden;-moz-user-select:none;-webkit-user-select:none;border-radius:4px;color:#333\n}\n.GooFlow,.GooFlow *{font-size:14px;line-height:1.42857143;font-family:Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,微软雅黑,Arial,sans-serif\n}\n.GooFlow,.GooFlow *,.GooFlow:after,.GooFlow :after,.GooFlow:before,.GooFlow :before{box-sizing:border-box\n}\n.GooFlow i{display:block;width:18px;height:18px;overflow:hidden;font-size:18px;color:#777;text-align:center;margin:0 auto;filter:Alpha(Opacity=70);-moz-opacity:.7;opacity:.7;text-shadow:.5px 0 #fff,0 .5px #fff;line-height:1\n}\n.GooFlow li.a_disabled,.GooFlow li.a_disabled:hover{border:0!important;padding:4px 6px;background:transparent!important;cursor:not-allowed!important\n}\n.GooFlow li.a_disabled i:before{color:#ccc!important\n}\n.GooFlow_work{position:absolute;top:3px;right:3px;bottom:3px;left:3px;overflow:auto;background-color:#fff;z-index:0\n}\n.GooFlow_work .GooFlow_work_inner{position:relative;overflow:hidden;background-image:url(data:image/gif;base64,R0lGODlhDAAMAJEAAOrq6v////Hx8QAAACH5BAAHAP8ALAAAAAAMAAwAAAIWjI8hycvonomSPtvkwYlDPQniSApAAQA7);outline:none\n}\n.GooFlow_work text{color:#fff;font-size:14px;line-height:1.42857143;font-family:Microsoft Yahei,Helvetica Neue,Helvetica,Hiragino Sans GB,WenQuanYi Micro Hei,Arial,sans-serif\n}\n.GooFlow_head{clear:both;height:28px;border-bottom:2px solid #00b4e1;margin-left:-1px\n}\n.GooFlow_head label{font-weight:700;display:block;white-space:nowrap;text-overflow:ellipsis;height:27px;padding:3px;width:176px;background:#00b4e1;float:left;color:#fff;border-radius:3px 0 0 0;overflow:hidden;margin:-1px 4px 0 0;text-align:center\n}\n.GooFlow_head_btn{display:block;border:0;height:26px;width:30px;cursor:default;padding:4px 6px;margin:0 2px;float:left;outline:none;blr:expression(this.onFocus=this.blur());text-decoration:none;cursor:pointer\n}\n.GooFlow_head_btn i{display:inline-block;overflow:hidden;width:18px;height:18px;border:0;font-size:16px;line-height:18px\n}\n.GooFlow_head_btn:hover{background:#fff;padding:4px 5px;border-left:1px solid #ddd;border-right:1px solid #ddd\n}\n.GooFlow_tool{position:absolute;left:0;bottom:3px;z-index:1;border-right:1px solid #ddd;margin:0 0 0 -1px;display:block;padding:0!important\n}\n.GooFlow_tool span{height:0;overflow:hidden;border-top:1px solid #ddd;border-bottom:1px solid #fff;margin:0 2px;clear:both;display:block\n}\n.GooFlow_tool li{display:block;border:0;height:34px;padding:8px;clear:both;position:relative;margin-right:-1px\n}\n.GooFlow_tool_btn{cursor:pointer;color:#777\n}\n.GooFlow_tool_btn>i{display:block;overflow:hidden;width:18px;height:18px;border:0;float:left\n}\n.GooFlow_tool_btn:hover{border:1px solid #ddd;background:#fff;padding:7px\n}\n.GooFlow_tool_btndown{cursor:default;filter:Alpha(Opacity=70);-moz-opacity:.7;opacity:.7;background:#00b4e1\n}\n.GooFlow_tool_btndown>i{display:block;float:left;overflow:hidden;width:18px;height:18px;color:#000;filter:Alpha(Opacity=37);-moz-opacity:.37;opacity:.37;position:relative\n}\n.GooFlow_tool_btn>em,.GooFlow_tool_btndown>em{font-style:normal;display:block;float:left;padding-left:5px;height:18px;font-size:12px;line-height:20px;filter:Alpha(Opacity=80);-moz-opacity:.8;opacity:.8;overflow:hidden;text-overflow:ellipsis;white-space:nowrap\n}\n.GooFlow_tool_btndown>em{color:#fff\n}\n.GooFlow_tool_btn .rs_rb,.GooFlow_tool_btndown .rs_rb{bottom:2px!important;right:2px!important;cursor:inherit!important\n}\n.GooFlow_tool_btn:hover .rs_rb{bottom:1px!important;right:1px!important\n}\n.GooFlow_tool ul{display:none;padding:0;background:#f1f1f1;margin:0;position:absolute;left:100%;top:0;z-index:99999;box-shadow:1px 1px 0 rgba(99,99,99,.2)\n}\n.GooFlow_tool>div:hover ul{display:block\n}\n.GooFlow_tool_btndown:hover ul{display:block;top:0;margin-left:-1px\n}\n.Gooflow_extend_right{top:0;right:0;height:100%;width:14px;cursor:e-resize\n}\n.Gooflow_extend_bottom,.Gooflow_extend_right{position:absolute;z-index:10002;filter:Alpha(Opacity=20);-moz-opacity:.2;opacity:.2\n}\n.Gooflow_extend_bottom{bottom:0;left:0;width:100%;height:14px;cursor:s-resize\n}\n.Gooflow_extend_bottom:hover,.Gooflow_extend_right:hover{background-color:#999;border:1px solid #fff\n}\n.GooFlow_work_group{top:0;left:0\n}\n.GooFlow_area,.GooFlow_work_group{cursor:default;position:absolute;overflow:hidden\n}\n.GooFlow_area .lock{cursor:default\n}\n.GooFlow_area .bg{cursor:move;filter:Alpha(Opacity=30);-moz-opacity:.3;opacity:.3\n}\n.GooFlow_area.lock .bg{cursor:default\n}\n.GooFlow_area label{cursor:text;top:0;left:23px;position:absolute;display:block\n}\n.GooFlow_area.lock label{cursor:default\n}\n.GooFlow_area i{top:2px;left:2px;width:18px;height:20px;position:absolute;cursor:pointer\n}\n.GooFlow_area i:before{content:"\\E6BD"\n}\n.GooFlow_area.area_red .bg{border:1px solid red;background-color:#ff7865\n}\n.GooFlow_area.area_red i,.GooFlow_area.area_red label{color:red\n}\n.GooFlow_area.area_yellow .bg{border:1px solid #cd925a;background-color:#ffd564\n}\n.GooFlow_area.area_yellow i,.GooFlow_area.area_yellow label{color:#ffba1d\n}\n.GooFlow_area.area_blue .bg{border:1px solid #347bb1;background-color:#549cde\n}\n.GooFlow_area.area_blue i,.GooFlow_area.area_blue label{color:#347bb1\n}\n.GooFlow_area.area_green .bg{border:1px solid green;background-color:#84ca04\n}\n.GooFlow_area.area_green i,.GooFlow_area.area_green label{color:green\n}\n.GooFlow_area.area_milk .bg{border:1px solid #333;background-color:#fff;filter:Alpha(Opacity=50);-moz-opacity:.5;opacity:.5\n}\n.GooFlow_area.area_milk i,.GooFlow_area.area_milk label{color:#777\n}\n.GooFlow_work svg{display:block;position:absolute;top:0;left:0\n}\n.GooFlow_work v\\:group{position:relative;display:block\n}\n.GooFlow_work v\\:group v\\:line,.GooFlow_work v\\:group v\\:polyline{overflow:visible\n}\n.GooFlow_work v\\:group div{cursor:text;position:absolute;overflow:visible;display:inline;float:left;white-space:nowrap\n}\n.GooFlow_work .draw{color:#f80\n}\n.GooFlow_item{position:absolute;border:1px solid #a1dceb;z-index:3;border-radius:3px;background-color:#c1dcfc;box-shadow:1px 1px 2px #636363\n}\n.GooFlow table{margin:0;padding:0 1px;border-radius:2px\n}\n.GooFlow td,.GooFlow td div{vertical-align:middle;text-align:center;padding:0;cursor:inherit;word-wrap:break-word;word-break:break-all\n}\n.GooFlow .ico{width:18px;cursor:move;text-align:center;vertical-align:middle\n}\n.GooFlow .ico i{filter:Alpha(Opacity=30);-moz-opacity:.3;opacity:.3;color:#000;margin:0 auto\n}\n.GooFlow .item_round{border-radius:50%;overflow:visible\n}\n.GooFlow .item_round table{border:0;padding:0;width:24px;height:24px\n}\n.GooFlow .item_round .span{display:block;text-align:center;position:absolute;top:100%;left:-110%;width:330%;overflow:visible;padding:0;cursor:inherit;word-wrap:break-word;word-break:break-all\n}\n.GooFlow .item_mix{background:#b6f700;color:#fff\n}\n.GooFlow .item_capsule{border-radius:13px\n}\n.GooFlow .item_ellipse{border-radius:50%/50%\n}\n.GooFlow .item_rhomb{-webkit-transform:rotate(45deg);transform:rotate(45deg)\n}\n.GooFlow .item_rhomb table{border:0;padding:0;-webkit-transform:rotate(-45deg);transform:rotate(-45deg);width:28px;height:28px\n}\n.GooFlow .item_rhomb>div .rs_close{-webkit-transform:rotate(-45deg);transform:rotate(-45deg);top:-50%;left:50%;margin-left:-3px\n}\n.GooFlow .item_rhomb .span{display:block;text-align:center;position:absolute;top:70%;left:-60%;width:350%;overflow:visible;padding:0;cursor:default;word-wrap:break-word;word-break:break-all;-webkit-transform:rotate(-45deg);transform:rotate(-45deg)\n}\n.GooFlow .item_custom{background-color:transparent!important;border:1px solid transparent;box-shadow:none!important\n}\n.GooFlow .item_custom table{padding:0;margin:-1px\n}\n.GooFlow .item_custom .span{display:block;text-align:center;position:absolute;top:100%;left:0;width:100%;overflow:visible;padding:0;cursor:default;word-wrap:break-word;word-break:break-all\n}\n.GooFlow .item_focus{border:1px solid #3892d3!important;z-index:5\n}\n.GooFlow .item_focus table{margin:0!important\n}\n.GooFlow .item_focus.item_custom>table{margin:-1px!important\n}\n.GooFlow .item_mark{border:2px solid #f80\n}\n.GooFlow .item_mark table{margin:-1px\n}\n.GooFlow .item_mark .span{margin-top:1px\n}\n.GooFlow .item_mark.item_rhomb .span{margin-left:1px\n}\n.GooFlow .item_mark.item_custom>table{margin:-2px\n}\n.GooFlow_work_inner.crosshair .GooFlow_item:hover{cursor:crosshair!important;border:2px solid #f80!important\n}\n.GooFlow_work_inner.crosshair .GooFlow_item:hover table{margin:-1px\n}\n.GooFlow_work_inner.crosshair .GooFlow_item:hover .ico{cursor:crosshair!important\n}\n.GooFlow_work_inner.crosshair .GooFlow_item:hover .span{margin-top:1px\n}\n.GooFlow_work_inner.crosshair .GooFlow_item.item_rhomb:hover .span{margin-left:1px\n}\n.GooFlow_work_inner.crosshair .GooFlow_item.item_custom:hover table{margin:-2px!important\n}\n.GooFlow_work_paper{cursor:default;position:absolute;overflow:hidden;top:0;left:0\n}\n.GooFlow_memo{position:absolute;box-shadow:1px 1px 1px rgba(0,0,0,.15);cursor:move;background-color:#fff4a8;color:#fff4a8;background:linear-gradient(to right bottom,transparent 50%,rgba(0,0,0,.1) 0) no-repeat 0 0/10px 10px,linear-gradient(135deg,transparent 7px,#fff4a8 0)\n}\n.GooFlow_memo .stud{position:absolute;left:50%;top:-4px;margin-left:-7px;width:14px;font-size:14px;color:#475669;line-height:1\n}\n.GooFlow_memo .stud:before{content:"\\E6B6"\n}\n.GooFlow_memo .memo_body{padding:9px;border:1px solid #3892d3\n}\n.GooFlow_memo .memo_body .memo_text{cursor:text;min-height:34px;font-size:12px;overflow:hidden;color:#444;word-wrap:break-word;word-break:break-all\n}\n.GooFlow_memo.lock .memo_body{border-color:transparent\n}\n.GooFlow_memo .memo_oper{display:block\n}\n.GooFlow_memo.lock .memo_oper{display:none\n}\n.GooFlow textarea{position:absolute;border:1px solid #3892d3;display:none;overflow-y:visible;width:100px;z-index:10001\n}\n.GooFlow div .rs_right{overflow:hidden;position:absolute;right:-1px;top:-1px;height:100%;width:6px;cursor:w-resize\n}\n.GooFlow div .rs_bottom{overflow:hidden;position:absolute;left:-1px;bottom:-1px;width:100%;height:6px;cursor:n-resize\n}\n.GooFlow div .rs_rb{position:absolute;right:-1px;bottom:0;width:10px;height:9px;filter:Alpha(Opacity=70);-moz-opacity:.7;opacity:.7;font-family:iconflow!important;font-size:12px;color:#475669;line-height:1;overflow:hidden;cursor:nw-resize\n}\n.GooFlow div .rs_rb:before{content:"\\E6B7"\n}\n.GooFlow div .rs_close{position:absolute;right:-1px;top:1px;width:10px;height:9px;filter:Alpha(Opacity=70);-moz-opacity:.7;opacity:.7;font-family:iconflow!important;font-size:12px;color:#475669;line-height:1;overflow:hidden;cursor:pointer\n}\n.GooFlow div .rs_close:before{content:"\\E674"\n}\n.GooFlow .rs_ghost{position:absolute;display:none;overflow:hidden;border:1px dashed #8492a6;background:#e5e9f2;filter:Alpha(Opacity=50);-moz-opacity:.5;opacity:.5;z-index:10\n}\n.GooFlow .rs_ghost.multi{z-index:0!important;border-color:#666;background:#ddd\n}\n.GooFlow_line_oper,.GooFlow_multi_oper{width:82px;height:20px;background:#e5e9f2;border:1px solid #8492a6;position:absolute;filter:Alpha(Opacity=80);-moz-opacity:.8;opacity:.8;z-index:10000\n}\n.GooFlow .GooFlow_line_mp{width:9px;height:9px;filter:Alpha(Opacity=40);-moz-opacity:.4;opacity:.4;background:#333;cursor:crosshair\n}\n.GooFlow .GooFlow_line_mp,.GooFlow_linemove{overflow:hidden;position:absolute;z-index:9999\n}\n.GooFlow_linemove{background-color:transparent;filter:Alpha(Opacity=50);-moz-opacity:.5;opacity:.5\n}\n.GooFlow_line_oper i,.GooFlow_multi_oper i{display:inline-block;margin-left:2px;cursor:pointer;position:relative\n}\n.GooFlow .b_l1:before{content:"\\E60D";color:#1f2d3d\n}\n.GooFlow .b_l2:before{content:"\\E60E";color:#1f2d3d\n}\n.GooFlow .b_l3:before{content:"\\E601";color:#1f2d3d\n}\n.GooFlow .b_x:before{content:"\\E61A";color:red\n}\n.GooFlow .GooFlow_multi_oper{width:20px;display:none\n}\n.GooFlow .GooFlow_multi_oper i{margin-left:0\n}\n.GooFlow .h-align{height:100%;width:1px;border-left:1px dashed rgba(0,0,0,.5)\n}\n.GooFlow .h-align,.GooFlow .v-align{position:absolute;top:0;left:0;overflow:hidden;display:none\n}\n.GooFlow .v-align{width:100%;height:1px;border-top:1px dashed rgba(0,0,0,.5)\n}\n.GooFlow_nav_map,.GooFlow_nav_map *{box-sizing:border-box\n}\n.GooFlow_nav_map{position:relative;display:block;padding:0;overflow:hidden\n}\n.GooFlow_nav_map .viewbox{position:absolute;box-shadow:0 0 0 3000px hsla(0,0%,93.3%,.5);top:0;left:0;width:100%;height:100%;border:1px solid #dcdfe6;margin:-1px;cursor:move\n}\n.GooFlow_nav_map .map{width:100%;height:100%\n}\n@font-face{font-family:iconflow;src:url('+i(o("7a3f"))+");src:url("+i(o("7a3f"))+'#iefix) format("embedded-opentype"),url('+i(o("f73f"))+') format("woff"),url('+i(o("dbd3"))+') format("truetype"),url('+i(o("e1a1"))+'#iconflow) format("svg")\n}\n.GooFlow .GooFlow_line_oper i,.GooFlow .GooFlow_multi_oper i,.GooFlow .rs_ghost .ico i,.GooFlow_area i,.GooFlow_head i,.GooFlow_item .ico i,.GooFlow_memo i,.GooFlow_tool i{font-family:iconflow!important;font-size:18px;line-height:20px;font-style:normal;-webkit-font-smoothing:antialiased;-webkit-text-stroke-width:.2px;-moz-osx-font-smoothing:grayscale\n}\n.GooFlow .ico_cursor:before{content:"\\E602"\n}\n.GooFlow .ico_multi:before{content:"\\E6E0"\n}\n.GooFlow .ico_direct:before{content:"\\E605"\n}\n.GooFlow .ico_segment:before{content:"\\E615"\n}\n.GooFlow .ico_dirDashed:before{content:"\\E620"\n}\n.GooFlow .ico_segDashed:before{content:"\\E621"\n}\n.GooFlow .ico_group:before{content:"\\E663"\n}\n.GooFlow .ico_memo:before{content:"\\E604"\n}\n.GooFlow .ico_start:before{content:"\\E700"\n}\n.GooFlow .ico_end:before{content:"\\E609"\n}\n.GooFlow .ico_fork:before{content:"\\E60C"\n}\n.GooFlow .ico_join:before{content:"\\E606"\n}\n.GooFlow .ico_complex:before{content:"\\E872"\n}\n.GooFlow .ico_node:before{content:"\\E678"\n}\n.GooFlow .ico_task:before{content:"\\E6AF"\n}\n.GooFlow .ico_chat:before{content:"\\E61B"\n}\n.GooFlow .ico_state:before{content:"\\E633"\n}\n.GooFlow .ico_plug:before{content:"\\E66C"\n}\n.GooFlow .ico_menu:before{content:"\\E649"\n}\n.GooFlow .ico_sound:before{content:"\\E62B"\n}\n.GooFlow .ico_open:before{content:"\\E7A0";color:#ffd300\n}\n.GooFlow .ico_new:before{content:"\\E659"\n}\n.GooFlow .ico_reload:before{content:"\\E607";color:#690\n}\n.GooFlow .ico_save:before{content:"\\E63D";color:#09c\n}\n.GooFlow .ico_undo:before{content:"\\E673";color:#f80\n}\n.GooFlow .ico_redo:before{content:"\\E672";color:#f80\n}\n.GooFlow .ico_print:before{content:"\\E671"\n}',""])},4917:function(e,t,o){o("214f")("match",1,function(e,t,o){return[function(o){"use strict";var i=e(this),s=void 0==o?void 0:o[t];return void 0!==s?s.call(o,i):new RegExp(o)[t](String(i))},o]})},"4f37":function(e,t,o){"use strict";o("aa77")("trim",function(e){return function(){return e(this,3)}})},5410:function(e,t,o){"use strict";var i={main:"#20A0FF",font:"#15428B",node:"#C0CCDA",line:"#1D8CE0",lineFont:"#ff6600",mark:"#ff8800",mix:"#B6F700",mixFont:"#777"},s={toolBtns:{cursor:"选择指针",multi:"多选",direct:"有向连线",dirDashed:"有向虚线",segment:"无向连线",segDashed:"无向虚线",start:"入口结点",end:"结束结点",task:"任务结点",node:"自动结点",chat:"决策结点",state:"状态结点",plug:"附加插件",fork:"分支结点",join:"联合结点",complex:"复合结点",group:"区域编辑",memo:"添加便笺"},headBtns:{new:"新建流程",open:"打开流程",save:"保存结果",undo:"撤销",redo:"重做",reload:"刷新流程",print:"打印流程图"},extendRight:"工作区向右扩展",extendBottom:"工作区向下扩展"};t["a"]={color:i,remarks:s}},"645d":function(e,t,o){"use strict";o("4917"),o("f751");var i=o("24f9"),s=function(e,t){var o={pageTitle:"",base:!1};Object.assign(o,t);var s="printThis-"+(new Date).getTime(),r=document.createElement("iframe");r.name="printIframe",r.id=s,document.body.appendChild(r),window.location.hostname!==document.domain&&navigator.userAgent.match(/msie/i)&&(r.className="MSIE",r.src='javascript:document.write("<head><script>document.domain="'+document.domain+'";<\/script></head><body></body>")');var n=document.getElementById(s);i["a"].css(n,{position:"absolute",width:"0px",height:"0px",left:"-600px",top:"-600px"}),setTimeout(function(){!function(e,t){var o=(e=e.contentWindow||e.contentDocument||e).document||e.contentDocument||e;o.open(),o.write(t),o.close()}(n,"<!DOCTYPE html>");var t=n.document||n.contentDocument||n,s=t.head,r=t.body,a=document.querySelector("base"),l="";i["a"].css(r,{height:"auto",margin:"0",padding:"0",background:"#fff"}),l=!0===o.base&&null!=a?a.getAttribute("href"):"string"==typeof o.base?o.base:document.location.protocol+"//"+document.location.host;var p=t.createElement("base");p.setAttribute("href",l),s.appendChild(p);for(var h=document.querySelectorAll("link"),d=0;d<h.length;++d){var c=h[d].getAttribute("href");if(c&&null!=c&&""!==c){var f=h[d].getAttribute("media")||"all",u=h[d].cloneNode(!0);u.setAttribute("media",f),s.appendChild(u)}}for(var m=document.querySelectorAll("style"),$=0;$<m.length;++$){var g=m[$].cloneNode(!0);s.appendChild(g)}if(o.pageTitle){var w=t.createElement("title");w.innerHTML=o.pageTitle,s.appendChild(w)}var v=e.cloneNode(!0);r.appendChild(v),setTimeout(function(){if(i["a"].hasClass(n,"MSIE")){window.frames.printIframe.focus();var e=document.createElement("script");e.type="text/javascript",e.innerHTML="window.print();",s.appendChild(e)}else document.queryCommandSupported("print")?n.contentWindow.document.execCommand("print",!1,null):(n.contentWindow.focus(),n.contentWindow.print());setTimeout(function(){n.parentNode.removeChild(n)},1e3)},333)},333)};t["a"]={flag:"print",methods:{print:function(e){var t=this._suitSize();e||(e=1),t.width+=100,t.height+=100;for(var o=this.$refs.$workArea.cloneNode(!0),i=["",".GooFlow_work_paper",".GooFlow_work_group","svg"],r=0;r<i.length;r++){var n=a[r],a=""===n?o:o.querySelector(n);a&&null!=a&&(a.style.width=t.width+"px",a.style.height=t.height+"px")}var l=document.createElement("div");l.className="GooFlow GooFlow_work",l.style.width=t.width+"px",l.style.height=t.height+"px",l.style.overflow="hidden",l.append(o),this.GooFlow.color.font&&(l.style.color=this.GooFlow.color.font),l.style.transform="scale("+e+")",l.style.transformOrigin="top left",s(l,{base:document.URL,pageTitle:this.prop.$title})}}}},"6ed2":function(e,t,o){"use strict";var i=o("743b"),s=o("752d");
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/t["a"]={flag:"group",methods:{_initGroup:function(){if(this.prop.$editable){Object(i["a"])(this.$refs.$group,"contextmenu",".GooFlow_area",{inthis:this},function(e,t){var o=e.data.inthis;if("function"==typeof o.onItemRightClick&&!1===o.onItemRightClick(t.id,"area"))return s["a"].preventDefault(e),!1});var e=this;this.$refs.$group.addEventListener("mousedown",function(t){if(2===t.button)return!1;if("group"===e.prop.$nowType&&"none"===e.$refs.$textArea.style.display&&(t||(t=window.event),"LABEL"!==t.target.tagName&&"I"!==t.target.tagName)){var o=s["a"].getRealStyle(t.target).cursor,i=t.target.parentNode;switch(o){case"nw-resize":case"w-resize":case"n-resize":i=i.parentNode;break;case"move":break;default:return}i=i.id,t.id=i,e.$refs.$ghost.css({cursor:o});var r=e.prop.$areas[i];e._bindMoveEvent(t,r,function(t,o,s,r,n,a,l){t&&("move"!==s?e.resizeArea(i,a,l):e.moveArea(i,r,n))},o,200,100)}}),this.$refs.$group.addEventListener("dblclick",function(t){if("group"===e.prop.$nowType){if(t||(t=window.event),"LABEL"!==t.target.tagName)return s["a"].stopEventPop(t),!1;var o=t.target.parentNode;if("function"!=typeof e.onItemDbClick||!1!==e.onItemDbClick(o.id,"area")){var i=t.target.innerHTML,r=parseInt(o.style.left,10)+18,n=parseInt(o.style.top,10)+1,a=e.t;return e.$refs.$textArea.value=i,e._renameTxtShow({width:130,height:26,left:a.left+r-e.$refs.$workArea.parentNode.scrollLeft,top:a.top+n-e.$refs.$workArea.parentNode.scrollTop}),e.$refs.$textArea.dataset.id=o.id,e.$refs.$textArea.focus(),e.$refs.$workArea.parentNode.onmouseup=function(t){e.$refs.$workArea.parentNode.onmouseup=null,2!==t.button&&"block"===e.$refs.$textArea.style.display&&(e.setName(e.$refs.$textArea.dataset.id,e.$refs.$textArea.value,"area"),e.$refs.$textArea.value="",e.$refs.$textArea.dataset.id=void 0,e.$refs.$textArea.style.display="none")},s["a"].stopEventPop(t),!1}}}),this.$refs.$group.addEventListener("mouseup",function(t){if("none"!==e.$refs.$textArea.style.display)return e.setName(e.$refs.$textArea.dataset.id,e.$refs.$textArea.value,"area"),e.$refs.$textArea.value="",e.$refs.$textArea.dataset.id=void 0,void(e.$refs.$textArea.style.display="none");if("group"===e.prop.$nowType){switch(t||(t=window.event),t.target.className){case"rs_close":return e.delArea(t.target.parentNode.parentNode.id),s["a"].stopEventPop(t),!1;case"bg":return}switch(t.target.tagName){case"LABEL":return s["a"].stopEventPop(t),!1;case"I":var o=t.target.parentNode.id;switch(e.prop.$areas[o].color){case"red":e.setAreaColor(o,"yellow");break;case"yellow":e.setAreaColor(o,"blue");break;case"blue":e.setAreaColor(o,"green");break;case"green":e.setAreaColor(o,"milk");break;case"milk":e.setAreaColor(o,"red")}return s["a"].stopEventPop(t),!1}if(!e.prop.$dragAddOper&&"none"===e.$refs.$ghost.$el.style.display){if(2===t.button)return s["a"].stopEventPop(t),!1;var i=s["a"].mouseP(t),r=s["a"].elCsys(this),n=i.x-r.left+this.parentNode.parentNode.scrollLeft,a=i.y-r.top+this.parentNode.parentNode.scrollTop,l=["red","yellow","blue","green","milk"];return e.addArea((new Date).getTime(),{name:e.prop.$areaPrefix+e.prop.$max,left:n/e.scale,top:a/e.scale,color:l[e.prop.$max%5],width:200,height:100}),e.prop.$max++,s["a"].stopEventPop(t),!1}}})}},_areaFixNodes:function(e){var t=this.prop.$areas[e];for(var o in this.prop.$nodes){var i=this.prop.$nodes[o];i.left>=t.left&&i.left<t.left+t.width&&i.top>=t.top&&i.top<t.top+t.height?i.areaId=e:i.areaId&&i.areaId===e&&this._node2Area(o)}},addArea:function(e,t,o,i,s,r){!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"area",t)||("function"==typeof this.pushOper&&!i&&this.prop.$editable&&this.pushOper("delArea",[e]),this.prop.$editable&&(t.alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),r?this.prop.$areas[e]=t:this.$set(this.prop.$areas,e,t),this.prop.$editable&&this._areaFixNodes(e),++this.prop.$areaCount,!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}))},delArea:function(e,t,o,i){if(this.prop.$areas[e]&&(!1===t||"function"!=typeof this.onItemDel||!1!==this.onItemDel(e,"area"))){if("function"!=typeof this.pushOper||o||this.pushOper("addArea",[e,this.prop.$areas[e]]),this.prop.$editable){for(var s in this.prop.$nodes){var r=this.prop.$nodes[s];r.areaId===e&&delete r.areaId}this.prop.$deletedItem[e]="area"}this.$delete(this.prop.$areas,e),--this.prop.$areaCount,!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},moveArea:function(e,t,o){if(this.prop.$areas[e]&&(null==this.onItemMove||this.onItemMove(e,"area",t,o))){"function"==typeof this.pushOper&&this.pushOper("moveArea",[e,this.prop.$areas[e].left,this.prop.$areas[e].top]),t<0&&(t=0),o<0&&(o=0);var i=this.prop.$areas[e];i.left=t,i.top=o,this.prop.$editable&&(i.alt=!0,this._areaFixNodes(e));var s=document.getElementById(e);s.style.left=t*this.scale+"px",s.style.top=o*this.scale+"px",this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setAreaColor:function(e,t){this.prop.$areas[e]&&("red"!==t&&"yellow"!==t&&"blue"!==t&&"green"!==t&&"milk"!==t||("function"==typeof this.pushOper&&this.pushOper("setAreaColor",[e,this.prop.$areas[e].color]),this.prop.$editable&&(this.prop.$areas[e].alt=!0),this.$set(this.prop.$areas[e],"color",t),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})))},resizeArea:function(e,t,o){if(this.prop.$areas[e]&&("function"!=typeof this.onItemResize||!1!==this.onItemResize(e,"area",t,o))){"function"==typeof this.pushOper&&this.pushOper("resizeArea",[e,this.prop.$areas[e].width,this.prop.$areas[e].height]);var i=document.getElementById(e);i.childNodes[0].style.width=t*this.scale+"px",i.childNodes[0].style.height=o*this.scale+"px",t=i.offsetWidth,o=i.offsetHeight;var s=this.prop.$areas[e];s.width=t,s.height=o,this.prop.$editable&&(s.alt=!0,this._areaFixNodes(e)),this.$set(this.prop.$areas[e],s),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}}}},"70e5":function(e,t,o){"use strict";t["a"]="宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)"},"743b":function(e,t,o){"use strict";
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/var i=function(e,t){for(var o=0;o<t.length;++o)if(e==t[o])return!0;return!1},s=function(e){e||(e=window.event),window.event?e.cancelBubble=!0:e.stopPropagation()},r=function(e,t,o,r,n){"function"==typeof n&&e.addEventListener(t,function(t){t||(t=window.event);for(var a=e.querySelectorAll(o),l=t.target;l!==e&&!i(l,a);)l=l.parentNode;return l&&l!==e&&(t.data=r,!1===n(t,l)&&s(t)),!1})};t["a"]=r},"752d":function(e,t,o){"use strict";var i=o("53ca"),s=function(e){return e||(e=window.event),e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.documentElement.scrollLeft-document.body.clientLeft,y:e.clientY+document.documentElement.scrollTop-document.body.clientTop}},r=function(e){var t=e.offsetTop,o=e.offsetLeft;for(e=e.offsetParent;e;)t+=e.offsetTop,o+=e.offsetLeft,e=e.offsetParent;return{top:t,left:o}};
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/t["a"]={mouseP:s,elCsys:r,getCoor:function(e,t){var o=s(e),i=r(t);return{X:o.x-i.left+t.parentNode.scrollLeft,Y:o.y-i.top+t.parentNode.scrollTop}},calcPolyPoints:function(e,t,o,i,s){s||(s=1);var r={left:e.left*s,top:e.top*s,width:e.width*s,height:e.height*s},n={left:t.left*s,top:t.top*s,width:t.width*s,height:t.height*s};i*=s;var a,l,p={x:r.left+r.width/2,y:r.top+r.height/2},h={x:n.left+n.width/2,y:n.top+n.height/2},d=[],c=[];return a=[p.x,p.y],l=[h.x,h.y],"lr"===o?(c=[i,h.y],(d=[i,p.y])[0]>r.left&&d[0]<r.left+r.width?(d[1]=p.y>h.y?r.top:r.top+r.height,a[0]=d[0],a[1]=d[1]):a[0]=d[0]<r.left?r.left:r.left+r.width,c[0]>n.left&&c[0]<n.left+n.width?(c[1]=p.y>h.y?n.top+n.height:n.top,l[0]=c[0],l[1]=c[1]):l[0]=c[0]<n.left?n.left:n.left+n.width):"tb"===o&&(c=[h.x,i],(d=[p.x,i])[1]>r.top&&d[1]<r.top+r.height?(d[0]=p.x>h.x?r.left:r.left+r.width,a[0]=d[0],a[1]=d[1]):a[1]=d[1]<r.top?r.top:r.top+r.height,c[1]>n.top&&c[1]<n.top+n.height?(c[0]=p.x>h.x?n.left+n.width:n.left,l[0]=c[0],l[1]=c[1]):l[1]=c[1]<n.top?n.top:n.top+n.height),{start:a,m1:d,m2:c,end:l}},getMValue:function(e,t,o,i){return i||(i=1),"lr"===o?(e.left*i+e.width*i/2+t.left*i+t.width*i/2)/2:"tb"===o?(e.top*i+e.height*i/2+t.top*i+t.height*i/2)/2:void 0},calcStartEnd:function(e,t,o){var i,s,r,n;o||(o=1);var a=e.left*o,l=e.left*o+e.width*o,p=t.left*o,h=t.left*o+t.width*o;a>=h?(i=a,r=h):l<=p?(i=l,r=p):a<=p&&l>=p&&l<=h?r=i=(l+p)/2:a>=p&&l<=h?r=i=(a+l)/2:p>=a&&h<=l?r=i=(p+h)/2:a<=h&&l>=h&&(r=i=(a+h)/2);var d=e.top*o,c=e.top*o+e.height*o,f=t.top*o,u=t.top*o+t.height*o;return d>=u?(s=d,n=u):c<=f?(s=c,n=f):d<=f&&c>=f&&c<=u?n=s=(c+f)/2:d>=f&&c<=u?n=s=(d+c)/2:f>=d&&u<=c?n=s=(f+u)/2:d<=u&&c>=u&&(n=s=(d+u)/2),{start:[i,s],end:[r,n]}},drawRect:function(e,t,o,i){if(o[0]!==t[0]||o[1]!==t[1]){for(var s="",r=[o[0],o[1]],n=0;n<r.length;++n){var a=(r[n]-t[n])/2;a>0?r[n]-=e>a?a:e:a<0&&(r[n]+=e>-a?-a:e)}s+=" L "+r[0]+" "+r[1]+" Q "+o[0]+" "+o[1],r=[o[0],o[1]];for(var l=0;l<r.length;++l){var p=(r[l]-i[l])/2;p>0?r[l]-=e>p?p:e:p<0&&(r[l]+=e>-p?-p:e)}return s+" "+r[0]+" "+r[1]}},stopEventPop:function(e){e||(e=window.event),window.event?e.cancelBubble=!0:e.stopPropagation()},preventDefault:function(e){window.event?window.event.returnValue=!1:e.preventDefault()},isDrawingLine:function(e){var t="object"==Object(i["a"])(e)?e.prop.$nowType:e;return"direct"===t||"dirDashed"===t||"segment"===t||"segDashed"===t},getRealStyle:function(e){var t=null;try{t=getComputedStyle(e,"style")}catch(o){t=getStyle(e,"style")}return t}}},"7a3f":function(e,t,o){e.exports=o.p+"fonts/iconflow.94449c30.eot"},"9fec":function(e,t,o){"use strict";o("28a5");
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/t["a"]={flag:"autoalign",prop:{_amin:6},methods:{_locAlignLine:function(e,t,o){var i=[],s=this.$refs.$workArea.parentNode,r=s.scrollLeft-this.t.left,n=s.scrollTop-this.t.top;i="group"!==o&&"group"!==t.getData("type")||!this.extFlag.group?"memo"!==o&&"memo"!==t.getData("type")||!this.extFlag.memo?this.prop.$nodes:this.prop.$memos:this.prop.$areas;var a={h:-1,hType:"",v:-1,vType:""},l=t.offsetSize(),p=parseInt(t.$el.style.left.split("px")[0],10)+r,h=parseInt(t.$el.style.top.split("px")[0],10)+n,d=l.width,c=l.height;for(var f in i)e!==f&&i.hasOwnProperty(f)&&(p+d/2>=(i[f].left+i[f].width/2)*this.scale-this.prop._amin&&p+d/2<=(i[f].left+i[f].width/2)*this.scale+this.prop._amin?(a.h=(i[f].left+i[f].width/2)*this.scale-s.scrollLeft,a.hType="center"):p+d>=i[f].left*this.scale-this.prop._amin&&p+d<=i[f].left*this.scale+this.prop._amin?(a.h=i[f].left*this.scale-s.scrollLeft,a.hType="right"):p>=i[f].left*this.scale-this.prop._amin&&p<=i[f].left*this.scale+this.prop._amin?(a.h=i[f].left*this.scale-s.scrollLeft,a.hType="left"):p+d>=(i[f].left+i[f].width)*this.scale-this.prop._amin&&p+d<=(i[f].left+i[f].width)*this.scale+this.prop._amin?(a.h=(i[f].left+i[f].width)*this.scale-s.scrollLeft,a.hType="right"):p>=(i[f].left+i[f].width)*this.scale-this.prop._amin&&p<=(i[f].left+i[f].width)*this.scale+this.prop._amin&&(a.h=(i[f].left+i[f].width)*this.scale-s.scrollLeft,a.hType="left"),h+c/2>=(i[f].top+i[f].height/2)*this.scale-this.prop._amin&&h+c/2<=(i[f].top+i[f].height/2)*this.scale+this.prop._amin?(a.v=(i[f].top+i[f].height/2)*this.scale-s.scrollTop,a.vType="middle"):h+c>=i[f].top*this.scale-this.prop._amin&&h+c<=i[f].top*this.scale+this.prop._amin?(a.v=i[f].top*this.scale-s.scrollTop,a.vType="bottom"):h>=i[f].top*this.scale-this.prop._amin&&h<=i[f].top*this.scale+this.prop._amin?(a.v=i[f].top*this.scale-s.scrollTop,a.vType="top"):h+c>=(i[f].top+i[f].height)*this.scale-this.prop._amin&&h+c<=(i[f].top+i[f].height)*this.scale+this.prop._amin?(a.v=(i[f].top+i[f].height)*this.scale-s.scrollTop,a.vType="bottom"):h>=(i[f].top+i[f].height)*this.scale-this.prop._amin&&h<=(i[f].top+i[f].height)*this.scale+this.prop._amin&&(a.v=(i[f].top+i[f].height)*this.scale-s.scrollTop,a.vType="top"));return a.h+=s.scrollLeft,a.v+=s.scrollTop,a},_magnetic:function(e,t){if(null==t||-1===t.v&&-1===t.h)return this.$refs.$alignH.style.display="none",void(this.$refs.$alignV.style.display="none");t.h>-1?(this.$refs.$alignH.style.display="block",this.$refs.$alignH.style.left=t.h+"px"):this.$refs.$alignH.style.display="none",t.v>-1?(this.$refs.$alignV.style.display="block",this.$refs.$alignV.style.top=t.v+"px"):this.$refs.$alignV.style.display="none";var o=e.offsetSize(),i=this.t.left-this.$refs.$workArea.parentNode.scrollLeft,s={left:e.$el.style.left,top:e.$el.style.top};switch(t.hType){case"center":s.left=t.h-o.width/2+i+"px";break;case"left":s.left=t.h+i+"px";break;case"right":s.left=t.h-o.width+i+"px"}switch(i=this.t.top-this.$refs.$workArea.parentNode.scrollTop,t.vType){case"middle":s.top=t.v-o.height/2+i+"px";break;case"top":s.top=t.v+i+"px";break;case"bottom":s.top=t.v-o.height+i+"px"}e.show(s)}}}},dbd3:function(e,t,o){e.exports=o.p+"fonts/iconflow.5184ed23.ttf"},e1a1:function(e,t,o){e.exports=o.p+"img/iconflow.e5762e98.svg"},f673:function(e,t,o){"use strict";var i=o("743b"),s=o("752d");
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/t["a"]={flag:"memo",events:{onMemoSetText:null},methods:{_initMemo:function(){if(this.prop.$editable){Object(i["a"])(this.$refs.$paper,"contextmenu",".GooFlow_memo",{inthis:this},function(e,t){var o=e.data.inthis;if("function"==typeof o.onItemRightClick&&!1===o.onItemRightClick(t.id,"memo"))return s["a"].preventDefault(e),!1});var e=this;this.$refs.$paper.addEventListener("mousedown",function(t){if(2===t.button)return!1;if("memo"===e.prop.$nowType&&"none"===e.$refs.$textArea.style.display&&(t||(t=window.event),"memo_text"!==t.target.className)){var o=s["a"].getRealStyle(t.target).cursor,i=t.target.parentNode;switch(o){case"nw-resize":case"w-resize":case"n-resize":i=i.parentNode;break;case"move":break;default:return}t.id=i.id,e.$refs.$ghost.css({cursor:o});var r=e.prop.$memos[i.id];e._bindMoveEvent(t,r,function(t,o,s,r,n,a,l){t&&("move"!==s?e.resizeMemo(i.id,a,l):e.moveMemo(i.id,r,n))},o,140,54)}}),Object(i["a"])(this.$refs.$paper,"dblclick",".GooFlow_memo .memo_text",{inthis:this},function(t,o){if("memo"===e.prop.$nowType){t||(t=window.event);var i=o.parentNode.parentNode;if("function"!=typeof e.onItemDbClick||!1!==e.onItemDbClick(i.id,"memo")){var r=t.target.innerHTML,n=parseInt(i.style.left,10)+10*e.scale,a=parseInt(i.style.top,10),l=e.t;return e.$refs.$textArea.value=r,e._renameTxtShow({width:o.offsetWidth+10*e.scale,height:o.offsetHeight+20*e.scale,left:l.left+n-e.$refs.$workArea.parentNode.scrollLeft,top:l.top+a-e.$refs.$workArea.parentNode.scrollTop}),e.$refs.$textArea.dataset.id=i.id,e.$refs.$textArea.focus(),e.$refs.$workArea.parentNode.onmouseup=function(t){e.$refs.$workArea.parentNode.onmouseup=null,2!==t.button&&"block"===e.$refs.$textArea.style.display&&(e.setMemoText(e.$refs.$textArea.dataset.id,e.$refs.$textArea.value),e.$refs.$textArea.value="",e.$refs.$textArea.dataset.id=void 0,e.$refs.$textArea.style.display="none")},s["a"].stopEventPop(t),!1}}}),this.$refs.$paper.addEventListener("mouseup",function(t){if("block"===e.$refs.$textArea.style.display)return e.setMemoText(e.$refs.$textArea.dataset.id,e.$refs.$textArea.value),e.$refs.$textArea.value="",e.$refs.$textArea.dataset.id=void 0,void(e.$refs.$textArea.style.display="none");if("memo"===e.prop.$nowType){switch(t||(t=window.event),t.target.className){case"rs_close":return e.delMemo(t.target.parentNode.parentNode.id),s["a"].stopEventPop(t),!1;case"memo_text":case"memo_body":return}if(!e.prop.$dragAddOper&&"none"===e.$refs.$ghost.$el.style.display){if(2===t.button)return s["a"].stopEventPop(t),!1;var o=s["a"].mouseP(t),i=s["a"].elCsys(this),r=o.x-i.left+this.parentNode.parentNode.scrollLeft,n=o.y-i.top+this.parentNode.parentNode.scrollTop;return e.addMemo((new Date).getTime(),{text:"",left:r/e.scale,top:n/e.scale,width:140,height:54}),s["a"].stopEventPop(t),!1}}})}},addMemo:function(e,t,o,i,s,r){!1!==o&&"function"==typeof this.onItemAdd&&!1===this.onItemAdd(e,"memo",t)||("function"==typeof this.pushOper&&!i&&this.prop.$editable&&this.pushOper("delMemo",[e]),this.prop.$editable&&(t.alt=!0,this.prop.$deletedItem[e]&&delete this.prop.$deletedItem[e]),r?this.prop.$memos[e]=t:this.$set(this.prop.$memos,e,t),++this.prop.$memoCount,!s&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()}))},delMemo:function(e,t,o,i){this.prop.$memos[e]&&(!1!==t&&"function"==typeof this.onItemDel&&!1===this.onItemDel(e,"memo")||("function"!=typeof this.pushOper||o||this.pushOper("addMemo",[e,this.prop.$memos[e]]),this.prop.$editable&&(this.prop.$deletedItem[e]="memo"),this.$delete(this.prop.$memos,e),--this.prop.$memoCount,!i&&this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})))},moveMemo:function(e,t,o){if(this.prop.$memos[e]&&(null==this.onItemMove||this.onItemMove(e,"memo",t,o))){"function"==typeof this.pushOper&&this.pushOper("moveMemo",[e,this.prop.$memos[e].left,this.prop.$memos[e].top]),t<0&&(t=0),o<0&&(o=0);var i=this.prop.$memos[e];i.left=t,i.top=o,this.prop.$editable&&(i.alt=!0);var s=document.getElementById(e);s.style.left=t*this.scale+"px",s.style.top=o*this.scale+"px",this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},resizeMemo:function(e,t,o){if(this.prop.$memos[e]&&("function"!=typeof this.onItemResize||!1!==this.onItemResize(e,"memo",t,o))){"function"==typeof this.pushOper&&this.pushOper("resizeMemo",[e,this.prop.$memos[e].width,this.prop.$memos[e].height]);var i=document.getElementById(e);i.childNodes[0].style.width=t*this.scale+"px",i.childNodes[0].style.height="auto";var s=i.offsetHeight;(o*=this.scale)<s&&(o=s),i.childNodes[0].style.height=o+"px";var r=this.prop.$memos[e];r.width=t,r.height=o/this.scale,this.prop.$editable&&(r.alt=!0),this.$set(this.prop.$memos[e],r),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},setMemoText:function(e,t){if(this.prop.$memos[e]&&this.prop.$memos[e].text!==t&&("function"!=typeof this.onMemoSetText||!1!==this.onMemoSetText(e,t))){var o=this.prop.$memos[e],i=this.prop.$memos[e].text;o.text=t;var s=document.getElementById(e);s.querySelector(".memo_text").innerHTML=t,s.childNodes[0].style.height="auto";var r=s.offsetWidth/this.scale,n=s.offsetHeight/this.scale;n<o.height&&(n=o.height),s.childNodes[0].style.height=n*this.scale+"px",o.width===r&&o.height===n||this.resizeMemo(e,r,n),this.prop.$editable&&(o.alt=!0),this.$set(this.prop.$memos[e],o),"function"==typeof this.pushOper&&this.pushOper("setMemoText",[e,i])}}}}},f73f:function(e,t,o){e.exports=o.p+"fonts/iconflow.91594457.woff"}}]);