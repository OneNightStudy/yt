(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c502e334","chunk-2d0b90a5","chunk-2d22d9c9"],{"30f8":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("span",[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:t.handleSearch}},[t._v(t._s(t.$t("search")))]),a("Button",{on:{click:t.handleReset}},[t._v(t._s(t.$t("reset")))])],1)},i=[],n={name:"search-button",props:{params:{type:Object,required:!0}},methods:{handleSearch:function(){this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")},handleReset:function(){this.$emit("reset"),this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")}}},r=n,s=a("2877"),l=Object(s["a"])(r,o,i,!1,null,null,null);l.options.__file="search-button.vue";e["default"]=l.exports},"778d":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"backupLog"},[a("Row",[a("Col",[a("Card",[a("Row",[a("Form",{ref:"backupLogForm",attrs:{model:t.backupLogForm,inline:"","label-width":85}},[a("FormItem",{attrs:{label:t.$t("backupLog.name"),prop:"name"}},[a("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:t.$t("backupLog.nameTip")},model:{value:t.backupLogForm.name,callback:function(e){t.$set(t.backupLogForm,"name",e)},expression:"backupLogForm.name"}})],1),a("FormItem",{attrs:{label:t.$t("backupLog.selectDate")}},[a("DatePicker",{staticStyle:{width:"250px"},attrs:{type:"datetimerange",format:"yyyy-MM-dd",clearable:"",placeholder:t.$t("backupLog.selectDateTip")},on:{"on-change":t.selectDateRange},model:{value:t.selectDate,callback:function(e){t.selectDate=e},expression:"selectDate"}})],1),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("search-button",{attrs:{params:t.backupLogForm},on:{reset:t.reset,getList:t.getBackupLogList}})],1)],1)],1),a("table-grid",{attrs:{loading:t.loading,columns:t.columns,data:t.data,total:t.total,delAllUrl:t.delUrl,params:t.backupLogForm,exportUrl:t.exportUrl,exportFromId:t.exportFromId,tableAdd:t.tableAdd},on:{getList:t.getBackupLogList}})],1)],1)],1)],1)},i=[],n=(a("7f7f"),a("365c")),r=a("4328"),s=a.n(r),l=a("f7df"),c=a("30f8"),d=a("a78e"),u=a.n(d),p={name:"backup-log",components:{"table-grid":l["default"],"search-button":c["default"]},data:function(){var t=this;return{backupLogForm:{name:"",areaId:"",startDate:"",endDate:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},tableAdd:!1,selectDate:null,loading:!1,total:0,data:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:this.$t("backupLog.name"),key:"name",width:220,align:"center",render:function(t,e){var a=e.row.jobDetail.name;return t("span",a)}},{title:this.$t("createTime"),key:"createTime",sortable:!0,width:200,align:"center",sortType:"desc"},{title:this.$t("backupLog.successNumber"),key:"successNumber",width:170,align:"center",sortable:!0},{title:this.$t("backupLog.failureNumber"),key:"failureNumber",width:170,align:"center",sortable:!0,render:function(t,e){var a=e.row.failureNumber;return a>0?t("span",{style:{color:"red"}},a):t("span",a)}},{title:this.$t("operation"),key:"action",align:"center",render:function(e,a){return e("div",[e("Icon",{props:{type:"md-document",size:"20",color:"#6CA6CD"},attrs:{title:t.$t("backupLog.listDetail")},style:{marginRight:"10px",cursor:"pointer"},on:{click:function(){t.listDetail(a.row)}}}),e("Icon",{props:{type:"md-document",size:"20",color:"#4B0082"},attrs:{title:t.$t("backupLog.logDetail")},style:{marginRight:"10px",cursor:"pointer"},on:{click:function(){t.logDetail(a.row)}}}),e("Icon",{props:{type:"md-cloud-download",size:"20",color:"#7FFF00"},attrs:{title:t.$t("backupLog.downloadList")},style:{marginRight:"10px",cursor:"pointer"},on:{click:function(){t.downloadList(a.row)}}})])}}],neExportFromId:"log-connection",neExportUrl:"/backup/web/backup/logConnection/export",neForm:{logId:"",title:"",createTime:"",name:""},logDetailForm:{name:"",createTime:"",jobLogId:""},delUrl:"/backup/web/backup/jobLog/delByIds",exportUrl:"/backup/web/backup/jobLog/export",exportFromId:"backup-log"}},methods:{init:function(){this.getBackupLogList()},getBackupLogList:function(){var t=this;this.loading=!0,Object(n["O"])(this.backupLogForm).then(function(e){t.loading=!1,0===e.code&&(t.data=e.content.content,t.total=e.content.totalElements)})},selectDateRange:function(t){t&&(this.backupLogForm.startDate=t[0],this.backupLogForm.endDate=t[1])},reset:function(){this.selectDate=null,this.backupLogForm.startDate="",this.backupLogForm.endDate="",this.$refs.backupLogForm.resetFields()},listDetail:function(t){this.neForm.title=this.$t("backupLog.listDetail")+"----"+t.jobDetail.name,this.neForm.logId=t.id,this.neForm.name=t.name,this.neForm.createTime=t.createTime,this.$store.commit("setConnectionListDetail",this.neForm),this.$store.commit("setConnectionListDetailFlag","display"),this.$router.push({name:"connection-detail"})},logDetail:function(t){this.logDetailForm.jobLogId=t.id,this.logDetailForm.name=t.name,this.logDetailForm.createTime=t.createTime,this.$store.commit("setConnectionLogDetail",this.logDetailForm),this.$store.commit("setConnectionLogDetailFlag","direct"),this.$router.push({name:"connection-log-detail"})},downloadList:function(t){var e=this,a={logId:t.id},o=s.a.stringify(a);Object(n["wb"])(this.neExportUrl,o).then(function(t){var a=new Blob([t]),o=e.neExportFromId+".xlsx",i=document.createElement("a");i.download=o,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)})}},watch:{"$store.state.app.logName":{handler:function(t,e){""!==t&&(this.backupLogForm.name=t,this.init(),this.$store.commit("setLogName",""))},deep:!0,immediate:!0}},mounted:function(){var t=JSON.parse(u.a.get("userInfo"));this.backupLogForm.areaId=t.address,this.init()}},m=p,h=a("2877"),g=Object(h["a"])(m,o,i,!1,null,null,null);g.options.__file="backupLog.vue";e["default"]=g.exports},f7df:function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Row",{staticClass:"br",staticStyle:{"margin-bottom":"2vh"}},[this.tableAdd?a("span",[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.add}},[t._v(t._s(t.$t("add")))])],1):t._e(),this.tableDelAll?a("span",[a("Button",{attrs:{type:"error",icon:"md-trash"},on:{click:t.delAll}},[t._v(t._s(t.$t("batchDelete")))])],1):t._e(),this.tableRefresh?a("span",[a("Button",{attrs:{type:"success",icon:"md-refresh"},on:{click:t.refresh}},[t._v(t._s(t.$t("refresh")))])],1):t._e(),""!==this.exportFromId?a("span",[a("export-button",{attrs:{exportParams:t.params,exportUrl:t.exportUrl,exportFromId:t.exportFromId}})],1):t._e()]),a("Row",[this.tableDelAll?a("span",[a("Alert",{attrs:{"show-icon":""}},[t._v("\n                "+t._s(t.$t("hasSelected"))+" "),a("span",{staticClass:"select-count"},[t._v(t._s(t.selectCount))]),t._v(" "+t._s(t.$t("items"))+"\n                "),a("a",{staticClass:"select-clear",on:{click:t.clearSelectAll}},[t._v(t._s(t.$t("clear")))])])],1):t._e()]),a("Row",[a("Table",{ref:"table",attrs:{loading:t.loading,border:"",columns:t.columns,data:t.data,sortable:"custom"},on:{"on-sort-change":t.changeSort,"on-selection-change":t.showSelect,"on-row-dblclick":t.dblclick}})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:t.pageNumber,total:t.total,"page-size":t.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}})],1)],1)},i=[],n=(a("ac6a"),a("f3e2"),a("c5f6"),a("365c")),r=a("3eac"),s={name:"table-grid",components:{"export-button":r["default"]},data:function(){return{pageNumber:1,pageSize:10,selectCount:0,selectList:[]}},props:{loading:{type:Boolean,required:!0},columns:{type:Array,required:!0},data:{type:Array,required:!0},total:{type:Number,required:!0},delAllUrl:{type:String,default:""},params:{type:Object,required:!0},exportUrl:{type:String,default:""},exportFromId:{type:String,default:""},tableAdd:{type:Boolean,default:!0},tableDelAll:{type:Boolean,default:!0},tableRefresh:{type:Boolean,default:!0}},methods:{add:function(){this.$emit("add")},delAll:function(){var t=this;""!==this.delAllUrl?this.selectCount<=0?this.$Message.warning(this.$t("deleteTip")):this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("deleteContent1")+this.selectCount+this.$t("deleteContent2")+"ï¼Ÿ",onOk:function(){var e="";t.selectList.forEach(function(t){e+=t.id+","}),e=e.substring(0,e.length-1);var a={ids:e};Object(n["p"])(t.delAllUrl,a).then(function(e){0===e.code&&(t.$Message.success(t.$t("deleteSuccess")),t.clearSelectAll(),t.$emit("getList"))})}}):this.$Message.warning(this.$t("deleteInvalidTip"))},refresh:function(){this.$emit("getList")},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSort:function(t){this.params.sort=t.key,this.params.order=t.order,"normal"===t.order&&(this.params.order=""),this.$emit("getList")},showSelect:function(t){this.selectList=t,this.selectCount=t.length},changePage:function(t){this.params.pageNumber=t,this.$emit("getList"),this.clearSelectAll()},changePageSize:function(t){this.params.pageSize=t,this.$emit("getList")},dblclick:function(t,e,a){this.$emit("dblclick",t)}}},l=s,c=a("2877"),d=Object(c["a"])(l,o,i,!1,null,null,null);d.options.__file="table-grid.vue";e["default"]=d.exports}}]);