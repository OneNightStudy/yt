(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1082c642","chunk-2d0b90a5","chunk-2d22d9c9"],{"30f8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("span",[a("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("search")))]),a("Button",{on:{click:e.handleReset}},[e._v(e._s(e.$t("reset")))])],1)},l=[],i={name:"search-button",props:{params:{type:Object,required:!0}},methods:{handleSearch:function(){this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")},handleReset:function(){this.$emit("reset"),this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")}}},s=i,n=a("2877"),o=Object(n["a"])(s,r,l,!1,null,null,null);o.options.__file="search-button.vue";t["default"]=o.exports},a84e:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"backupAlarm"},[a("Row",[a("Col",[a("Card",[a("Row",[a("Form",{ref:"backupAlarmForm",attrs:{model:e.backupAlarmForm,inline:"","label-width":85}},[a("FormItem",{attrs:{label:e.$t("backupJobDetail.deviceId"),prop:"deviceId"}},[a("Select",{staticStyle:{width:"200px"},attrs:{filterable:"",clearable:""},model:{value:e.backupAlarmForm.deviceId,callback:function(t){e.$set(e.backupAlarmForm,"deviceId",t)},expression:"backupAlarmForm.deviceId"}},e._l(e.deviceList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.deviceName))])}))],1),a("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[a("search-button",{attrs:{params:e.backupAlarmForm},on:{reset:e.reset,getList:e.getBackupAlarmList}})],1)],1)],1),a("table-grid",{attrs:{loading:e.loading,columns:e.columns,data:e.data,total:e.total,tableAdd:e.tableAdd,tableDelAll:e.tableDelAll,params:e.backupAlarmForm,exportFromId:e.exportFromId},on:{getList:e.getBackupAlarmList}})],1)],1)],1)],1)},l=[],i=a("365c"),s=a("f7df"),n=a("30f8"),o=a("a78e"),c=a.n(o),u={name:"backup-alarm",components:{"table-grid":s["default"],"search-button":n["default"]},data:function(){var e=this;return{backupAlarmForm:{deviceId:"",areaId:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},deviceList:[],loading:!1,total:0,data:[],columns:[{type:"index",width:60,align:"center"},{title:this.$t("backupJobDetail.deviceId"),key:"deviceName",width:250,align:"center"},{title:this.$t("backupAlarm.localBackupFailStat"),key:"failureNumber",width:250,align:"center",render:function(t,a){var r=a.row.failureNumber;return 0<r?t("div",[t("span",{attrs:{title:e.$t("backupScheduler.viewLog")},style:{color:"red",cursor:"pointer"},on:{click:function(){e.viewLog(a.row)}}},r)]):t("span",r)}},{title:this.$t("backupAlarm.nonLocalBackupStatus"),key:"nonLocalBackupStatus",align:"center",render:function(t,a){var r=a.row.failureNumber;return r>80?t("span",{style:{color:"red"}},e.$t("abnormal")):t("span",{style:{color:"green"}},e.$t("normal"))}},{title:this.$t("createTime"),key:"createTime",sortable:!0,align:"center",width:250,sortType:"desc"}],tableAdd:!1,tableDelAll:!1,exportFromId:""}},methods:{init:function(){this.initDevice(),this.getBackupAlarmList()},getBackupAlarmList:function(){var e=this;this.loading=!0,Object(i["P"])(this.backupAlarmForm).then(function(t){e.loading=!1,0===t.code&&(e.data=t.content.content,e.total=t.content.totalElements)})},viewLog:function(e){this.$store.commit("setLogName",e.deviceName),this.$router.push({name:"backup-log"})},reset:function(){this.$refs.backupAlarmForm.resetFields()},initDevice:function(){var e=this;Object(i["D"])().then(function(t){0===t.code&&(e.deviceList=t.content)})},alarmView:function(e){},export:function(e){}},mounted:function(){var e=JSON.parse(c.a.get("userInfo"));this.backupAlarmForm.areaId=e.address,this.init()}},d=u,p=a("2877"),m=Object(p["a"])(d,r,l,!1,null,null,null);m.options.__file="backupAlarm.vue";t["default"]=m.exports},f7df:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",{staticClass:"br",staticStyle:{"margin-bottom":"2vh"}},[this.tableAdd?a("span",[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v(e._s(e.$t("add")))])],1):e._e(),this.tableDelAll?a("span",[a("Button",{attrs:{type:"error",icon:"md-trash"},on:{click:e.delAll}},[e._v(e._s(e.$t("batchDelete")))])],1):e._e(),this.tableRefresh?a("span",[a("Button",{attrs:{type:"success",icon:"md-refresh"},on:{click:e.refresh}},[e._v(e._s(e.$t("refresh")))])],1):e._e(),""!==this.exportFromId?a("span",[a("export-button",{attrs:{exportParams:e.params,exportUrl:e.exportUrl,exportFromId:e.exportFromId}})],1):e._e()]),a("Row",[this.tableDelAll?a("span",[a("Alert",{attrs:{"show-icon":""}},[e._v("\n                "+e._s(e.$t("hasSelected"))+" "),a("span",{staticClass:"select-count"},[e._v(e._s(e.selectCount))]),e._v(" "+e._s(e.$t("items"))+"\n                "),a("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v(e._s(e.$t("clear")))])])],1):e._e()]),a("Row",[a("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect,"on-row-dblclick":e.dblclick}})],1),a("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:e.pageNumber,total:e.total,"page-size":e.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)},l=[],i=(a("ac6a"),a("f3e2"),a("c5f6"),a("365c")),s=a("3eac"),n={name:"table-grid",components:{"export-button":s["default"]},data:function(){return{pageNumber:1,pageSize:10,selectCount:0,selectList:[]}},props:{loading:{type:Boolean,required:!0},columns:{type:Array,required:!0},data:{type:Array,required:!0},total:{type:Number,required:!0},delAllUrl:{type:String,default:""},params:{type:Object,required:!0},exportUrl:{type:String,default:""},exportFromId:{type:String,default:""},tableAdd:{type:Boolean,default:!0},tableDelAll:{type:Boolean,default:!0},tableRefresh:{type:Boolean,default:!0}},methods:{add:function(){this.$emit("add")},delAll:function(){var e=this;""!==this.delAllUrl?this.selectCount<=0?this.$Message.warning(this.$t("deleteTip")):this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("deleteContent1")+this.selectCount+this.$t("deleteContent2")+"ï¼Ÿ",onOk:function(){var t="";e.selectList.forEach(function(e){t+=e.id+","}),t=t.substring(0,t.length-1);var a={ids:t};Object(i["p"])(e.delAllUrl,a).then(function(t){0===t.code&&(e.$Message.success(e.$t("deleteSuccess")),e.clearSelectAll(),e.$emit("getList"))})}}):this.$Message.warning(this.$t("deleteInvalidTip"))},refresh:function(){this.$emit("getList")},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSort:function(e){this.params.sort=e.key,this.params.order=e.order,"normal"===e.order&&(this.params.order=""),this.$emit("getList")},showSelect:function(e){this.selectList=e,this.selectCount=e.length},changePage:function(e){this.params.pageNumber=e,this.$emit("getList"),this.clearSelectAll()},changePageSize:function(e){this.params.pageSize=e,this.$emit("getList")},dblclick:function(e,t,a){this.$emit("dblclick",e)}}},o=n,c=a("2877"),u=Object(c["a"])(o,r,l,!1,null,null,null);u.options.__file="table-grid.vue";t["default"]=u.exports}}]);