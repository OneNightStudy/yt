(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21e55d"],{d4b9:function(t,o,e){"use strict";e.r(o);var i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"connectionLogDetail"},[e("Card",[e("Row",[e("h3",{staticStyle:{color:"#1C86EE"}},[t._v(t._s(t.$t("backupLog.logDetail")))])]),e("Divider"),e("Row",[e("Form",{ref:"logDetailForm",attrs:{model:t.logDetailForm,"label-width":80,inline:""}},[e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:t.$t("backupLog.name")}},[e("Input",{staticStyle:{width:"400px"},attrs:{readonly:""},model:{value:t.logDetailForm.name,callback:function(o){t.$set(t.logDetailForm,"name",o)},expression:"logDetailForm.name"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:t.$t("backupJobDetail.connectionIds"),prop:"connectionIds"}},[e("Select",{staticStyle:{width:"400px"},on:{"on-change":t.changeNe},model:{value:t.logDetailForm.connectionId,callback:function(o){t.$set(t.logDetailForm,"connectionId",o)},expression:"logDetailForm.connectionId"}},t._l(t.connectionList,function(o){return e("Option",{key:o.id,attrs:{value:o.id}},[t._v(t._s(o.name))])}))],1)],1)],1),e("Row",[e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:t.$t("createTime")}},[e("Input",{staticStyle:{width:"400px"},attrs:{readonly:""},model:{value:t.logDetailForm.createTime,callback:function(o){t.$set(t.logDetailForm,"createTime",o)},expression:"logDetailForm.createTime"}})],1)],1),e("Col",{attrs:{span:12}},[e("FormItem",{attrs:{label:t.$t("backupLog.isSuccess")}},[e("RadioGroup",{on:{"on-change":t.changeIsSucc},model:{value:t.logDetailForm.isSuccess,callback:function(o){t.$set(t.logDetailForm,"isSuccess",o)},expression:"logDetailForm.isSuccess"}},[e("Radio",{attrs:{label:t.$t("success")}}),e("Radio",{attrs:{label:t.$t("failure")}})],1)],1)],1)],1),e("FormItem",{attrs:{label:t.$t("backupLog.logContent")}},[e("Input",{staticStyle:{width:"950px"},attrs:{type:"textarea",autosize:{minRows:10,maxRows:11}},model:{value:t.logDetailForm.log,callback:function(o){t.$set(t.logDetailForm,"log",o)},expression:"logDetailForm.log"}})],1),e("span",{staticStyle:{"text-align":"center",display:"block"}},[e("export-button",{attrs:{exportParams:t.exportLogParams,exportUrl:t.exportLogUrl,exportFromId:t.exportLogFromId,suffix:t.logSuffix}})],1)],1)],1)],1)],1)},n=[],a=(e("c5f6"),e("7f7f"),e("365c")),c=e("3eac"),l={name:"connection-log-detail",components:{"export-button":c["default"]},data:function(){return{logDetailForm:{name:"",connectionId:"",createTime:"",isSuccess:this.$t("failure"),log:""},connectionList:[],jobLogId:"",exportLogParams:{log:""},exportLogUrl:"/backup/web/backup/jobLog/exportLog",exportLogFromId:"connection-log",logSuffix:".txt"}},methods:{initDirect:function(){var t=this;this.reset();var o=this.$store.state.app.connectionLogDetail;this.logDetailForm.name=o.name,this.jobLogId=o.jobLogId;var e={logId:this.jobLogId};Object(a["lb"])(e).then(function(o){if(0===o.code)for(var e=o.content,i=0;i<e.length;i++){var n={id:Number(e[i].id),name:e[i].connName};t.connectionList.push(n)}})},initSchedulerDirect:function(){var t=this;this.reset();var o=this.$store.state.app.connectionLogDetail;this.logDetailForm.name=o.name,this.jobLogId=o.jobLogId;var e={logId:this.jobLogId,isSuccess:!1};Object(a["W"])(e).then(function(o){if(0===o.code)for(var e=o.content,i=0;i<e.length;i++){var n={id:Number(e[i].id),name:e[i].connName};t.connectionList.push(n)}})},initIndirect:function(){var t=this;this.reset();var o=this.$store.state.app.connectionLogData;this.logDetailForm.name=o.name,Object(a["ib"])(o.id).then(function(e){0===e.code&&(t.logDetailForm.log=e.content.log,t.logDetailForm.createTime=e.content.createTime,t.exportLogParams.log=e.content.log,o.isSuccess?t.logDetailForm.isSuccess=t.$t("success"):t.logDetailForm.isSuccess=t.$t("failure"),t.connectionList.push({id:Number(o.connectionId),name:o.connectionName}),t.logDetailForm.connectionId=Number(o.connectionId))})},changeIsSucc:function(){void 0!==this.logDetailForm.connectionId&&this.changeLogContent(this.logDetailForm.connectionId)},changeNe:function(t){void 0!==t&&this.changeLogContent(t)},changeLogContent:function(t){var o=this,e=!1;this.logDetailForm.isSuccess===this.$t("success")&&(e=!0);var i={logId:this.jobLogId,connectionId:t,isSuccess:e};Object(a["jb"])(i).then(function(t){0===t.code&&(o.logDetailForm.log=t.content.log,o.logDetailForm.createTime=t.content.createTime,o.exportLogParams.log=t.content.log)})},reset:function(){this.logDetailForm.name="",this.logDetailForm.connectionId="",this.logDetailForm.createTime="",this.logDetailForm.isSuccess=this.$t("failure"),this.logDetailForm.log="",this.connectionList=[],this.jobLogId="",this.exportLogParams.log=""}},watch:{"$store.state.app.connectionLogDetailFlag":{handler:function(t,o){"direct"===t?(this.initDirect(),this.$store.commit("setConnectionLogDetail",[]),this.$store.commit("setConnectionLogDetailFlag","")):"schedulerDirect"===t?(this.initSchedulerDirect(),this.$store.commit("setConnectionLogDetail",[]),this.$store.commit("setConnectionLogDetailFlag","")):"indirect"===t&&(this.initIndirect(),this.$store.commit("setConnectionLogData",[]),this.$store.commit("setConnectionLogDetailFlag",""))},deep:!0,immediate:!0}}},s=l,r=e("2877"),g=Object(r["a"])(s,i,n,!1,null,null,null);g.options.__file="connectionLogDetail.vue";o["default"]=g.exports}}]);