(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-396b6378"],{1971:function(e,t,o){"use strict";o("6c7b"),o("57e7"),o("f751"),o("a481"),o("28a5");var r=o("8465"),a=o("752d"),i=o("24f9"),l={canvasExtend:function(){Object(r["a"])()},initBg:function(e,t,o){var r=document.createElement("canvas");r.width=e,r.height=t;var a=r.getContext("2d");return o&&(a.fillStyle=o),a.fillRect(0,0,r.width,r.height),a.save(),r},_toNum:function(e){return null!==e&&""!==e?parseInt(e.split("px")[0],10):void 0},_analyseLabel:function(e){var t=e.tagName,o=e.offsetLeft,r=e.offsetTop,l=null;if("TD"===t){var n=e.querySelector("div"),s=a["a"].getRealStyle(n);o+=n.offsetLeft-this._toNum(s.marginLeft),r+=n.offsetTop-this._toNum(s.marginTop),l=s.transform}else l=e.style.transform;var h=a["a"].getRealStyle(e),d=this._toNum(h.lineHeight),p=h.fontSize;return{isMemo:!!i["a"].hasClass(e,"memo_text")||void 0,font:"14px "+h.fontFamily,fontFamily:h.fontFamily,fontSize:this._toNum(p.split("px")[0]),text:e.innerText,color:h.color,width:e.offsetWidth,height:e.offsetHeight,transform:l,lineHeight:d,offsetLeft:o,offsetTop:r,lineNum:Math.ceil(e.offsetHeight/d)}},_analyseIcon:function(e){var t=a["a"].getRealStyle(e),o=t.backgroundImage,r={offsetLeft:e.offsetLeft,offsetTop:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight};return o&&"none"!==o?(o=o.replace(/"/g,"").split("url(")[1],r.backgroundImage=o.substr(0,o.length-1),o=t.backgroundPosition.split(" "),r.pX=-1*parseFloat(o[0].split("px")[0]),r.pY=-1*parseFloat(o[1].split("px")[0]),r.offsetLeft=e.parentNode.offsetLeft,r.offsetTop=e.parentNode.offsetTop):Object.assign(r,{font:"18px "+t.fontFamily.split(" ")[0],lineHeight:this._toNum(t.lineHeight),color:t.color,opacity:parseFloat(t.opacity),content:window.getComputedStyle(e,"::before").getPropertyValue("content")}),r},_fillIcon:function(e,t,o,r,a,i){var l=e.getContext("2d");if(void 0===r.backgroundImage){0===r.content.indexOf('"')&&(r.content=r.content.split('"')[1]),r.color=r.color.replace("rgb","rgba").replace(")",", "+r.opacity+")"),l.fillStyle=r.color,l.font=r.font,l.textAlign="center",l.textBaseline="middle";var n=window.ActiveXObject||"ActiveXObject"in window?0:1,s=t+r.offsetLeft+4+r.width/2+n,h=o+r.offsetTop+2+r.height/2+n;return l.save(),l.translate(s,h),l.scale(i,i),l.fillText(r.content,0,0),l.restore(),null}l.save();var d=0,p=0;r.pX<0&&(d-=r.pX,r.pX=0),r.pY<0&&(p-=r.pY,r.pY=0);var c=r.isCustom?0:2*i;l.drawImage(a,r.pX,r.pY,r.width,r.height,t+r.offsetLeft+c+d,o+r.offsetTop+c+p,r.width*i,r.height*i),l.restore()},_fillLabel:function(e,t,o,r,a,i){var l=e.getContext("2d");l.fillStyle=r.color,l.textAlign="center",r.isMemo&&(l.textAlign="left"),l.font=r.font,l.textBaseline="top";var n=r.text,s=0,h=0,d=window.ActiveXObject||"ActiveXObject"in window?1:3,p=t+r.offsetLeft+(r.isMemo?0:r.width/2)+d/2,c=o+r.offsetTop+d;i&&(p-=i.x,c+=i.y),navigator.userAgent.indexOf("Firefox")>=0&&(c+=r.lineHeight-r.fontSize),l.save(),l.translate(p,c),c=0,p=0,l.scale(a,a);for(var f=0;f<n.length;f++)s+=l.measureText(n[f]).width,f!==n.length-1?s>=r.width/a&&(l.fillText(n.substring(h,f),p,c),c+=r.lineHeight,s=0,h=f):l.fillText(n.substring(h,f+1),p,c);l.restore()},_analyseArea:function(e){var t=e.querySelector(".bg"),o=a["a"].getRealStyle(t);return{top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,borderColor:o.borderTopColor,bgColor:o.backgroundColor,opacity:parseFloat(o.opacity),icon:this._analyseIcon(e.querySelector("i")),label:this._analyseLabel(e.querySelector("label"))}},renderAreas:function(e,t,o,r){var a=e.getContext("2d");for(var i in t){var l=t[i];l.bgColor=l.bgColor.replace("rgb","rgba").replace(")",", "+l.opacity+")"),l.borderColor=l.borderColor.replace("rgb","rgba").replace(")",", "+l.opacity+")"),a.fillStyle=l.bgColor,a.strokeStyle=l.borderColor,a.rect(l.left,l.top,l.width,l.height),a.fill(),a.stroke(),this._fillIcon(e,l.left-3,l.top-3,l.icon,o,r),this._fillLabel(e,l.left,l.top,l.label,r)}},_analyseMemo:function(e){var t=this._analyseIcon(e.querySelector("i"));t.font="14px "+t.font.split(" ")[1];var o=this._analyseLabel(e.querySelector(".memo_text"));o.font="12px "+o.fontFamily;var r=a["a"].getRealStyle(e);return{top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,bgColor:r.color,boxShadow:r.boxShadow,icon:t,label:o}},renderMemos:function(e,t,o){var r=e.getContext("2d");for(var a in t){var i=t[a];r.save(),r.fillStyle=i.bgColor;var l=i.boxShadow.split(") ");r.shadowColor=l[0],l=l[1].split(" "),r.shadowOffsetX=this._toNum(l[0]),r.shadowOffsetY=this._toNum(l[1]),r.shadowBlur=this._toNum(l[2]),r.beginPath(),r.moveTo(i.left+10,i.top),r.lineTo(i.left+i.width,i.top),r.lineTo(i.left+i.width,i.top+i.height),r.lineTo(i.left,i.top+i.height),r.lineTo(i.left,i.top+10),r.lineTo(i.left+10,i.top),r.closePath(),r.fill(),r.restore(),r.save(),r.fillStyle="rgba(0,0,0,0.1)",r.beginPath(),r.moveTo(i.left+10,i.top),r.lineTo(i.left+10,i.top+10),r.lineTo(i.left,i.top+10),r.lineTo(i.left+10,i.top),r.closePath(),r.fill(),r.restore(),r.save(),r.fillStyle=i.icon.color,r.font=i.icon.font,r.textAlign="center",r.textBaseline="middle";var n=i.left+i.width/2,s=i.top+2;r.translate(n,s),r.scale(o,o),0===i.icon.content.indexOf('"')&&(i.icon.content=i.icon.content.split('"')[1]),r.fillText(i.icon.content,0,0),r.restore(),this._fillLabel(e,i.left,i.top,i.label,o)}},_analyseNode:function(e){var t="";i["a"].hasClass(e,"item_ellipse")&&(t="ellipse"),i["a"].hasClass(e,"item_rhomb")&&(t="rhomb"),i["a"].hasClass(e,"item_round")&&(t="round"),i["a"].hasClass(e,"item_parallelogram")&&(t="parallelogram"),i["a"].hasClass(e,"item_custom")&&(t="custom");var o=a["a"].getRealStyle(e),r={top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,borderColor:o.borderTopColor,borderWidth:this._toNum(o.borderTopWidth),bgColor:o.backgroundColor,borderRadius:this._toNum(o.borderTopLeftRadius),boxShadow:o.boxShadow,spClass:t,icon:this._analyseIcon(e.querySelector(".ico").childNodes[0])};return i["a"].hasClass(e,"item_round")||i["a"].hasClass(e,"item_rhomb")||i["a"].hasClass(e,"item_custom")?r.label=this._analyseLabel(e.querySelector(".span")):r.label=this._analyseLabel(e.querySelector("td").nextSibling),"custom"===t&&(r.icon.isCustom=!0),r},renderNodes:function(e,t,o,r){var a=e.getContext("2d");for(var i in t){var l=t[i],n=l.boxShadow.split(") ");if(1===n.length){var s=l.boxShadow.split("rgba");n[0]="rgba"+s[1],n[1]=s[0]}"custom"!==l.spClass&&(a.shadowColor=n[0],n=n[1].split(" "),a.shadowOffsetX=this._toNum(n[0])+(l.borderWidth>1?1:0),a.shadowOffsetY=this._toNum(n[1])+(l.borderWidth>1?1:0),a.shadowBlur=this._toNum(n[2])),a.fillStyle=l.bgColor,"ellipse"===l.spClass?a.BezierEllipse(l.left+l.width/2,l.top+l.height/2,l.width/2,l.height/2).fill():"rhomb"===l.spClass?(a.save(),a.translate(l.left+l.width/2,l.top+l.height/2),a.rotate(45*Math.PI/180),a.roundRect(-l.width/2,-l.height/2,l.width-l.borderWidth,l.height-l.borderWidth,l.borderRadius).fill(),a.restore()):"parallelogram"===l.spClass?(a.save(),a.translate(l.left+l.width/2,l.top+l.height/2),a.transform(1,0,-12/l.height,1,0,0),a.roundRect(-l.width/2,-l.height/2,l.width-l.borderWidth,l.height-l.borderWidth,l.borderRadius).fill(),a.restore()):"custom"===l.spClass||a.roundRect(l.left+l.borderWidth/2,l.top+l.borderWidth/2,l.width-l.borderWidth,l.height-l.borderWidth,l.borderRadius).fill(),a.shadowBlur=0,a.shadowColor="",a.shadowOffsetX=0,a.shadowOffsetY=0,a.strokeStyle=l.borderColor,a.lineWidth=0===l.borderWidth?.01:l.borderWidth,a.stroke(),this._fillIcon(e,l.left+(l.borderRadius>6?-3:0),l.top,l.icon,o,r),this._fillLabel(e,l.left,l.top,l.label,r,"rhomb"===l.spClass?{x:l.width/3*1.41,y:l.height/4}:void 0)}},_analyseLine:function(e,t){var o=a["a"].getRealStyle(e).fontFamily,r=t.querySelector("path[stroke-linecap]"),i=r.getAttribute("marker-end"),l={color:r.getAttribute("stroke"),lineWidth:r.getAttribute("stroke-width"),lineCap:"round",noArrow:!i||null==i},n=r.style.strokeDasharray;l.lineDash=n&&null!=n;var s=t.childNodes[2],h=s.getAttribute("fill");h&&null!==h&&""!==h||(h="#777"),l.label={text:s.textContent,font:s.style.fontSize+" "+o,color:h,left:s.getAttribute("x"),top:s.getAttribute("y")};for(var d=r.getAttribute("d"),p=d.substring(2,d.length).split(/[L|Q]/),c=[],f=0;f<p.length;++f){p[f]=p[f].replace(/^\s+|\s+$/gm,"");var u=p[f].split(" ");2===u.length?c.push({x:parseFloat(u[0]),y:parseFloat(u[1])}):c.push({x:parseFloat(u[0]),y:parseFloat(u[1]),dX:parseFloat(u[2]),dY:parseFloat(u[3])})}l.points=c;var g=c.length,m=c[g-1].x-c[g-2].x,v=c[g-1].y-c[g-2].y;return l.angle=Math.atan2(v,m),l},renderLines:function(e,t){var o=e.getContext("2d");for(var r in t){var a=t[r];o.save(),o.setLineDash(a.lineDash?[4,6]:[]),o.strokeStyle=a.color,o.lineWidth=a.lineWidth,o.lineCap=a.lineCap;var i=a.points;o.beginPath(),o.moveTo(i[0].x,i[0].y);for(var l=1;l<i.length;++l)if(i[l].dX){var n=i[l].y===i[l].dY?Math.abs(i[l].x-i[l].dX):Math.abs(i[l].y-i[l].dY);o.arcTo(i[l].x,i[l].y,i[l].dX,i[l].dY,n),o.moveTo(i[l].dX,i[l].dY)}else o.lineTo(i[l].x,i[l].y),l!==i.length-1&&o.moveTo(i[l].x,i[l].y);if(o.closePath(),o.stroke(),a.noArrow||(o.translate(i[i.length-1].x,i[i.length-1].y),o.rotate(a.angle),o.fillStyle=a.color,o.beginPath(),o.moveTo(1*a.lineWidth,0),o.lineTo(-6*a.lineWidth,-3*a.lineWidth),o.lineTo(-6*a.lineWidth,3*a.lineWidth),o.lineTo(1*a.lineWidth,0),o.closePath(),o.fill()),o.restore(),a.label&&null!=a.label.text&&""!=a.label.text){var s=e.getContext("2d"),h=a.label;s.fillStyle=h.color,s.textAlign="center",s.font=h.font,s.fillText(h.text,h.left,h.top)}}}};function n(e,t,o){try{var r=new Blob([e]);if(window.navigator.msSaveOrOpenBlob)navigator.msSaveBlob(r,t+"."+o);else{var a=document.createElement("a");a.href=window.URL.createObjectURL(r),a.download=t+"."+o,a.click(),window.URL.revokeObjectURL(a.href)}}catch(r){for(var i=window.open("","_blank");"complete"!==i.document.readyState&&"complete"!==i.document.readyState;);i.document.write("<html><head><title>"+t+"."+o+"</title></head><body><pre>"+("xml"===o?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):e)+"</pre></body></html>")}}t["a"]={flag:"export",initFuncName:"canvasExtend",methods:{canvasExtend:function(){l.canvasExtend()},exportDiagram:function(e){for(var t=void 0,o=null,r={},a=this.$refs.$group.querySelectorAll(".GooFlow_area"),i=0;i<a.length;++i)r[a[i].id]=l._analyseArea(a[i]),r[a[i].id].icon.backgroundImage&&null===o&&(o=r[a[i].id].icon.backgroundImage);for(var n={},s=this.$refs.$paper.querySelectorAll(".GooFlow_memo"),h=0;h<s.length;++h)n[s[h].id]=l._analyseMemo(s[h]);for(var d={},p=this.$refs.$workArea.querySelectorAll(".GooFlow_item"),c=0;c<p.length;++c)d[p[c].id]=l._analyseNode(p[c]),d[p[c].id].icon.backgroundImage&&null===o&&(o=d[p[c].id].icon.backgroundImage);var f=this._suitSize(),u=f.width+100*this.scale,g=f.height+100*this.scale,m=l.initBg(u,g,"#ffffff"),v=this;null!==o&&((t=new Image).setAttribute("crossOrigin","anonymous"),t.src=o);var b=function(){a.length>0&&l.renderAreas(m,r,t,v.scale),s.length>0&&l.renderMemos(m,n,v.scale),l.renderNodes(m,d,t,v.scale);var o=m.getContext("2d");if(o.restore(),window.ActiveXObject||"ActiveXObject"in window||navigator.userAgent.indexOf("Edge")>-1){for(var i={},h=this.$refs.$draw.querySelectorAll("g"),p=0;p<h.length;++p)"GooFlow_tmp_line"!==h[p].getAttribute("tid")&&(i[h[p].id]=l._analyseLine(v.$el,h[p]));l.renderLines(m,i);try{var c=m.msToBlob();navigator.msSaveBlob(c,e+".png")}catch(t){for(var f=m.toDataURL("image/png"),b=window.open("","_blank");"complete"!==b.document.readyState&&"complete"!==b.document.readyState;);b.document.write("<html><head><title>"+e+'.png</title></head><body><img src="'+f+'" border="1" title="'+e+'.png"></body></html>')}}else{var w='<svg xmlns="http://www.w3.org/2000/svg" width="'+u+'" height="'+g+'"><defs><style type="text/css">text{font-size:14px;line-height:1.42857143;font-family:"Microsoft Yahei", "Helvetica Neue", Helvetica, Hiragino Sans GB, WenQuanYi Micro Hei, Arial, sans-serif;}</style></defs>'+v.$refs.$draw.innerHTML+"</svg>",y=new Image;y.src="data:image/svg+xml,"+encodeURIComponent(w),y.onload=function(){o.drawImage(y,0,0);var t=document.createElementNS("http://www.w3.org/1999/xhtml","a");t.href=m.toDataURL("image/png"),t.download=e+".png",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}};!t||t.complete||window.ActiveXObject||"ActiveXObject"in window?b():t.onload=function(){b()}},exportDataFile:function(e,t){if("json"===t)n(JSON.stringify(this.exportData()),e,"json");else{if("xml"!==t)return;try{n(this.exportBpmnXML(),e,"xml")}catch(e){console.warn("failed in exec function exportBpmnXML()! you need extend the xml.js plugin for supported.")}}}}}},"36bd":function(e,t,o){"use strict";var r=o("4bf8"),a=o("77f1"),i=o("9def");e.exports=function(e){var t=r(this),o=i(t.length),l=arguments.length,n=a(l>1?arguments[1]:void 0,o),s=l>2?arguments[2]:void 0,h=void 0===s?o:a(s,o);while(h>n)t[n++]=e;return t}},"6c7b":function(e,t,o){var r=o("5ca1");r(r.P,"Array",{fill:o("36bd")}),o("9c6c")("fill")},"71ac":function(e,t,o){"use strict";o.r(t);var r=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{attrs:{id:"DemoNavmap"}},[o("div",{staticStyle:{float:"left",width:"800px"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:e.myProps,global:e.global,plugIns:e.plugIns,navSelector:"#demo_navmap"}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[e._v("实时的缩略导航图")])])],1),o("div",{staticStyle:{float:"left",width:"280px",border:"1px solid #999"}},[o("keep-alive",[o("div",{staticStyle:{height:"180px"},attrs:{id:"demo_navmap"}})])],1)])},a=[],i=o("2380"),l=(o("57e7"),o("6c7b"),o("a481"),o("28a5"),o("8465")),n=o("752d"),s=o("24f9"),h={canvasExtend:function(){Object(l["a"])()},_toNum:function(e){return null!==e&&""!==e?parseInt(e.split("px")[0],10):void 0},_analyseArea:function(e){var t=e.querySelector(".bg"),o=n["a"].getRealStyle(t);return{top:this._toNum(e.style.top),left:this._toNum(e.style.left),width:e.offsetWidth,height:e.offsetHeight,borderColor:o.borderTopColor,bgColor:o.backgroundColor,opacity:parseFloat(o.opacity)}},renderAreas:function(e,t,o){for(var r in t){var a=t[r];e.save(),a.bgColor=a.bgColor.replace("rgb","rgba").replace(")",", "+a.opacity+")"),a.borderColor=a.borderColor.replace("rgb","rgba").replace(")",", "+a.opacity+")"),e.fillStyle=a.bgColor,e.strokeStyle=a.borderColor,e.beginPath(),e.rect(a.left*o,a.top*o,a.width*o,a.height*o),e.fill(),e.stroke(),e.closePath(),e.restore()}},_analyseMemo:function(e,t){var o=n["a"].getRealStyle(e);return{top:this._toNum(e.style.top)*t,left:this._toNum(e.style.left)*t,width:e.offsetWidth*t,height:e.offsetHeight*t,bgColor:o.color}},renderMemos:function(e,t){for(var o in t){var r=t[o];e.save(),e.fillStyle=r.bgColor,e.beginPath(),e.moveTo(r.left+5,r.top),e.lineTo(r.left+r.width,r.top),e.lineTo(r.left+r.width,r.top+r.height),e.lineTo(r.left,r.top+r.height),e.lineTo(r.left,r.top+5),e.lineTo(r.left+5,r.top),e.closePath(),e.fill(),e.restore(),e.save(),e.fillStyle="rgba(0,0,0,0.1)",e.beginPath(),e.moveTo(r.left+5,r.top),e.lineTo(r.left+5,r.top+5),e.lineTo(r.left,r.top+5),e.lineTo(r.left+5,r.top),e.closePath(),e.fill(),e.restore()}},_analyseNode:function(e,t){var o="";s["a"].hasClass(e,"item_ellipse")&&(o="ellipse"),s["a"].hasClass(e,"item_rhomb")&&(o="rhomb"),s["a"].hasClass(e,"item_round")&&(o="round"),s["a"].hasClass(e,"item_parallelogram")&&(o="parallelogram"),s["a"].hasClass(e,"item_custom")&&(o="custom");var r=n["a"].getRealStyle(e),a={top:this._toNum(e.style.top)*t,left:this._toNum(e.style.left)*t,width:e.offsetWidth*t,height:e.offsetHeight*t,borderColor:r.borderTopColor,borderWidth:this._toNum(r.borderTopWidth)*t,bgColor:r.backgroundColor,borderRadius:this._toNum(r.borderTopLeftRadius),spClass:o};return"custom"===o&&(a.borderColor="#999999"),a},renderNodes:function(e,t){for(var o in e.save(),t){var r=t[o];e.fillStyle=r.bgColor,"ellipse"===r.spClass?e.BezierEllipse(r.left+r.width/2,r.top+r.height/2,r.width/2,r.height/2).fill():"rhomb"===r.spClass?(e.save(),e.translate(r.left+r.width/2,r.top+r.height/2),e.rotate(45*Math.PI/180),e.roundRect(-r.width/2,-r.height/2,r.width-r.borderWidth,r.height-r.borderWidth,r.borderRadius).fill(),e.restore()):"parallelogram"===r.spClass?(e.save(),e.translate(r.left+r.width/2,r.top+r.height/2),e.transform(1,0,-12/r.height,1,0,0),e.roundRect(-r.width/2,-r.height/2,r.width-r.borderWidth,r.height-r.borderWidth,r.borderRadius).fill(),e.restore()):"custom"===r.spClass?(e.save(),e.strokeStyle=r.borderColor,e.lineCap="round",e.roundRect(r.left,r.top,r.width,r.height,r.borderRadius).stroke(),e.beginPath(),e.moveTo(r.left+2,r.top+2),e.lineTo(r.left+r.width-2,r.top+r.height-2),e.moveTo(r.left+2,r.top+r.height-2),e.lineTo(r.left+r.width-2,r.top+2),e.closePath(),e.stroke(),e.restore()):e.roundRect(r.left,r.top,r.width,r.height,r.borderRadius).fill(),"custom"!==r.spClass&&(e.strokeStyle=r.borderColor,e.lineWidth=0!==r.borderWidth?r.borderWidth:.1,e.stroke())}e.restore()},_analyseLine:function(e,t){var o=e.querySelector("path[stroke-linecap]"),r=o.getAttribute("marker-end"),a={color:o.getAttribute("stroke"),lineWidth:o.getAttribute("stroke-width")*t,lineCap:"round",noArrow:!r||null==r},i=o.style.strokeDasharray;a.lineDash=i&&null!=i;for(var l=o.getAttribute("d"),n=l.substring(2,l.length).split(/[L|Q]/),s=[],h=0;h<n.length;++h){n[h]=n[h].replace(/^\s+|\s+$/gm,"");var d=n[h].split(" ");2===d.length?s.push({x:parseFloat(d[0])*t,y:parseFloat(d[1])*t}):s.push({x:parseFloat(d[0])*t,y:parseFloat(d[1])*t,dX:parseFloat(d[2])*t,dY:parseFloat(d[3])*t})}a.points=s;var p=s.length,c=s[p-1].x-s[p-2].x,f=s[p-1].y-s[p-2].y;return a.angle=Math.atan2(f,c),a},renderLines:function(e,t){for(var o in t){var r=t[o];e.save(),e.setLineDash(r.lineDash?[2,3]:[]),e.strokeStyle=r.color,e.lineWidth=r.lineWidth,e.lineCap=r.lineCap;var a=r.points;e.beginPath(),e.moveTo(a[0].x,a[0].y);for(var i=1;i<a.length;++i)if(a[i].dX){var l=a[i].y===a[i].dY?Math.abs(a[i].x-a[i].dX):Math.abs(a[i].y-a[i].dY);e.arcTo(a[i].x,a[i].y,a[i].dX,a[i].dY,l),e.moveTo(a[i].dX,a[i].dY)}else e.lineTo(a[i].x,a[i].y),i!==a.length-1&&e.moveTo(a[i].x,a[i].y);e.closePath(),e.stroke(),r.noArrow||(e.translate(a[a.length-1].x,a[a.length-1].y),e.rotate(r.angle),e.fillStyle=r.color,e.beginPath(),e.moveTo(1*r.lineWidth,0),e.lineTo(-6*r.lineWidth,-3*r.lineWidth),e.lineTo(-6*r.lineWidth,3*r.lineWidth),e.lineTo(1*r.lineWidth,0),e.closePath(),e.fill()),e.restore()}},_clearMap:function(e){e.getContext("2d").clearRect(0,0,parseInt(e.getAttribute("width")),parseInt(e.getAttribute("height")));var t=e.nextSibling;t&&null!=t&&"viewbox"===t.className&&(t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%")}},d={flag:"navmap",initFuncName:"canvasExtend",methods:{canvasExtend:function(){h.canvasExtend()},_locateViewBox:function(e){var t=this.prop.$navMap.querySelector(".viewbox"),o=this.$refs.$workArea.parentNode,r=o.scrollLeft*e,a=o.scrollTop*e;t.style.left=r+"px",t.style.top=a+"px",t.style.width=o.clientWidth*e+"px",t.style.height=o.clientHeight*e+"px"},refreshMap:function(){var e=this.prop.$navMap.querySelector("canvas"),t=e.getContext("2d");h._clearMap(e);var o=this._buildWorkSize();if(o.haveData){var r=e.width/o.width>e.height/o.height?e.height/o.height:e.width/o.width;this.prop.$navMap.dataset.scale=""+r;for(var a={},i=this.$refs.$group.querySelectorAll(".GooFlow_area"),l=0;l<i.length;++l)a[i[l].id]=h._analyseArea(i[l]);h.renderAreas(t,a,r);for(var n={},s=this.$refs.$paper.querySelectorAll(".GooFlow_memo"),d=0;d<s.length;++d)n[s[d].id]=h._analyseMemo(s[d],r);h.renderMemos(t,n);for(var p={},c=this.$refs.$workArea.querySelectorAll(".GooFlow_item"),f=0;f<c.length;++f)p[c[f].id]=h._analyseNode(c[f],r);h.renderNodes(t,p);for(var u={},g=this.$refs.$draw.querySelectorAll("g"),m=0;m<g.length;++m)"GooFlow_tmp_line"!==g[m].getAttribute("tid")&&(u[g[m].id]=h._analyseLine(g[m],r));h.renderLines(t,u),this._locateViewBox(r)}},_initNavMap:function(e){if(e&&null!=e&&""!==e)if(this.prop.$navMap=document.querySelector(e),this.prop.$navMap&&null!=this.prop.$navMap){var t=this.prop.$navMap.clientWidth,o=this.prop.$navMap.clientHeight;this.prop.$navMap.className="GooFlow_nav_map",this.prop.$navMap.style.width=t+"px",this.prop.$navMap.style.height=o+"px",this.prop.$navMap.setAttribute("unselectable","on"),this.prop.$navMap.setAttribute("onselectstart","return false"),this.prop.$navMap.setAttribute("onselect","document.selection.empty()");var r=document.createElement("canvas");r.className="map",r.width=t,r.height=o,this.prop.$navMap.appendChild(r),(window.ActiveXObject||"ActiveXObject"in window||navigator.userAgent.indexOf("Edge")>-1)&&(r=window.G_vmlCanvasManager.initElement(r));var a=document.createElement("div");a.className="viewbox",this.prop.$navMap.appendChild(a);var i=this;this.$refs.$workArea.parentNode.addEventListener("scroll",function(e){i._locateViewBox(parseFloat(i.prop.$navMap.dataset.scale))}),this.prop.$navMap.querySelector(".viewbox").addEventListener("mousedown",function(e){this.parentNode.dataset.isDown="1";var t=n["a"].mouseP(e),o=i.$refs.$workArea.parentNode,r=t.x,a=t.y,l=o.scrollLeft,s=o.scrollTop,h=parseFloat(this.parentNode.dataset.scale);document.onmousemove=function(e){if("1"===i.prop.$navMap.dataset.isDown){e||(e=window.event);var t=n["a"].mouseP(e);if(r===t.x&&a===t.y)return!1;o.scrollLeft=l+(t.x-r)/h,o.scrollTop=s+(t.y-a)/h}},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null,i.prop.$navMap.dataset.isDown=void 0}})}else delete this.prop.$navMap}}},p=o("5410"),c=o("6ed2"),f=o("f673"),u=o("9fec"),g=o("645d"),m=o("1971"),v=o("bc3a"),b=o.n(v),w=o("70e5"),y={name:"DemoNavmap",components:{GooFlow:i["a"]},data:function(){return{myProps:{id:"aaaabbb",width:"800",height:"500",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["huber","router","plug2","complex mix"],nodeCustoms:{huber:{class:"custom_huber",width:102,height:50},router:{class:"custom_router",width:115,height:52}},auth:w["a"]},global:p["a"],plugIns:[c["a"],f["a"],u["a"],g["a"],m["a"],d]}},methods:{exportDiagram:function(){this.$refs.gooFlow.exportDiagram("myFlow")}},mounted:function(){var e=this.$refs.gooFlow;b.a.get("./static/demo/child.json",{},{headers:{"Content-Type":"application/json"}}).then(function(t){e.loadData(t)}),e.bindOperEvent({onPrintClick:function(){e.print()},onBtnSaveClick:function(){e.exportDiagram("myFlow")}})}},x=y,_=(o("7e75"),o("2877")),C=Object(_["a"])(x,r,a,!1,null,null,null);C.options.__file="DemoNavmap.vue";t["default"]=C.exports},"7e75":function(e,t,o){"use strict";var r=o("e714"),a=o.n(r);a.a},8465:function(e,t,o){"use strict";
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/t["a"]=function(){CanvasRenderingContext2D.prototype.roundRect=function(e,t,o,r,a){return o<2*a&&(a=o/2),r<2*a&&(a=r/2),this.beginPath(),this.moveTo(e+a,t),this.arcTo(e+o,t,e+o,t+r,a),this.arcTo(e+o,t+r,e,t+r,a),this.arcTo(e,t+r,e,t,a),this.arcTo(e,t,e+o,t,a),this.closePath(),this},CanvasRenderingContext2D.prototype.BezierEllipse=function(e,t,o,r){var a=.5522848,i=o*a,l=r*a;return this.beginPath(),this.moveTo(e-o,t),this.bezierCurveTo(e-o,t-l,e-i,t-r,e,t-r),this.bezierCurveTo(e+i,t-r,e+o,t-l,e+o,t),this.bezierCurveTo(e+o,t+l,e+i,t+r,e,t+r),this.bezierCurveTo(e-i,t+r,e-o,t+l,e-o,t),this.closePath(),this}}},df71:function(e,t,o){t=e.exports=o("2350")(!1),t.i(o("2d1f"),""),t.push([e.i,"\n.GooFlow .ico_huber{background:url(/static/img/gooflow_icon.png) no-repeat -116px -45px\n}\n.GooFlow .ico_huber,.GooFlow .ico_router{opacity:1!important;filter:Alpha(Opacity=100)!important\n}\n.GooFlow .ico_router{background:url(/static/img/gooflow_icon.png) no-repeat -97px -45px\n}\n.GooFlow .custom_huber{background:url(/static/img/gooflow_icon.png) no-repeat -1px -84px\n}\n.GooFlow .custom_huber,.GooFlow .custom_router{opacity:1!important;filter:Alpha(Opacity=100)!important\n}\n.GooFlow .custom_router{background:url(/static/img/gooflow_icon.png) no-repeat -106px -83px\n}\n.GooFlow .ico_plug2{background:url(/static/img/gooflow_icon.png) no-repeat -135px -45px;opacity:1!important;filter:Alpha(Opacity=100)!important\n}",""])},e714:function(e,t,o){var r=o("df71");"string"===typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);var a=o("499e").default;a("621bf4f8",r,!0,{sourceMap:!1,shadowMode:!1})}}]);