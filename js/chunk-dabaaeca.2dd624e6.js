(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dabaaeca","chunk-2d0b90a5","chunk-2d22d9c9"],{"30f8":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",[r("Button",{attrs:{type:"primary",icon:"ios-search"},on:{click:e.handleSearch}},[e._v(e._s(e.$t("search")))]),r("Button",{on:{click:e.handleReset}},[e._v(e._s(e.$t("reset")))])],1)},a=[],o={name:"search-button",props:{params:{type:Object,required:!0}},methods:{handleSearch:function(){this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")},handleReset:function(){this.$emit("reset"),this.params.pageNumber=1,this.params.pageSize=10,this.$emit("getList")}}},i=o,l=r("2877"),n=Object(l["a"])(i,s,a,!1,null,null,null);n.options.__file="search-button.vue";t["default"]=n.exports},8449:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"backupServer"},[r("Row",[r("Col",[r("Card",[r("Row",[r("Form",{ref:"backupServerForm",attrs:{model:e.backupServerForm,inline:"","label-width":60}},[r("FormItem",{attrs:{label:e.$t("key"),prop:"name"}},[r("Input",{staticStyle:{width:"200px"},attrs:{type:"text",clearable:"",placeholder:e.$t("areaConfig.searchTip")},model:{value:e.backupServerForm.name,callback:function(t){e.$set(e.backupServerForm,"name",t)},expression:"backupServerForm.name"}})],1),r("FormItem",{staticClass:"br",staticStyle:{"margin-left":"-35px"}},[r("search-button",{attrs:{params:e.backupServerForm},on:{reset:e.reset,getList:e.getBackupServerList}})],1)],1)],1),r("table-grid",{attrs:{loading:e.loading,columns:e.columns,data:e.data,total:e.total,delAllUrl:e.delUrl,params:e.backupServerForm,exportUrl:e.exportUrl,exportFromId:e.exportFromId},on:{getList:e.getBackupServerList,add:e.add}})],1)],1)],1),r("Modal",{attrs:{title:e.modalTitle,width:500},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[r("Form",{ref:"serverForm",attrs:{model:e.serverForm,"label-width":80,rules:e.serverFormValidate}},[r("FormItem",{attrs:{label:e.$t("backupServer.serverName"),prop:"name"}},[r("Input",{attrs:{placeholder:e.$t("backupServer.serverNameTip"),autocomplete:"off"},model:{value:e.serverForm.name,callback:function(t){e.$set(e.serverForm,"name",t)},expression:"serverForm.name"}})],1),r("FormItem",{attrs:{label:e.$t("backupServer.serverIp"),prop:"ip"}},[r("Input",{attrs:{placeholder:e.$t("backupServer.serverIpTip"),autocomplete:"off"},model:{value:e.serverForm.ip,callback:function(t){e.$set(e.serverForm,"ip",t)},expression:"serverForm.ip"}})],1),r("FormItem",{attrs:{label:e.$t("backupServer.serverPort"),prop:"port"}},[r("Input",{attrs:{placeholder:e.$t("backupServer.serverPortTip"),autocomplete:"off"},model:{value:e.serverForm.port,callback:function(t){e.$set(e.serverForm,"port",t)},expression:"serverForm.port"}})],1),r("FormItem",{attrs:{label:e.$t("backupServer.serverUserName"),prop:"userName"}},[r("Input",{attrs:{placeholder:e.$t("backupServer.serverUserNameTip"),autocomplete:"off"},model:{value:e.serverForm.userName,callback:function(t){e.$set(e.serverForm,"userName",t)},expression:"serverForm.userName"}})],1),0===this.modalType?r("span",[r("FormItem",{attrs:{label:e.$t("backupServer.serverPassword"),prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:e.$t("backupServer.serverPasswordTip"),autocomplete:"off"},model:{value:e.serverForm.password,callback:function(t){e.$set(e.serverForm,"password",t)},expression:"serverForm.password"}})],1)],1):e._e(),r("FormItem",{attrs:{label:e.$t("backupServer.serverProtocal"),prop:"protocal"}},[r("Select",{staticStyle:{width:"180px"},attrs:{placeholder:e.$t("backupServer.serverProtocalTip"),clearable:""},model:{value:e.serverForm.protocal,callback:function(t){e.$set(e.serverForm,"protocal",t)},expression:"serverForm.protocal"}},e._l(e.protocalList,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:e.cancelServer}},[e._v(e._s(e.$t("cancel")))]),r("Button",{attrs:{type:"primary",loading:e.submitLoading},on:{click:e.submitServer}},[e._v(e._s(e.$t("submit")))])],1)],1),r("Modal",{attrs:{title:e.modalPassTitle,width:400},model:{value:e.modalPassVisible,callback:function(t){e.modalPassVisible=t},expression:"modalPassVisible"}},[r("Form",{ref:"passForm",attrs:{model:e.passForm,"label-width":110,rules:e.passFormValidate}},[r("FormItem",{attrs:{label:e.$t("oldPass"),prop:"oldPassword"}},[r("Input",{attrs:{type:"password",placeholder:e.$t("oldPassTip"),autocomplete:"off"},model:{value:e.passForm.oldPassword,callback:function(t){e.$set(e.passForm,"oldPassword",t)},expression:"passForm.oldPassword"}})],1),r("FormItem",{attrs:{label:e.$t("newPass"),prop:"newPassword"}},[r("Input",{attrs:{type:"password",placeholder:e.$t("newPassTip"),autocomplete:"off"},model:{value:e.passForm.newPassword,callback:function(t){e.$set(e.passForm,"newPassword",t)},expression:"passForm.newPassword"}})],1),r("FormItem",{attrs:{label:e.$t("confirmPass"),prop:"confirmPassword"}},[r("Input",{attrs:{type:"password",placeholder:e.$t("confirmPassTip"),autocomplete:"off"},model:{value:e.passForm.confirmPassword,callback:function(t){e.$set(e.passForm,"confirmPassword",t)},expression:"passForm.confirmPassword"}})],1)],1),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"text"},on:{click:e.cancelPass}},[e._v(e._s(e.$t("cancel")))]),r("Button",{attrs:{type:"primary",loading:e.submitPassLoading},on:{click:e.submitPass}},[e._v(e._s(e.$t("submit")))])],1)],1)],1)},a=[],o=(r("7f7f"),r("ade3")),i=r("f7df"),l=r("30f8"),n=r("365c"),c={name:"backup-server",components:{"table-grid":i["default"],"search-button":l["default"]},data:function(){var e,t=this,r=function(e,r,s){""===r?s(new Error(t.$t("oldPassTip"))):r!==t.originalPass?s(new Error(t.$t("oldPassValid"))):s()},s=function(e,r,s){""===r?s(new Error(t.$t("confirmPassTip"))):r!==t.passForm.newPassword?s(new Error(t.$t("twoPassValid"))):s()};return e={backupServerForm:{name:"",pageNumber:1,pageSize:10,sort:"createTime",order:"desc"},loading:!1,total:0,data:[],columns:[{type:"selection",width:60,align:"center"},{type:"index",width:60,align:"center"},{title:this.$t("backupServer.serverName"),key:"name",align:"center",width:160},{title:this.$t("backupServer.serverIp"),key:"ip",align:"center",width:130},{title:this.$t("backupServer.serverPort"),key:"port",align:"center",width:70},{title:this.$t("backupServer.serverUserName"),key:"userName",align:"center",width:110},{title:this.$t("backupServer.serverProtocal"),key:"protocal",align:"center",width:90},{title:this.$t("createTime"),key:"createTime",sortable:!0,align:"center",width:170,sortType:"desc"},{title:this.$t("operation"),key:"action",align:"center",render:function(e,r){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.edit(r.row)}}},t.$t("edit")),e("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.remove(r.row)}}},t.$t("delete")),e("Button",{props:{icon:"ios-key",type:"warning",size:"small"},attrs:{title:t.$t("changePass")},on:{click:function(){t.modifyPass(r.row)}}},t.$t("changePass"))])}}],delUrl:"/backup/web/backup/server/delByIds",exportUrl:"/backup/web/backup/server/export",exportFromId:"backup-server",submitLoading:!1,serverForm:{ip:"",port:"",name:"",userName:"",password:"",protocal:""},serverFormValidate:{ip:[{required:!0,message:this.$t("backupServer.serverIpValid"),trigger:"blur"},{pattern:/^(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])\.(\d{1,2}|1\d\d|2[0-4]\d|25[0-5])$/,message:this.$t("backupServer.serverIpFormatValid"),trigger:"blur"}],port:[{required:!0,message:this.$t("backupServer.serverPortValid"),trigger:"blur"}],name:[{required:!0,message:this.$t("backupServer.serverNameValid"),trigger:"blur"}],userName:[{required:!0,message:this.$t("backupServer.serverUserNameValid"),trigger:"blur"}],password:[{required:!0,message:this.$t("backupServer.serverPasswordValid"),trigger:"blur"}],protocal:[{required:!0,message:this.$t("backupServer.serverProtocalValid"),trigger:"blur"}]},modalTitle:"",modalVisible:!1},Object(o["a"])(e,"submitLoading",!1),Object(o["a"])(e,"modalType",0),Object(o["a"])(e,"protocalList",[{value:"ssh",label:"ssh"},{value:"telnet",label:"telnet"},{value:"ftp",label:"ftp"}]),Object(o["a"])(e,"modalPassTitle",this.$t("changePass")),Object(o["a"])(e,"modalPassVisible",!1),Object(o["a"])(e,"submitPassLoading",!1),Object(o["a"])(e,"modifyPassId",""),Object(o["a"])(e,"originalPass",""),Object(o["a"])(e,"passForm",{oldPassword:"",newPassword:"",confirmPassword:""}),Object(o["a"])(e,"passFormValidate",{oldPassword:[{validator:r,trigger:"blur"}],newPassword:[{required:!0,message:this.$t("newPassTip"),trigger:"blur"}],confirmPassword:[{validator:s,trigger:"blur"}]}),e},methods:{init:function(){this.getBackupServerList()},getBackupServerList:function(){var e=this;this.loading=!0,Object(n["S"])(this.backupServerForm).then(function(t){e.loading=!1,0===t.code&&(e.data=t.content.content,e.total=t.content.totalElements)})},reset:function(){this.$refs.backupServerForm.resetFields()},add:function(){this.modalType=0,this.modalTitle=this.$t("backupServer.addServer"),this.$refs.serverForm.resetFields(),this.serverForm.password="",this.modalVisible=!0},edit:function(e){for(var t in this.modalType=1,this.modalTitle=this.$t("backupServer.editServer"),this.$refs.serverForm.resetFields(),e)null===e[t]&&(e[t]="");var r=JSON.stringify(e),s=JSON.parse(r);this.serverForm=s,this.modalVisible=!0},remove:function(e){var t=this;this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("backupServer.confirmDeleteServer")+" "+e.name+"?",onOk:function(){var r={ids:e.id};Object(n["p"])(t.delUrl,r).then(function(e){0===e.code&&(t.$Message.success(t.$t("deleteSuccess")),t.getBackupServerList())})}})},cancelServer:function(){this.modalVisible=!1},submitServer:function(){var e=this;this.$refs.serverForm.validate(function(t){t&&(e.submitLoading=!0,0===e.modalType&&delete e.serverForm.id,Object(n["Cb"])(e.serverForm).then(function(t){e.submitLoading=!1,0===t.code&&(e.$Message.success(e.$t("operationSuccess")),e.getBackupServerList(),e.modalVisible=!1)}))})},modifyPass:function(e){this.$refs.passForm.resetFields(),this.modifyPassId=e.id,this.originalPass=e.password,this.modalPassVisible=!0},cancelPass:function(){this.modalPassVisible=!1},submitPass:function(){var e=this;this.$refs.passForm.validate(function(t){if(t){e.submitPassLoading=!0;var r={id:e.modifyPassId,password:e.passForm.oldPassword,newPass:e.passForm.newPassword};Object(n["vb"])(r).then(function(t){e.submitPassLoading=!1,0===t.code&&(e.$Message.success(e.$t("operationSuccess")),e.getBackupServerList(),e.modalPassVisible=!1)})}})}},mounted:function(){this.init()}},d=c,p=r("2877"),m=Object(p["a"])(d,s,a,!1,null,null,null);m.options.__file="backupServer.vue";t["default"]=m.exports},f7df:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Row",{staticClass:"br",staticStyle:{"margin-bottom":"2vh"}},[this.tableAdd?r("span",[r("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:e.add}},[e._v(e._s(e.$t("add")))])],1):e._e(),this.tableDelAll?r("span",[r("Button",{attrs:{type:"error",icon:"md-trash"},on:{click:e.delAll}},[e._v(e._s(e.$t("batchDelete")))])],1):e._e(),this.tableRefresh?r("span",[r("Button",{attrs:{type:"success",icon:"md-refresh"},on:{click:e.refresh}},[e._v(e._s(e.$t("refresh")))])],1):e._e(),""!==this.exportFromId?r("span",[r("export-button",{attrs:{exportParams:e.params,exportUrl:e.exportUrl,exportFromId:e.exportFromId}})],1):e._e()]),r("Row",[this.tableDelAll?r("span",[r("Alert",{attrs:{"show-icon":""}},[e._v("\n                "+e._s(e.$t("hasSelected"))+" "),r("span",{staticClass:"select-count"},[e._v(e._s(e.selectCount))]),e._v(" "+e._s(e.$t("items"))+"\n                "),r("a",{staticClass:"select-clear",on:{click:e.clearSelectAll}},[e._v(e._s(e.$t("clear")))])])],1):e._e()]),r("Row",[r("Table",{ref:"table",attrs:{loading:e.loading,border:"",columns:e.columns,data:e.data,sortable:"custom"},on:{"on-sort-change":e.changeSort,"on-selection-change":e.showSelect,"on-row-dblclick":e.dblclick}})],1),r("Row",{staticClass:"page",attrs:{type:"flex",justify:"end"}},[r("Page",{attrs:{current:e.pageNumber,total:e.total,"page-size":e.pageSize,"page-size-opts":[10,20,50],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)},a=[],o=(r("ac6a"),r("f3e2"),r("c5f6"),r("365c")),i=r("3eac"),l={name:"table-grid",components:{"export-button":i["default"]},data:function(){return{pageNumber:1,pageSize:10,selectCount:0,selectList:[]}},props:{loading:{type:Boolean,required:!0},columns:{type:Array,required:!0},data:{type:Array,required:!0},total:{type:Number,required:!0},delAllUrl:{type:String,default:""},params:{type:Object,required:!0},exportUrl:{type:String,default:""},exportFromId:{type:String,default:""},tableAdd:{type:Boolean,default:!0},tableDelAll:{type:Boolean,default:!0},tableRefresh:{type:Boolean,default:!0}},methods:{add:function(){this.$emit("add")},delAll:function(){var e=this;""!==this.delAllUrl?this.selectCount<=0?this.$Message.warning(this.$t("deleteTip")):this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("deleteContent1")+this.selectCount+this.$t("deleteContent2")+"？",onOk:function(){var t="";e.selectList.forEach(function(e){t+=e.id+","}),t=t.substring(0,t.length-1);var r={ids:t};Object(o["p"])(e.delAllUrl,r).then(function(t){0===t.code&&(e.$Message.success(e.$t("deleteSuccess")),e.clearSelectAll(),e.$emit("getList"))})}}):this.$Message.warning(this.$t("deleteInvalidTip"))},refresh:function(){this.$emit("getList")},clearSelectAll:function(){this.$refs.table.selectAll(!1)},changeSort:function(e){this.params.sort=e.key,this.params.order=e.order,"normal"===e.order&&(this.params.order=""),this.$emit("getList")},showSelect:function(e){this.selectList=e,this.selectCount=e.length},changePage:function(e){this.params.pageNumber=e,this.$emit("getList"),this.clearSelectAll()},changePageSize:function(e){this.params.pageSize=e,this.$emit("getList")},dblclick:function(e,t,r){this.$emit("dblclick",e)}}},n=l,c=r("2877"),d=Object(c["a"])(n,s,a,!1,null,null,null);d.options.__file="table-grid.vue";t["default"]=d.exports}}]);