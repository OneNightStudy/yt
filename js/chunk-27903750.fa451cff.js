(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27903750","chunk-562c4a02"],{"0bb0":function(e,t,a){"use strict";var n=a("0d7e"),r=a.n(n);r.a},"0d7e":function(e,t,a){var n=a("bd56");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("499e").default;r("77697f48",n,!0,{sourceMap:!1,shadowMode:!1})},"99d3":function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r}),a.d(t,"c",function(){return i});a("7f7f");var n=function(e){var t;switch(e.type){case 0:t="开始";break;case 1:t="结束";break;case 2:t="指令";break;case 3:t="指标";break;case 4:t="数据";break;case 5:t="报告";break;case 6:t="判断";break;case 7:t="循环";break;case 8:t="触发";break;default:break}return t},r=function(e){var t=e;switch(t.type){case 2:t.type="指令节点";break;case 3:t.type="指标节点";break;case 4:t.type="数据处理节点";break;case 5:t.type="循环节点";break;case 6:t.type="判断节点";break;case 7:t.type="报告节点";break;case 8:t.type="触发节点";break;case 9:t.type="系统变量";break;case 10:t.type="常量";break;case 11:t.type="节点属性";break;default:t.type="";break}var a=[];return a.push(""+t.type),"常量"==t.type?(t.se&&(0==parseInt(t.se.num)?a.push("字符"):1==parseInt(t.se.num)&&a.push("数值"),a.push(""+t.se.name)),a):(t.se&&a.push(""+t.se.name),t.tr&&a.push(""+t.tr.name),t.fo&&a.push(""+t.fo.name),t.fv&&a.push(""+t.fv.name),a)},i=function(e){var t={type:"",se:{},tr:{},fo:{},fv:{}};if(e.length){switch(e[0]){case"指令节点":t.type="2";break;case"指标节点":t.type="3";break;case"数据处理节点":t.type="4";break;case"循环节点":t.type="5";break;case"判断节点":t.type="6";break;case"报告节点":t.type="7";break;case"触发节点":t.type="8";break;case"系统变量":t.type="9";break;case"常量":t.type="10";break;case"节点属性":t.type="11";break;default:t.type=null;break}if("10"==t.type)return e.length>1?(t.se.name=e[1],"字符"==e[1]?(t.se.num="0",t.se.name=e[2]):"数值"==e[1]&&(t.se.num="1",t.se.name=e[2])):t.se=null,t.tr=null,t.fo=null,t.fv=null,t;e.length>1?(t.se.name=e[1],"网元变量"==e[1]||"数值"==e[1]||"开始节点"==e[1]?t.se.num="1":"循环节点"==e[1]?t.se.num="2":t.se.num="0"):t.se=null,e.length>2?(t.tr.name=e[2],"流程运行时间"==e[2]?t.tr.num="1":t.tr.num="0"):t.tr=null,e.length>3?(t.fo.name=e[3],"当前循环变量值"==e[3]?t.fo.num="1":t.fo.num="0"):t.fo=null,e.length>4?(t.fv.name=e[4],t.fv.num="0"):t.fv=null}else t.type=null;return t}},b019:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"judgeNodeForm",attrs:{model:e.judgeNodeForm,"label-width":100,id:"judgeNodeForm",rules:e.judgeNodeFormValidate}},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.judgeNodeForm.name,callback:function(t){e.$set(e.judgeNodeForm,"name",t)},expression:"judgeNodeForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.judgeNodeForm.desc,callback:function(t){e.$set(e.judgeNodeForm,"desc",t)},expression:"judgeNodeForm.desc"}})],1),a("FormItem",{attrs:{label:"逻辑运算"}},[a("div",{attrs:{id:"opTree"}},[a("my-tree",{attrs:{treeData:e.judgeNodeForm.opConditions},on:{addBrother:e.addBrother,addChild:e.addChild,deleteNode:e.deleteNode}})],1)])],1)],1)},r=[],i=(a("7f7f"),a("57e7"),a("6b54"),a("87b3"),a("6d67"),a("99d3")),o=a("f247"),l={components:{"my-tree":o["default"]},data:function(){return{type1:"",judgeNodeForm:{},judgeNodeFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}],desc:[{max:200,message:"最多输入200个字符",trigger:"blur"}]},changeData:["left","right"],baseObj:{type:"",se:{},tr:{},fo:{},fv:{}},opConditionsObj:{operator:2,compare:4,leftConstant:"",rightConstant:"",left:[],right:[],childOperator:0,childConditions:[]}}},computed:{},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeJudge?id="+e).then(function(e){if(0==e.code){var a=e.content;t.type1=Object(i["a"])(e.content),null!==a.opConditions?a.opConditions.map(function(e){t.changeBack(e)}):a.opConditions=[t.deepClone(t.opConditionsObj)],t.judgeNodeForm=a}})},getData:function(){var e=this,t=this.deepClone(this.judgeNodeForm);return t&&"[object Array]"===Object.prototype.toString.call(t.opConditions)?t.opConditions.map(function(t){e.changeFun(t)}):t.opConditions=null,t},conditionsAdd:function(e){var t=this.newNode();e.push(t)},addBrother:function(e,t){var a=this.getParentData(e.target);if(a){var n=a.indexOf(t);-1!==n&&a.splice(n+1,0,this.newNode())}},addChild:function(e,t){t.childConditions||this.$set(t,"childConditions",[]),t.childConditions.push(this.newNode())},deleteNode:function(e,t){var a=this.getParentData(e.target);if(a){var n=a.indexOf(t);-1!==n&&a.splice(n,1)}},newNode:function(){return{operator:0,compare:4,leftConstant:"",rightConstant:"",left:[],right:[],childOperator:0,childConditions:[]}},getParentData:function(e){while(e&&"BODY"!==e.tagName){if(e.__vue__&&"my-tree"===e.__vue__.$options.name)return e.__vue__.treeData;e=e.parentNode}return null},changeFun:function(e){var t=this;this.changeData.map(function(a){if(e[a]&&"[object Array]"===Object.prototype.toString.call(e[a]))if("常量"==e[a][0]){var n=t.deepClone(e[a]);n.push(e[a+"Constant"]),e[a]=Object(i["c"])(n)}else e[a]=Object(i["c"])(e[a]);else e[a]||(e[a]={});e.childConditions&&e.childConditions.length&&e.childConditions.map(function(e){console.dir(e),t.changeFun(e)})})},changeBack:function(e){var t=this;this.changeData.map(function(a){if(e[a]&&"[object Object]"===Object.prototype.toString.call(e[a])){var n=Object(i["b"])(e[a]);"常量"==n[0]?(e[a+"Constant"]=n[2],e[a]=t.deepClone(n),e[a].splice(2,1)):e[a]=n}else e[a]||(e[a]=[]);e.childConditions&&e.childConditions.length&&e.childConditions.map(function(e){console.dir(e),t.changeBack(e)})})}}},s=l,d=a("2877"),c=Object(d["a"])(s,n,r,!1,null,null,null);c.options.__file="judge.vue";t["default"]=c.exports},bd56:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"\n.my-tree{width:100%\n}\n.my-tree .w100{width:100px\n}\n.my-tree .w200{width:200px\n}\n.my-tree .brother{display:flex;flex-direction:column\n}\n.my-tree .childConditions{margin-top:20px;display:flex\n}\n.my-tree .childConditions .childOperator{flex:0 0 130px\n}\n.my-tree .judgeTitle{background:#eee\n}\n.my-tree .judgeSet{display:flex;justify-content:flex-start;align-items:flex-end;padding:10px 0\n}\n.my-tree .judgeSet>div{flex:0 0 200px;text-align:center\n}\n.my-tree .judgeSet>div>div{text-align:left\n}\n.my-tree .judgeSet .judgeSetOne{flex:0 0 80px\n}\n.my-tree .judgeSet .judgeSetThree{flex:0 0 100px\n}\n.my-tree .judgeSet .judgeSetTwo{flex:0 0 300px\n}\n.my-tree .judgeSet .judgeSetFour{flex:0 1 400px\n}\n.my-tree .judgeSet .judgeSetFive{flex:0 0 100px\n}",""])},f247:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"my-tree"},e._l(e.treeData,function(t,n){return a("div",{key:n,staticClass:"brother"},[a("div",{staticClass:"judgeTJ"},[a("div",{directives:[{name:"show",rawName:"v-show",value:0==n,expression:"idx==0"}],staticClass:"judgeSet judgeTitle"},[e._m(0,!0),a("div",{staticClass:"judgeSetTwo"},[e._v("比较项")]),a("div",{staticClass:"judgeSetThree"},[e._v("比较符号")]),a("div",{staticClass:"judgeSetFour"},[e._v("比较项")]),a("div",{staticClass:"judgeSetfive"})])]),a("div",{staticClass:"judgeSet",class:"judge-"+n},[a("div",{staticClass:"judgeSetOne"},[a("Select",{directives:[{name:"show",rawName:"v-show",value:0!=n,expression:"idx!=0"}],staticStyle:{width:"80px"},attrs:{clearable:"",placeholder:"and/or"},model:{value:t.operator,callback:function(a){e.$set(t,"operator",a)},expression:"data.operator"}},e._l(e.operatorArray,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("div",{staticClass:"judgeSetTwo"},[a("Cascader",{class:["常量"==t.left[0]?"w100":"w200"],staticStyle:{display:"inline-block"},attrs:{data:e.getProcessArray,"render-format":e.format,clearable:"",filterable:"",placeholder:"支持输入筛选"},model:{value:t.left,callback:function(a){e.$set(t,"left",a)},expression:"data.left"}}),"常量"==t.left[0]?a("Input",{staticClass:"inputLeft",staticStyle:{display:"inline-block",width:"100px"},model:{value:t.leftConstant,callback:function(a){e.$set(t,"leftConstant",a)},expression:"data.leftConstant"}}):e._e()],1),a("div",{staticClass:"judgeSetThree"},[a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},model:{value:t.compare,callback:function(a){e.$set(t,"compare",a)},expression:"data.compare"}},e._l(e.compareArray,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("div",{staticClass:"judgeSetFour"},[a("Cascader",{class:["常量"==t.right[0]?"w100":"w200"],staticStyle:{display:"inline-block"},attrs:{data:e.getProcessArray,"render-format":e.format,clearable:"",filterable:"",placeholder:"支持输入筛选"},model:{value:t.right,callback:function(a){e.$set(t,"right",a)},expression:"data.right"}}),"常量"==t.right[0]?a("Input",{staticClass:"inputRight",staticStyle:{display:"inline-block",width:"100px"},model:{value:t.rightConstant,callback:function(a){e.$set(t,"rightConstant",a)},expression:"data.rightConstant"}}):e._e()],1),a("div",{staticClass:"judgeSetfive"},[a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.$emit("addBrother",a,t)}}},[e._v("添加同级")]),a("Button",{attrs:{type:"primary",size:"small"},on:{click:function(a){a.stopPropagation(),e.$emit("addChild",a,t)}}},[e._v("添加下级")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(a){a.stopPropagation(),e.$emit("deleteNode",a,t)}}},[e._v("删除")])],1)]),t.childConditions&&t.childConditions.length?a("div",{staticClass:"childConditions"},[a("div",{staticClass:"childOperator"},[a("Select",{staticStyle:{width:"80px"},attrs:{clearable:""},model:{value:t.childOperator,callback:function(a){e.$set(t,"childOperator",a)},expression:"data.childOperator"}},e._l(e.operatorArray,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),a("my-tree",{attrs:{treeData:t.childConditions},on:{addBrother:e.addBrother,addChild:e.addChild,deleteNode:e.deleteNode}})],1):e._e()])}))},r=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"judgeSetOne"},[a("span",[e._v("关系符号")])])}],i={name:"my-tree",props:{treeData:{type:Array,default:function(){return[{operator:2,compare:4,left:[],right:[],childOperator:0,childConditions:[]}]}}},data:function(){return{getBcArray:[],operatorArray:[{value:0,label:"and"},{value:1,label:"or"}],compareArray:[{value:0,label:">大于"},{value:1,label:">=大于等于"},{value:2,label:"<小于"},{value:3,label:"<=小于等于"},{value:4,label:"=等于"},{value:5,label:"<>不等于"},{value:7,label:"Like包含"},{value:8,label:"Not Like不包含"}]}},computed:{getProcessArray:function(){return this.$store.state.yt.processArray}},methods:{format:function(e,t){if(e&&e.length>=1){var a=e.length-1;return 0==a?e[a]:e[a-1]+" / "+e[a]}},addBrother:function(e,t){this.$emit("addBrother",e,t)},addChild:function(e,t){this.$emit("addChild",e,t)},deleteNode:function(e,t){this.$emit("deleteNode",e,t)}}},o=i,l=(a("0bb0"),a("2877")),s=Object(l["a"])(o,n,r,!1,null,null,null);s.options.__file="myTree.vue";t["default"]=s.exports}}]);