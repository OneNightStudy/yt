(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4201762b"],{"365c":function(t,e,n){"use strict";n.d(e,"ub",function(){return r}),n.d(e,"Mb",function(){return o}),n.d(e,"Nb",function(){return a}),n.d(e,"j",function(){return u}),n.d(e,"Kb",function(){return i}),n.d(e,"tb",function(){return d}),n.d(e,"c",function(){return b}),n.d(e,"z",function(){return m}),n.d(e,"A",function(){return s}),n.d(e,"v",function(){return p}),n.d(e,"s",function(){return f}),n.d(e,"G",function(){return l}),n.d(e,"nb",function(){return k}),n.d(e,"b",function(){return h}),n.d(e,"x",function(){return g}),n.d(e,"Ib",function(){return w}),n.d(e,"y",function(){return j}),n.d(e,"r",function(){return O}),n.d(e,"F",function(){return v}),n.d(e,"a",function(){return y}),n.d(e,"w",function(){return I}),n.d(e,"q",function(){return F}),n.d(e,"kb",function(){return C}),n.d(e,"ob",function(){return $}),n.d(e,"o",function(){return D}),n.d(e,"n",function(){return B}),n.d(e,"M",function(){return S}),n.d(e,"Bb",function(){return x}),n.d(e,"D",function(){return L}),n.d(e,"S",function(){return T}),n.d(e,"Cb",function(){return P}),n.d(e,"vb",function(){return A}),n.d(e,"E",function(){return _}),n.d(e,"N",function(){return R}),n.d(e,"Hb",function(){return N}),n.d(e,"ab",function(){return J}),n.d(e,"J",function(){return M}),n.d(e,"R",function(){return z}),n.d(e,"O",function(){return E}),n.d(e,"Q",function(){return K}),n.d(e,"lb",function(){return q}),n.d(e,"jb",function(){return G}),n.d(e,"ib",function(){return H}),n.d(e,"W",function(){return Q}),n.d(e,"Eb",function(){return U}),n.d(e,"Y",function(){return V}),n.d(e,"qb",function(){return W}),n.d(e,"H",function(){return X}),n.d(e,"zb",function(){return Y}),n.d(e,"C",function(){return Z}),n.d(e,"X",function(){return tt}),n.d(e,"db",function(){return et}),n.d(e,"bb",function(){return nt}),n.d(e,"Fb",function(){return ct}),n.d(e,"Gb",function(){return rt}),n.d(e,"cb",function(){return ot}),n.d(e,"I",function(){return at}),n.d(e,"K",function(){return ut}),n.d(e,"e",function(){return it}),n.d(e,"d",function(){return dt}),n.d(e,"f",function(){return bt}),n.d(e,"g",function(){return mt}),n.d(e,"pb",function(){return st}),n.d(e,"P",function(){return pt}),n.d(e,"L",function(){return ft}),n.d(e,"Ab",function(){return lt}),n.d(e,"U",function(){return kt}),n.d(e,"V",function(){return ht}),n.d(e,"rb",function(){return gt}),n.d(e,"T",function(){return wt}),n.d(e,"Db",function(){return jt}),n.d(e,"yb",function(){return Ot}),n.d(e,"Jb",function(){return vt}),n.d(e,"l",function(){return yt}),n.d(e,"i",function(){return It}),n.d(e,"k",function(){return Ft}),n.d(e,"h",function(){return Ct}),n.d(e,"t",function(){return $t}),n.d(e,"Lb",function(){return Dt}),n.d(e,"hb",function(){return Bt}),n.d(e,"Z",function(){return St}),n.d(e,"m",function(){return xt}),n.d(e,"u",function(){return Lt}),n.d(e,"B",function(){return Tt}),n.d(e,"mb",function(){return Pt}),n.d(e,"sb",function(){return At}),n.d(e,"fb",function(){return _t}),n.d(e,"gb",function(){return Rt}),n.d(e,"eb",function(){return Nt}),n.d(e,"p",function(){return Jt}),n.d(e,"xb",function(){return Mt}),n.d(e,"wb",function(){return zt});var c=n("7f80"),r=function(t){return Object(c["d"])("/auth/web/login",t)},o=function(t){return Object(c["c"])("/auth/web/user/info",t)},a=function(t){return Object(c["d"])("/auth/web/user/edit",t)},u=function(t){return Object(c["d"])("/auth/web/user/modifyPass",t)},i=function(t){return Object(c["d"])("/auth/web/user/unlock",t)},d=function(t){return Object(c["c"])("/auth/web/user/getByCondition",t)},b=function(t){return Object(c["d"])("/auth/web/user/admin/add",t)},m=function(t){return Object(c["d"])("/auth/web/user/admin/edit",t)},s=function(t,e){return Object(c["d"])("/auth/web/user/admin/enable/".concat(t),e)},p=function(t,e){return Object(c["d"])("/auth/web/user/admin/disable/".concat(t),e)},f=function(t){return Object(c["a"])("/auth/web/user/delByIds",t)},l=function(t){return Object(c["c"])("/auth/web/role/getAllList",t)},k=function(t){return Object(c["c"])("/auth/web/role/getAllByPage",t)},h=function(t){return Object(c["d"])("/auth/web/role/save",t)},g=function(t){return Object(c["d"])("/auth/web/role/edit",t)},w=function(t){return Object(c["d"])("/auth/web/role/setDefault",t)},j=function(t,e){return Object(c["d"])("/auth/web/role/editRolePerm/".concat(t),e)},O=function(t){return Object(c["a"])("/auth/web/role/delAllByIds",t)},v=function(t){return Object(c["c"])("/auth/web/permission/getAllList",t)},y=function(t){return Object(c["d"])("/auth/web/permission/add",t)},I=function(t){return Object(c["d"])("/auth/web/permission/edit",t)},F=function(t){return Object(c["a"])("/auth/web/permission/delByIds",t)},C=function(t){return Object(c["c"])("/common/web/log/getAllByPage",t)},$=function(t){return Object(c["c"])("/common/web/log/search",t)},D=function(t,e){return Object(c["a"])("/common/web/log/delByIds/".concat(t),e)},B=function(t){return Object(c["a"])("/common/web/log/delAll",t)},S=function(t){return Object(c["d"])("/backup/web/backup/device/getByPage",t)},x=function(t){return Object(c["d"])("/backup/web/backup/device/save",t)},L=function(t){return Object(c["c"])("/backup/web/backup/device/getAll",t)},T=function(t){return Object(c["d"])("/backup/web/backup/server/getByPage",t)},P=function(t){return Object(c["d"])("/backup/web/backup/server/save",t)},A=function(t){return Object(c["d"])("/backup/web/backup/server/modifyPass",t)},_=function(t){return Object(c["c"])("/backup/web/backup/server/getAll",t)},R=function(t){return Object(c["d"])("/backup/web/backup/jobDetail/getByPage",t)},N=function(t){return Object(c["d"])("/backup/web/backup/jobDetail/save",t)},J=function(t){return Object(c["c"])("/backup/web/backup/jobDetail/cycleDate",t)},M=function(t){return Object(c["c"])("/backup/web/backup/jobDetail/getBackPath",t)},z=function(t){return Object(c["d"])("/backup/web/backup/scheduler/getByPage",t)},E=function(t){return Object(c["d"])("/backup/web/backup/jobLog/getByPage",t)},K=function(t){return Object(c["d"])("/backup/web/backup/logConnection/getByPage",t)},q=function(t){return Object(c["c"])("/backup/web/backup/connection/getByLogId",t)},G=function(t){return Object(c["d"])("/backup/web/backup/logConnection/getLogByParam",t)},H=function(t,e){return Object(c["c"])("/backup/web/backup/logConnection/get/".concat(t),e)},Q=function(t){return Object(c["c"])("/backup/web/backup/connection/getByLogIdAndIsSucc",t)},U=function(t){return Object(c["d"])("/backup/web/backup/command/save",t)},V=function(t){return Object(c["d"])("/backup/web/backup/commandObject/getByPage",t)},W=function(t){return Object(c["d"])("/backup/web/backup/smsMessage/getByPage",t)},X=function(t){return Object(c["d"])("/backup/web/backup/area/getByPage",t)},Y=function(t){return Object(c["d"])("/backup/web/backup/area/save",t)},Z=function(t){return Object(c["c"])("/backup/web/backup/area/getAll",t)},tt=function(t){return Object(c["c"])("/backup/web/backup/area/getCityById/".concat(t))},et=function(t,e){return Object(c["c"])("/backup/web/backup/area/getDistrictById/".concat(t,"/").concat(e))},nt=function(t){return Object(c["d"])("/backup/web/backup/dictionary/getByPage",t)},ct=function(t){return Object(c["d"])("/backup/web/backup/dictionary/save",t)},rt=function(t){return Object(c["d"])("/backup/web/backup/dicItem/save",t)},ot=function(t,e){return Object(c["c"])("/backup/web/backup/dicItem/getPageByDicId/".concat(t),e)},at=function(t){return Object(c["c"])("/backup/web/jobScheduler/getCycleDate",t)},ut=function(t){return Object(c["d"])("/backup/web/jobScheduler/getByPage",t)},it=function(t){return Object(c["c"])("/backup/web/jobScheduler/pauseTask",t)},dt=function(t){return Object(c["c"])("/backup/web/jobScheduler/launchTask",t)},bt=function(t){return Object(c["c"])("/backup/web/jobScheduler/runOnceTask",t)},mt=function(t){return Object(c["d"])("/backup/web/jobScheduler/save",t)},st=function(t){return Object(c["d"])("/backup/web/backup/serverMonitor/getByPage",t)},pt=function(t){return Object(c["d"])("/backup/web/backup/serverMonitor/getBackupByPage",t)},ft=function(t){return Object(c["d"])("/backup/web/backup/connection/getByPage",t)},lt=function(t){return Object(c["d"])("/backup/web/backup/connection/save",t)},kt=function(t){return Object(c["c"])("/backup/web/backup/connection/getByAreaId",t)},ht=function(t){return Object(c["c"])("/backup/web/backup/connection/getByDeviceIdAndAreaId",t)},gt=function(t){return Object(c["c"])("/backup/web/backup/connection/getSubTypeList",t)},wt=function(t){return Object(c["d"])("/backup/web/backup/strange/getByPage",t)},jt=function(t){return Object(c["d"])("/backup/web/backup/strange/save",t)},Ot=function(t){return Object(c["c"])("/backup/web/backup/strange/run",t)},vt=function(t){return Object(c["c"])("/backup/web/backup/strange/stop",t)},yt=function(t){return Object(c["c"])("/backup/web/backup/backpass/connServer",t)},It=function(t){return Object(c["d"])("/backup/web/backup/backpass/changeDirectory",t)},Ft=function(t){return Object(c["c"])("/backup/web/backup/backpass/connConnection",t)},Ct=function(t){return Object(c["d"])("/backup/web/backup/backpass/changeConnDir",t)},$t=function(t){return Object(c["c"])("/backup/web/backup/backpass/disConn",t)},Dt=function(t){return Object(c["d"])("/backup/web/backup/backpass/upload",t)},Bt=function(t){return Object(c["c"])("/backup/web/backup/backpass/getLog",t)},St=function(t){return Object(c["c"])("/backup/web/backup/connection/getById",t)},xt=function(t){return Object(c["c"])("/backup/web/backup/backpass/connServerManual",t)},Lt=function(t){return Object(c["c"])("/backup/web/backup/backpass/disConnServer",t)},Tt=function(t){return Object(c["d"])("/backup/web/backup/backpass/executeCmd",t)},Pt=function(t){return Object(c["c"])("/backup/web/backup/dashboard/getPie",t)},At=function(t){return Object(c["c"])("/backup/web/backup/dashboard/getSuccAndFail",t)},_t=function(t){return Object(c["c"])("/backup/web/backup/dashboard/getKindsOfDeviceType",t)},Rt=function(t){return Object(c["c"])("/backup/web/backup/dashboard/getKindsOfDeviceTypeSomeDay",t)},Nt=function(t){return Object(c["c"])("/backup/web/backup/dashboard/getKindsOfArea",t)},Jt=function(t,e){return Object(c["a"])(t,e)},Mt=function(t,e){return Object(c["d"])(t,e)},zt=function(t,e){return Object(c["b"])(t,e)}},7514:function(t,e,n){"use strict";var c=n("5ca1"),r=n("0a49")(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),c(c.P+c.F*a,"Array",{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),n("9c6c")(o)},e9e6:function(t,e,n){"use strict";n.r(e);var c=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"backupScheduler"},[n("Row",[n("Col",[n("Card",[n("Row",[n("Alert",[n("Icon",{attrs:{type:"md-add-circle",size:"25",color:"#A0522D"}}),n("span",{staticStyle:{"font-size":"large",color:"#A0522D"}},[t._v("  "+t._s(t.$t("backupCommand.commandConfig")))])],1)],1),n("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start"}},[n("Col",{attrs:{span:"13"}},[n("Form",{ref:"commandForm",attrs:{model:t.commandForm,inline:"","label-width":80}},[n("FormItem",{attrs:{label:t.$t("backupJobDetail.deviceId"),prop:"objectId"}},[n("Select",{staticStyle:{width:"220px"},attrs:{filterable:"",placeholder:t.$t("backupJobDetail.deviceIdTip"),clearable:""},on:{"on-change":t.changeObjectId},model:{value:t.commandForm.objectId,callback:function(e){t.$set(t.commandForm,"objectId",e)},expression:"commandForm.objectId"}},t._l(t.deviceList,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.deviceName))])}))],1),n("FormItem",{attrs:{label:t.$t("backupCommand.flag")}},[n("Select",{staticStyle:{width:"180px"},attrs:{placeholder:t.$t("backupCommand.flagTip"),clearable:""},model:{value:t.commandForm.flag,callback:function(e){t.$set(t.commandForm,"flag",e)},expression:"commandForm.flag"}},t._l(t.flagList,function(e){return n("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1),n("FormItem",{attrs:{label:t.$t("backupCommand.command"),prop:"cmd"}},[n("Input",{staticStyle:{width:"220px"},attrs:{placeholder:t.$t("backupCommand.commandTip"),autocomplete:"off"},model:{value:t.commandForm.cmd,callback:function(e){t.$set(t.commandForm,"cmd",e)},expression:"commandForm.cmd"}})],1),n("FormItem",{attrs:{label:t.$t("backupCommand.errorLog")}},[n("Input",{staticStyle:{width:"180px"},attrs:{placeholder:t.$t("backupCommand.errorLogTip"),autocomplete:"off"},model:{value:t.commandForm.errorLog,callback:function(e){t.$set(t.commandForm,"errorLog",e)},expression:"commandForm.errorLog"}})],1),n("FormItem",{attrs:{label:t.$t("backupCommand.retryTime")}},[n("InputNumber",{staticStyle:{width:"220px"},attrs:{min:0,autocomplete:"off"},model:{value:t.commandForm.retryTime,callback:function(e){t.$set(t.commandForm,"retryTime",e)},expression:"commandForm.retryTime"}})],1),n("FormItem",{attrs:{label:t.$t("backupCommand.waitDate")}},[n("InputNumber",{staticStyle:{width:"180px"},attrs:{min:0,autocomplete:"off"},model:{value:t.commandForm.waitDate,callback:function(e){t.$set(t.commandForm,"waitDate",e)},expression:"commandForm.waitDate"}})],1),n("FormItem",{attrs:{label:t.$t("backupCommand.expectResult")}},[n("Input",{staticStyle:{width:"220px"},attrs:{placeholder:t.$t("backupCommand.expectResultTip"),autocomplete:"off"},model:{value:t.commandForm.expectResult,callback:function(e){t.$set(t.commandForm,"expectResult",e)},expression:"commandForm.expectResult"}})],1),n("FormItem",{attrs:{label:t.$t("backupCommand.orderId")}},[n("InputNumber",{staticStyle:{width:"220px"},attrs:{min:1,autocomplete:"off"},model:{value:t.commandForm.orderId,callback:function(e){t.$set(t.commandForm,"orderId",e)},expression:"commandForm.orderId"}}),n("span",{staticStyle:{color:"red"}},[t._v("* "+t._s(t.$t("backupCommand.orderIdDesc")))])],1)],1),this.isShowBut?n("span",{staticClass:"br",staticStyle:{"text-align":"center",display:"block"}},[n("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:t.handleAdd}},[t._v(t._s(t.$t("add")))]),n("Button",{on:{click:t.handleReset}},[t._v(t._s(t.$t("reset")))])],1):t._e()],1),n("Col",{attrs:{span:"11"}},[n("Table",{ref:"table",attrs:{loading:t.loading,border:"",sortable:"custom",columns:t.columns,data:t.data}}),this.isShowBut?n("span",{staticClass:"br",staticStyle:{float:"right","margin-right":"-5px","margin-top":"2vh"}},[n("Button",{attrs:{type:"primary",loading:t.submitLoading},on:{click:t.submitJobCommand}},[t._v(t._s(t.$t("save")))])],1):t._e()],1)],1)],1)],1)],1)],1)},r=[],o=(n("d25f"),n("7514"),n("365c")),a={name:"backup-command",data:function(){var t=this;return{id:0,objectIdx:"",tempCommand:[],isShowBut:!0,commandForm:{objectId:"",objectName:"",flag:"",cmd:"",expectResult:"",errorLog:"",waitDate:0,retryTime:0,orderId:1,id:0},submitLoading:!1,tempData:[],deviceList:[],flagList:[{id:"excuting",name:this.$t("backupCommand.executeCommand")},{id:"excuted",name:this.$t("backupCommand.validateResult")}],loading:!1,data:[],columns:[{type:"index",width:50,align:"center"},{title:this.$t("backupCommand.command"),key:"cmd",align:"center"},{title:this.$t("backupCommand.orderId"),key:"orderId",align:"center",sortable:!0,sortType:"asc",width:115},{title:this.$t("operation"),key:"action",align:"center",width:130,render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",display:t.isShowBut?"none":"inline-block"},on:{click:function(){t.edit(n.row)}}},t.$t("view")),e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px",display:t.isShowBut?"inline-block":"none"},on:{click:function(){t.edit(n.row)}}},t.$t("edit")),e("Button",{props:{type:"error",size:"small"},style:{display:t.isShowBut?"inline-block":"none"},on:{click:function(){t.remove(n.row)}}},t.$t("delete"))])}}]}},methods:{handleAdd:function(){var t=this;if(""!==this.commandForm.objectId)if(""!==this.commandForm.cmd){var e=this.deviceList.find(function(e){return e.id===t.commandForm.objectId})["deviceName"];this.commandForm.objectName=e;for(var n=!0,c=0,r=0;r<this.tempData.length;r++)if(this.tempData[r].id===this.commandForm.id){c=r,n=!1;break}var o={};for(var a in this.commandForm)o[a]=this.commandForm[a];if(n){var u=this.tempData.find(function(e){return e.orderId===t.commandForm.orderId&&e.objectId===t.commandForm.objectId});if(void 0!==u)return void this.$Message.warning(this.$t("backupCommand.orderIdTip"));this.id=this.id+1,o["id"]=this.id,this.tempData.push(o),this.tempCommand["a"+String(this.id)]=this.commandForm.cmd}else{var i=JSON.stringify(o),d=JSON.parse(i);this.$set(this.tempData,c,d),this.tempCommand["a"+String(d.id)]=d.cmd}this.data=this.tempData,this.commandForm.cmd="",this.commandForm.id=0}else this.$Message.warning(this.$t("backupCommand.commandTip"));else this.$Message.warning(this.$t("backupJobDetail.deviceIdTip"))},handleReset:function(){this.commandForm.flag="",this.commandForm.cmd="",this.commandForm.expectResult="",this.commandForm.errorLog="",this.commandForm.waitDate=0,this.commandForm.retryTime=0,this.commandForm.orderId=1,this.commandForm.id=0},edit:function(t){for(var e in t)null!==t[e]&&void 0!==t[e]||(t[e]="");var n=JSON.stringify(t),c=JSON.parse(n);this.commandForm=c,this.commandForm.cmd=this.tempCommand["a"+String(t.id)]},remove:function(t){var e=this;this.$Modal.confirm({title:this.$t("confirmDelete"),content:this.$t("backupCommand.orderIdDelTip"),onOk:function(){e.tempData=e.tempData.filter(function(e){return e.id!==t.id}),e.data=e.data.filter(function(e){return e.id!==t.id})}})},initDevice:function(){var t=this;Object(o["D"])().then(function(e){0===e.code&&(t.deviceList=e.content)})},changeObjectId:function(t){var e=this;void 0!==t&&(""===this.objectIdx?this.objectIdx=t:this.objectIdx!==t&&this.$Modal.confirm({title:this.$t("pleaseConfirm"),content:this.$t("backupCommand.orderClearTip"),onOk:function(){e.data=[],e.tempData=[],e.objectIdx=t},onCancel:function(){setTimeout(function(){e.commandForm.objectId=e.objectIdx},100)}}))},submitJobCommand:function(){var t=this;if(0!==this.data.length){for(var e=[],n=0;n<this.tempData.length;n++){var c=this.tempData[n];delete c.id,e.push(JSON.stringify(c))}this.submitLoading=!0,e="["+e+"]",Object(o["Eb"])({commandListStr:e}).then(function(e){t.submitLoading=!1,0===e.code&&(t.id=0,t.objectIdx="",t.tempCommand=[],t.tempData=[],t.data=[],t.commandForm.id=0,t.$Message.success(t.$t("operationSuccess")))})}else this.$Message.warning(this.$t("backupCommand.commandSetTip"))},initData:function(){this.handleReset(),this.id=0,this.objectIdx="",this.tempCommand=[],this.tempData=[],this.data=[],this.commandForm.objectId="",this.commandForm.objectName="",this.initDevice()},viewOrEdit:function(){this.initData();var t=this.$store.state.app.commandList;for(var e in this.commandForm.objectId=t.objectId,t)if(null!==t[e]&&void 0!==t[e]||(t[e]=""),"commandList"===e){var n=t[e];for(var c in this.data=n,this.tempData=n,n)this.tempCommand["a"+String(n[c].id)]=n[c].cmd}this.$store.commit("setCommandList",[]),this.$store.commit("setCommandOpe","")}},watch:{"$store.state.app.commandOpe":{handler:function(t,e){"view"===t?(this.isShowBut=!1,this.viewOrEdit()):"add"===t?(this.initData(),this.isShowBut=!0,this.$store.commit("setCommandList",[]),this.$store.commit("setCommandOpe","")):"edit"===t&&(this.isShowBut=!0,this.viewOrEdit())},deep:!0,immediate:!0}},mounted:function(){this.initDevice()}},u=a,i=n("2877"),d=Object(i["a"])(u,c,r,!1,null,null,null);d.options.__file="backupCommand.vue";e["default"]=d.exports}}]);