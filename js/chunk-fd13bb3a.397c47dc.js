(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd13bb3a"],{"7bd1":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"addForm",attrs:{model:e.addForm,"label-width":200,rules:e.addFormValidate}},[r("FormItem",{attrs:{label:"流程名称",prop:"procedureName"}},[r("Input",{staticStyle:{width:"300px"},attrs:{maxlength:30},model:{value:e.addForm.procedureName,callback:function(t){e.$set(e.addForm,"procedureName",t)},expression:"addForm.procedureName"}})],1),r("FormItem",{attrs:{label:"流程所属",prop:"belongMajor"}},[r("Select",{staticStyle:{width:"300px"},attrs:{clearable:"",filterable:"",placeholder:"支持输入筛选,不能为空"},model:{value:e.addForm.belongMajor,callback:function(t){e.$set(e.addForm,"belongMajor",t)},expression:"addForm.belongMajor"}},e._l(e.belongMajorArr,function(t){return r("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),r("FormItem",{attrs:{label:"描述",prop:"memo"}},[r("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:10}},model:{value:e.addForm.memo,callback:function(t){e.$set(e.addForm,"memo",t)},expression:"addForm.memo"}})],1),r("FormItem",["查看"!=e.btnName?r("Button",{attrs:{type:"primary"},on:{click:function(t){e.addFormSubmit("草稿",!1)}}},[e._v("保存")]):e._e(),"查看"!=e.btnName?r("Button",{attrs:{type:"primary"},on:{click:function(t){e.addFormSubmit("草稿",!0)}}},[e._v("保存并绘制流程图")]):e._e(),r("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning"},on:{click:e.cancelReg}},[e._v("取消")])],1)],1)],1)},o=[],n=r("be94"),s=(r("96cf"),r("1da1")),i={data:function(){return{dataType:["neCategory","neType","neProducer"],userInfo:JSON.parse(localStorage.getItem("userInfo")),addForm:{procedureName:"",belongMajor:"",memo:""},addFormValidate:{belongMajor:[{required:!0,message:"选择不能为空",trigger:"change"}],procedureName:[{required:!0,message:"不能为空",trigger:"blur"}]},belongMajorArr:["核心网","模拟数据1","模拟数据2"],submitLoading:!1,maxLength:20,row:{},btnName:"新增"}},computed:{keyGetSelect:function(){return this.$store.state.yt.keySelectArray}},methods:{init:function(e,t){var r=this;this.btnName=t,this.addFormInit(!0),this.addForm=this.deepClone(e),this.getRequest("/operation/procedure/listMajors").then(function(e){r.belongMajorArr=e.content})},addFormInit:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs["addForm"].resetFields(),e?this.$emit("on-show"):this.$emit("on-cancel")},addFormSubmit:function(e,t){var r=this;this.$refs["addForm"].validate(function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(a){var o,s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=24;break}if(o=Object(n["a"])({},r.addForm),o.userName=r.userInfo.username,"新增"!=r.btnName){e.next=23;break}return e.prev=4,e.next=7,r.request("post","/operation/procedure/addProcedure",o);case 7:return s=e.sent,o.procedureId=s.procedureId,i={procedureId:s.procedureId,userName:r.userInfo.username,json:JSON.stringify({title:o.procedureName,nodes:{},lines:{},initNum:1,areas:{},memos:{},extra:{}})},e.next=12,r.request("post","/operation/procedure/saveProcedureJson",i);case 12:e.sent,r.$Message.success("新增成功"),r.$emit("on-add",o,t),r.addFormInit(),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](4),r.$Message.warning(e.t0);case 21:e.next=24;break;case 23:"修改"==r.btnName?r.postRequest("/operation/procedure/updateProcedure",o).then(function(e){t||r.$Message.success("修改成功"),r.$emit("on-add",o,t),r.addFormInit()}):"复制"==r.btnName&&r.$Message.success("开发中");case 24:case"end":return e.stop()}},e,this,[[4,18]])}));return function(t){return e.apply(this,arguments)}}())},cancelReg:function(){var e=this;this.$Modal.confirm({title:"确定关闭该页面吗",onOk:function(){e.addFormInit()}})}}},d=i,c=r("2877"),u=Object(c["a"])(d,a,o,!1,null,null,null);u.options.__file="flowForm.vue";t["default"]=u.exports},be94:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var a=r("ade3");function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){Object(a["a"])(e,t,r[t])})}return e}}}]);