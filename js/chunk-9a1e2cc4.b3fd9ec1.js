(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a1e2cc4"],{"28a5":function(e,t,i){i("214f")("split",2,function(e,t,o){"use strict";var a=i("aae3"),r=o,n=[].push,l="split",s="length",c="lastIndex";if("c"=="abbc"[l](/(b)*/)[1]||4!="test"[l](/(?:)/,-1)[s]||2!="ab"[l](/(?:ab)*/)[s]||4!="."[l](/(.?)(.?)/)[s]||"."[l](/()()/)[s]>1||""[l](/.?/)[s]){var u=void 0===/()??/.exec("")[1];o=function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!a(e))return r.call(i,e,t);var o,l,d,g,h,p=[],b=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,m=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,b+"g");u||(o=new RegExp("^"+y.source+"$(?!\\s)",b));while(l=y.exec(i)){if(d=l.index+l[0][s],d>f&&(p.push(i.slice(f,l.index)),!u&&l[s]>1&&l[0].replace(o,function(){for(h=1;h<arguments[s]-2;h++)void 0===arguments[h]&&(l[h]=void 0)}),l[s]>1&&l.index<i[s]&&n.apply(p,l.slice(1)),g=l[0][s],f=d,p[s]>=m))break;y[c]===l.index&&y[c]++}return f===i[s]?!g&&y.test("")||p.push(""):p.push(i.slice(f)),p[s]>m?p.slice(0,m):p}}else"0"[l](void 0,0)[s]&&(o=function(e,t){return void 0===e&&0===t?[]:r.call(this,e,t)});return[function(i,a){var r=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,r,a):o.call(String(r),i,a)},o]})},"292d":function(e,t,i){"use strict";i.r(t);var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home-main"},[i("Row",[i("Col",[i("Card",[i("section",{staticClass:"searchArray"},[i("search-filter",{attrs:{filter:e.filterList,apiurl:"realTime"},on:{getlist:e.getList}}),i("div",{staticClass:"btnArray"})],1),i("Row",[i("Table",{ref:"table",attrs:{loading:e.loading,height:e.tableHeight,border:"",size:"small",columns:e.columns,data:e.data,"highlight-row":""}})],1),i("Row",{staticClass:"tablePage",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{current:e.pageNumber,total:e.total,"page-size":e.pageSize,"page-size-opts":[20,50,100],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1),i("Modal",{attrs:{title:e.modalTitle,id:"realTimeModal",width:"800"},on:{"on-ok":e.stop},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[i("RadioGroup",{attrs:{vertical:""},on:{"on-change":e.jobQueryChange},model:{value:e.jobQuery,callback:function(t){e.jobQuery=t},expression:"jobQuery"}},[i("Radio",{attrs:{label:"0"}},[e._v("停止单网元单任务的实时作业")]),i("Radio",{attrs:{label:"1"}},[e._v("按任务名称停止该任务所有网元的实时作业")]),i("Radio",{attrs:{label:"2"}},[e._v("按网元名称停止该网元所有任务的实时作业")])],1),i("div",{staticStyle:{display:"flex",padding:"20px"}},[i("span",{staticStyle:{"margin-right":"20px"}},[i("Card",{staticStyle:{width:"200px",border:"1px solid #eee","border-bottom":"none"},attrs:{title:"任务名称",padding:0,shadow:""}},[i("CellGroup",e._l(e.jobArray,function(e,t){return i("Cell",{key:t,attrs:{title:e}})}))],1)],1),i("span",[i("Card",{staticStyle:{width:"200px",border:"1px solid #eee","border-bottom":"none"},attrs:{title:"网元名称",padding:0,shadow:""}},[i("CellGroup",e._l(e.neArray,function(e,t){return i("Cell",{key:t,attrs:{title:e}})}))],1)],1)])],1),i("Modal",{attrs:{title:"实时日志",width:"800"},on:{"on-ok":e.logStop},model:{value:e.logVisible,callback:function(t){e.logVisible=t},expression:"logVisible"}},[i("div",{staticStyle:{padding:"0 20px"},domProps:{innerHTML:e._s(e.logData)}})])],1)},a=[],r=(i("28a5"),i("a481"),i("be94")),n={data:function(){var e=this;return{filterList:["keyCity","query"],dataCityType:["operateCity","neCategory","neType","neProducer"],filterData:{},pageNumber:1,pageSize:20,total:100,loading:!1,data:[],columns:[{type:"index",width:60,align:"center"},{title:"地市",key:"operateCity"},{title:"网元类别",key:"neCategory"},{title:"网元类型",key:"neType"},{title:"设备厂家",key:"neProducer"},{title:"执行状态",render:function(e,t){return"作业中"===t.row.jobStatus?e("div",[e("Tag",{props:{type:"dot",color:"success"}},t.row.jobStatus)]):(t.row.jobStatus,e("div",[e("Tag",{props:{type:"dot",color:"error"}},t.row.jobStatus)]))}},{title:"任务名称",key:"routineJobName",sortable:!0},{title:"网元名称",key:"neName",sortable:!0},{title:"开始时间",key:"startTime",sortable:!0,render:function(t,i){return t("div",e.formatDate(new Date(i.row.startTime),"yyyy-MM-dd HH:mm:ss"))}},{title:"操作",key:"action",width:200,fixed:"right",align:"center",render:function(t,i){return t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.log(i.row)}}},"查看"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modalShow(i.row)}}},"停止")])}}],userInfo:JSON.parse(localStorage.getItem("userInfo")),tableHeight:450,modalVisible:!1,modalTitle:"停止实时任务",jobQuery:"0",rowId:"",row:{},jobArray:[],neArray:[],timer:"",logVisible:!1,logData:""}},computed:{},methods:{getList:function(e){var t=this;this.loading=!0,e&&(this.filterData=e);var i=Object(r["a"])({},this.filterData,{pageNumber:this.pageNumber,pageSize:this.pageSize});this.getRequest("/routinejob/realTime",i).then(function(e){t.data=e.content.list,t.total=e.content.total,t.loading=!1})},changePage:function(e){this.pageNumber=e,this.$refs.table.selectAll(!1),this.getList()},changePageSize:function(e){this.pageSize=e,this.getList()},log:function(e){var t=this;this.logVisible=!0,this.logData="",this.getRequest("/routinejob/realTime/log?id="+e.id).then(function(e){if(e.content&&e.content.log){var i=e.content.log.replace(/\n/g,"<br>");t.logData=i}}),this.timer=setInterval(function(){t.logVisible?t.getRequest("/routinejob/realTime/log?id="+e.id).then(function(e){if(e.content&&e.content.log){var i=e.content.log.replace(/\n/g,"<br>");t.logData=i}else clearInterval(t.timer)}):clearInterval(t.timer)},5e3)},logStop:function(){this.logVisible=!1,clearInterval(this.timer)},modalShow:function(e){this.row=e,this.rowId=e.id,this.jobQuery="0",this.modalVisible=!0,this.jobQueryChange(0)},jobQueryChange:function(e){var t=this,i="";0==e?(this.neArray=[this.row.neName],this.jobArray=[this.row.routineJobName]):1==e?(i=this.row.routineJobName,this.getRequest("/routinejob/realTime/stop?id="+e+"&message="+i).then(function(e){t.neArray=e.content.split(";").slice(0,-1),t.jobArray=[i]})):2==e&&(i=this.row.neName,this.getRequest("/routinejob/realTime/stop?id="+e+"&message="+i).then(function(e){t.jobArray=e.content.split(";").slice(0,-1),t.neArray=[i]}))},stop:function(){var e=this;this.putYTRequest("/routinejob/realTime/stop?id="+this.rowId+"&query="+this.jobQuery).then(function(t){0===t.code?(e.$Message.info(t.result),e.getList()):e.$Message.error(t.result)})}},created:function(){this.getList()},mounted:function(){this.tableHeight=window.innerHeight-270},deactivated:function(){this.timer&&(clearInterval(this.timer),this.timer=null)}},l=n,s=(i("7d6c"),i("2877")),c=Object(s["a"])(l,o,a,!1,null,null,null);c.options.__file="realTime.vue";t["default"]=c.exports},"7d6c":function(e,t,i){"use strict";var o=i("a050"),a=i.n(o);a.a},a050:function(e,t,i){var o=i("f060");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var a=i("499e").default;a("7945b2f1",o,!0,{sourceMap:!1,shadowMode:!1})},be94:function(e,t,i){"use strict";i.d(t,"a",function(){return a});var o=i("ade3");function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},a=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),a.forEach(function(t){Object(o["a"])(e,t,i[t])})}return e}},f060:function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"\n#realTimeModal .ivu-cell{cursor:default\n}\n#realTimeModal .ivu-cell-title{line-height:18px;font-size:12px\n}",""])}}]);