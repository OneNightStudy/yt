(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-70cbe708","chunk-502357fa"],{"12f7":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-main"},[a("Row",[a("Col",[a("Card",[a("section",{staticClass:"searchArray"},[a("search-filter",{attrs:{filter:e.filterList,apiurl:"flow"},on:{getlist:e.getList}}),a("div",{staticClass:"btnArray"},[a("Button",{attrs:{type:"primary",icon:"md-add"},on:{click:function(t){e.init({},"新增")}}},[e._v("新增")])],1)],1),a("Row",[a("Table",{ref:"table",attrs:{loading:e.loading,height:e.tableHeight,border:"",size:"small",columns:e.columns,data:e.data,"highlight-row":"",id:"flowTable"}})],1),a("Row",{staticClass:"tablePage",attrs:{type:"flex",justify:"end"}},[a("Page",{attrs:{current:e.pageNumber,total:e.total,"page-size":e.pageSize,"page-size-opts":[20,50,100],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1),a("Modal",{attrs:{title:e.btnName,width:"900",id:"flowForm","footer-hide":""},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("flow-form",{ref:"flowForm",on:{"on-cancel":e.formHide,"on-add":e.formAdd,"on-show":e.formShow}})],1),a("Modal",{attrs:{title:"流程图",fullscreen:"",id:"printForm","footer-hide":""},model:{value:e.printVisible,callback:function(t){e.printVisible=t},expression:"printVisible"}},[a("print-form",{ref:"printForm",on:{"on-cancel":e.printFormHide,"on-add":e.printFormAdd,"on-show":e.printFormShow}})],1),a("Modal",{attrs:{title:"任务",width:"800",id:"taskForm","footer-hide":""},model:{value:e.taskModalVisible,callback:function(t){e.taskModalVisible=t},expression:"taskModalVisible"}},[a("Form",{ref:"taskForm",attrs:{model:e.taskForm,rules:e.taskFormValidate,"label-width":200}},[a("FormItem",{attrs:{label:"任务名称",prop:"procedureName"}},[a("Input",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.taskForm.procedureName,callback:function(t){e.$set(e.taskForm,"procedureName",t)},expression:"taskForm.procedureName"}})],1),a("FormItem",{attrs:{label:"启用状态",prop:"enableStatus"}},[a("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.taskForm.enableStatus,callback:function(t){e.$set(e.taskForm,"enableStatus",t)},expression:"taskForm.enableStatus"}},[a("Option",{attrs:{value:0}},[e._v("不启用")]),a("Option",{attrs:{value:1}},[e._v("启用")])],1)],1),a("FormItem",{attrs:{label:"审核状态",prop:"auditingStatus"}},[a("Select",{staticStyle:{width:"200px"},attrs:{disabled:""},model:{value:e.taskForm.auditingStatus,callback:function(t){e.$set(e.taskForm,"auditingStatus",t)},expression:"taskForm.auditingStatus"}},[a("Option",{attrs:{value:0}},[e._v("未审批")]),a("Option",{attrs:{value:1}},[e._v("审批中")]),a("Option",{attrs:{value:2}},[e._v("审批通过")]),a("Option",{attrs:{value:3}},[e._v("审批不通过")])],1)],1),a("FormItem",{attrs:{label:"开始日期",prop:"taskStartTime"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"datetime",format:"yyyy/MM/dd HH:mm:ss",options:e.taskStartTime},model:{value:e.taskForm.taskStartTime,callback:function(t){e.$set(e.taskForm,"taskStartTime",t)},expression:"taskForm.taskStartTime"}})],1),a("FormItem",{attrs:{label:"执行周期",prop:"taskRepeatType"}},[a("Select",{staticStyle:{width:"200px"},model:{value:e.taskForm.taskRepeatType,callback:function(t){e.$set(e.taskForm,"taskRepeatType",t)},expression:"taskForm.taskRepeatType"}},[a("Option",{attrs:{value:1}},[e._v("单次")]),a("Option",{attrs:{value:2}},[e._v("每小时")]),a("Option",{attrs:{value:3}},[e._v("每日")]),a("Option",{attrs:{value:4}},[e._v("每周")]),a("Option",{attrs:{value:5}},[e._v("自定义")])],1)],1),5==e.taskForm.taskRepeatType?a("FormItem",[a("div",[a("span",{on:{click:function(t){e.timeChange(!1,1,2,3)}}},[a("Radio",{model:{value:e.time1,callback:function(t){e.time1=t},expression:"time1"}},[e._v("每隔")])],1),a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},on:{"on-change":function(t){e.selesctChange(t,1,2,3)}},model:{value:e.taskTime1,callback:function(t){e.taskTime1=t},expression:"taskTime1"}},[a("Option",{attrs:{value:1}},[e._v("1")]),a("Option",{attrs:{value:2}},[e._v("2")]),a("Option",{attrs:{value:3}},[e._v("3")]),a("Option",{attrs:{value:4}},[e._v("4")]),a("Option",{attrs:{value:5}},[e._v("5")]),a("Option",{attrs:{value:6}},[e._v("6")])],1),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("天")])],1),a("div",[a("span",{on:{click:function(t){e.timeChange(!1,2,1,3)}}},[a("Radio",{model:{value:e.time2,callback:function(t){e.time2=t},expression:"time2"}},[e._v("每隔")])],1),a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},on:{"on-change":function(t){e.selesctChange(t,2,1,3)}},model:{value:e.taskTime2,callback:function(t){e.taskTime2=t},expression:"taskTime2"}},[a("Option",{attrs:{value:1}},[e._v("1")]),a("Option",{attrs:{value:2}},[e._v("2")]),a("Option",{attrs:{value:3}},[e._v("3")]),a("Option",{attrs:{value:4}},[e._v("4")]),a("Option",{attrs:{value:5}},[e._v("5")]),a("Option",{attrs:{value:6}},[e._v("6")]),a("Option",{attrs:{value:12}},[e._v("12")])],1),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("小时")])],1),a("div",[a("span",{on:{click:function(t){e.timeChange(!1,3,1,2)}}},[a("Radio",{model:{value:e.time3,callback:function(t){e.time3=t},expression:"time3"}},[e._v("每隔")])],1),a("Select",{staticStyle:{width:"100px"},attrs:{clearable:""},on:{"on-change":function(t){e.selesctChange(t,3,1,2)}},model:{value:e.taskTime3,callback:function(t){e.taskTime3=t},expression:"taskTime3"}},[a("Option",{attrs:{value:15}},[e._v("15")]),a("Option",{attrs:{value:30}},[e._v("30")]),a("Option",{attrs:{value:45}},[e._v("45")])],1),a("span",{staticStyle:{"margin-left":"10px"}},[e._v("分钟")])],1)]):e._e(),a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.taskFormSubmit}},[e._v("保存")]),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning"},on:{click:e.cancelReg}},[e._v("取消")])],1)],1)],1),a("Modal",{attrs:{title:e.delTitle,width:"800"},model:{value:e.delModalVisible,callback:function(t){e.delModalVisible=t},expression:"delModalVisible"}},[a("Table",{attrs:{columns:e.delColumns,data:e.delData}}),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.delModalVisible=!1}}},[e._v("关闭")])],1)],1)],1)},i=[],r=a("be94"),n=(a("78ce"),a("7bd1")),s=a("700b"),l={components:{flowForm:n["default"],printForm:s["default"]},data:function(){var e=this;return{filterList:["query","time","belongMajor"],dataType:["neCategory","neType","neProducer"],filterData:{},pageNumber:1,pageSize:20,total:100,userInfo:JSON.parse(localStorage.getItem("userInfo")),loading:!1,columns:[{type:"index",width:60,align:"center"},{title:"流程名称",width:250,key:"procedureName",sortable:!0},{title:"所属专业",width:160,key:"belongMajor"},{title:"描述信息",width:160,key:"memo"},{title:"启动状态",width:160,key:"enableStatus",sortable:!0,render:function(e,t){return 0==t.row.enableStatus?e("div",[e("Tag",{props:{type:"dot",color:"info"}},"不启用")]):1==t.row.enableStatus?e("div",[e("Tag",{props:{type:"dot",color:"success"}},"启用")]):e("div",[e("Tag",{props:{type:"dot",color:"error"}},"未知")])}},{title:"审核状态",width:160,key:"auditingStatus",sortable:!0,render:function(e,t){return 0==t.row.auditingStatus?e("div",[e("Tag",{props:{type:"dot",color:"info"}},"未审批")]):1==t.row.auditingStatus?e("div",[e("Tag",{props:{type:"dot",color:"primary"}},"审批中")]):2==t.row.auditingStatus?e("div",[e("Tag",{props:{type:"dot",color:"success"}},"审批通过")]):3==t.row.auditingStatus?e("div",[e("Tag",{props:{type:"dot",color:"warning"}},"审批不通过")]):e("div",[e("Tag",{props:{type:"dot",color:"error"}},"未知")])}},{title:"修改人员",width:100,key:"creater"},{title:"修改时间",width:160,key:"modifyTime",sortable:!0,sortType:"desc",render:function(t,a){return t("div",e.formatDate(new Date(a.row.modifyTime),"yyyy-MM-dd HH:mm:ss"))}},{title:"审核人员",width:100,key:"auditor"},{title:"创建人员",width:100,key:"creater"},{title:"创建时间",width:160,key:"createTime",sortable:!0,render:function(t,a){return t("div",e.formatDate(new Date(a.row.createTime),"yyyy-MM-dd HH:mm:ss"))}},{title:"操作",key:"action",fixed:"right",width:550,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.init(a.row,"查看")}}},"查看"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.init(a.row,"修改")}}},"修改"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.init(a.row,"复制")}}},"复制"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.printFormShow(a.row)}}},"流程图"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.del(a.row)}}},"删除"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.procedureTask(a.row)}}},"任务"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.openStatus(a.row)}}},"启用"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.stopStatus(a.row)}}},"停用"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.passAuditing(a.row)}}},"审核")])}}],data:[],tableHeight:450,modal1:!1,printVisible:!1,delModalVisible:!1,delColumns:[{title:"网元类别",key:"neCategory"},{title:"网元类型",key:"neType"},{title:"设备厂家",key:"neProducer"},{title:"指令集",key:"orderSetName"},{title:"操作指令",key:"oprationalOrder"}],delData:[],delTitle:"删除",btnName:"",taskModalVisible:!1,taskForm:{},taskFormValidate:{taskRepeatType:[{required:!0,type:"number",message:"不能为空",trigger:"change"}],taskStartTime:[{required:!0,message:"日期不能为空!",trigger:"blur",pattern:/.+/}]},taskStartTime:{disabledDate:function(e){return e&&e.valueOf()<Date.now()-864e5}},time1:!1,time2:!1,time3:!1,taskTime1:"",taskTime2:"",taskTime3:"",nowIndex:""}},methods:{getList:function(e){var t=this;this.loading=!0,e&&(this.filterData=e);var a=Object(r["a"])({},this.filterData,{pageNumber:this.pageNumber,pageSize:this.pageSize});this.getRequest("/operation/procedure/listProcedures",a).then(function(e){0==e.code&&(t.data=e.content,t.total=e.total,t.loading=!1)})},changePage:function(e){this.pageNumber=e,this.$refs.table.selectAll(!1),this.getList()},changePageSize:function(e){this.pageSize=e,this.getList()},del:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认该条数据?",onOk:function(){t.deleteRequest("/operation/procedure/deleteProcedure?id="+e.procedureId+"&userName="+t.userInfo.username).then(function(e){0===e.code?(t.$Message.success("删除成功"),t.getList()):(t.delTitle=e.result,t.delModalVisible=!0,t.delData=e.content)})}})},procedureTask:function(e){var t=this;this.taskFormInit(),this.getRequest("/operation/procedureTask/getTask?procedureId=85").then(function(a){if(0===a.code){var o=Object(r["a"])({procedureName:e.procedureName,procedureId:e.procedureId,enableStatus:e.enableStatus,auditingStatus:e.auditingStatus},a.content);t.taskForm=o,5==o.taskRepeatType&&(t.nowIndex=o.taskTimeType,t["time"+o.taskTimeType]=!0,t["taskTime"+t.nowIndex]=o.taskTime),t.taskModalVisible=!0}})},taskFormInit:function(){this.nowIndex="",this.time1=this.time2=this.time3=!1,this.taskTime1=this.taskTime2=this.taskTime3="",this.$refs["taskForm"].resetFields()},taskFormSubmit:function(){var e=this;this.$refs["taskForm"].validate(function(t){if(t){var a=Object(r["a"])({},e.taskForm);a.taskStartTime=e.formatDate(new Date(a.taskStartTime)),5==a.taskRepeatType&&(a.taskTimeType=e.nowIndex,a.taskTime=e["taskTime"+e.nowIndex]),e.getRequest("/operation/procedureTask/updateTask",a).then(function(t){0==t.code?(e.taskModalVisible=!1,e.taskFormInit(),e.$Message.success("设置成功")):e.$Message.info({content:t.result,duration:10,closable:!0})})}})},cancelReg:function(){this.taskFormInit(),this.taskModalVisible=!1},openStatus:function(e){var t=this,a={id:e.procedureId};this.postRequest("/operation/procedure/openStatus",a).then(function(a){0===a.code&&(e.enableStatus=1),t.$Message.info({content:a.result,duration:10,closable:!0})})},stopStatus:function(e){var t=this,a={id:e.procedureId};this.postRequest("/operation/procedure/stopStatus",a).then(function(a){0===a.code&&(e.enableStatus=0),t.$Message.info({content:a.result,duration:10,closable:!0})})},passAuditing:function(e){var t=this,a={id:e.procedureId,userName:this.userInfo.username};this.postRequest("/operation/procedure/passAuditing",a).then(function(e){0===e.code?(t.$Message.success("审核成功"),t.getList()):t.$Message.error({content:e.result,duration:10,closable:!0})})},formShow:function(){this.modal1=!0},formHide:function(){this.modal1=!1},formAdd:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.$refs.printForm.loadData(e.procedureId,!0),this.getList()},init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"新增";console.dir(e),this.btnName=t,"复制"!=t?this.$refs.flowForm.init(e,t):this.$Message.success("开发中")},jumpShow:function(){this.modal1=!1,this.printVisible=!0},printFormShow:function(e){this.$refs.printForm.loadData(e.procedureId,!0)},printFormHide:function(){this.printVisible=!1},printFormAdd:function(){this.printVisible=!1,this.getList()},timeChange:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0;this.nowIndex=e,this["time"+t]=this["time"+a]=!1,this["taskTime"+t]=this["taskTime"+a]=""},selesctChange:function(e,t,a,o){e&&(this.nowIndex=t,this["time"+t]=!0,this["time"+a]=this["time"+o]=!1,this["taskTime"+a]=this["taskTime"+o]="")}},created:function(){this.getList()},mounted:function(){this.tableHeight=window.innerHeight-270}},c=l,d=(a("b3f3"),a("2877")),u=Object(d["a"])(c,o,i,!1,null,null,null);u.options.__file="flow.vue";t["default"]=u.exports},1542:function(e,t,a){"use strict";var o=a("b9d1"),i=a.n(o);i.a},"184a":function(e,t,a){var o=a("aea9");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("59bc1f94",o,!0,{sourceMap:!1,shadowMode:!1})},"2dc2":function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"\n#taskForm .ivu-radio-group-vertical .ivu-radio-wrapper{margin-bottom:10px\n}\n#taskForm .taskTimeType{width:50px\n}",""])},3550:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"\n.orderOp .name .ivu-form-item{width:500px\n}\n.orderOp .ivu-divider-horizontal.ivu-divider-with-text-left:before{width:1%\n}\n.orderOp .ivu-divider-horizontal.ivu-divider-with-text-left .ivu-divider-inner-text,.orderOp .ivu-divider-horizontal.ivu-divider-with-text-right .ivu-divider-inner-text{font-weight:700\n}\n#orderModal .ivu-collapse .ivu-checkbox-group{display:inline-block\n}\n#orderModal .orderTitle{padding:7px 16px\n}\n#orderModal .dividerBottom{margin-bottom:20px\n}\n#orderModal .judgeBox{padding:0 20px 20px\n}\n#orderModal .judgeRules{padding:6px;line-height:30px\n}\n#orderModal .judgeCheckBox{padding:20px;border:1px solid #f90\n}\n.draButton{display:inline-block\n}\n.calJson,.outputDeploies{width:90%;display:flex;flex-wrap:wrap;min-height:40px;padding:10px 10px 0;border:1px solid #dcdee2;border-radius:4px\n}\n.calJson .no-move,.outputDeploies .no-move{transition:-webkit-transform 0s;transition:transform 0s;transition:transform 0s,-webkit-transform 0s\n}\n.calJson .ghost,.outputDeploies .ghost{opacity:.5;background:#c8ebfb\n}\n.calJson .elementColor0,.calJson .elementColor1,.calJson .elementColor2,.outputDeploies .elementColor0,.outputDeploies .elementColor1,.outputDeploies .elementColor2{background:#ea7e7e\n}\n.calJson .elementColor3,.calJson .elementColor4,.calJson .elementColor5,.outputDeploies .elementColor3,.outputDeploies .elementColor4,.outputDeploies .elementColor5{background:#e3e6de\n}\n.drag-item{padding:4px 18px;color:#000;border:1px solid #ccc;margin-right:10px;margin-bottom:10px;position:relative;cursor:pointer\n}\n.drag-item .ivu-icon{position:absolute;right:0;top:0;color:#fff;cursor:pointer;background:#096\n}\n.w200{width:200px\n}\n.w300{width:300px\n}",""])},4921:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"beginNodeForm",attrs:{model:e.beginNodeForm,"label-width":100,id:"beginNodeForm",rules:e.beginNodeFormValidate}},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.beginNodeForm.name,callback:function(t){e.$set(e.beginNodeForm,"name",t)},expression:"beginNodeForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.beginNodeForm.desc,callback:function(t){e.$set(e.beginNodeForm,"desc",t)},expression:"beginNodeForm.desc"}})],1),a("FormItem",{attrs:{label:"启动参数"}},[a("RadioGroup",{staticStyle:{width:"200px"},on:{"on-change":function(t){e.modifyChange(t)}},model:{value:e.beginNodeForm.variable,callback:function(t){e.$set(e.beginNodeForm,"variable",t)},expression:"beginNodeForm.variable"}},[a("Radio",{attrs:{label:0}},[e._v("有")]),a("Radio",{attrs:{label:1}},[e._v("无")])],1)],1),a("FormItem",{attrs:{label:"默认值"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:"",disabled:e.disabled1},model:{value:e.beginNodeForm.defaultValue,callback:function(t){e.$set(e.beginNodeForm,"defaultValue",t)},expression:"beginNodeForm.defaultValue"}})],1)],1)],1)},i=[],r=a("99d3"),n={data:function(){return{modal1:!0,beginNodeForm:{variable:0},type1:"",disabled1:!0,beginNodeFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}],desc:[{max:200,message:"最多输入200个字符",trigger:"blur"}]}}},computed:{},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeStart?id="+e).then(function(e){0==e.code&&e.content&&("1"==e.content.variable?t.disabled1=!0:(e.content.variable=0,t.disabled1=!1),t.beginNodeForm=e.content,t.type1=Object(r["a"])(e.content))})},getData:function(){return this.beginNodeForm},modifyChange:function(e){e?(this.disabled1=!0,this.beginNodeForm.defaultValue=""):this.disabled1=!1}}},s=n,l=a("2877"),c=Object(l["a"])(s,o,i,!1,null,null,null);c.options.__file="start.vue";t["default"]=c.exports},"50f3":function(e,t,a){"use strict";var o=a("184a"),i=a.n(o);i.a},5437:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"calculateForm",attrs:{model:e.calculateForm,"label-width":180,id:"orderOp",rules:e.calculateFormValidate}},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.calculateForm.name,callback:function(t){e.$set(e.calculateForm,"name",t)},expression:"calculateForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.calculateForm.desc,callback:function(t){e.$set(e.calculateForm,"desc",t)},expression:"calculateForm.desc"}})],1),a("Button",{staticClass:"filterButton",staticStyle:{"margin-left":"180px","margin-bottom":"16px"},attrs:{type:"primary",icon:"md-add"},on:{click:e.modifyNode}},[e._v("新增")]),a("Table",{ref:"table",attrs:{loading:e.loading,height:e.tableHeight,border:"",size:"small",columns:e.columns,data:e.data,"highlight-row":""}}),a("Modal",{attrs:{id:"calculateModal",fullscreen:""},on:{"on-ok":e.calculateSubmit},model:{value:e.modal,callback:function(t){e.modal=t},expression:"modal"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",{staticStyle:{"font-size":"15px"}},[e._v("算术运算设置")])]),a("Form",{ref:"disposesForm",attrs:{model:e.disposesForm,"label-width":180,id:"disposes"}},[a("FormItem",{attrs:{label:"变量名称",prop:"name"}},[a("Cascader",{class:["100"==e.five[0]?"w200":"w300"],staticStyle:{display:"inline-block"},attrs:{data:e.getProcessArray1},model:{value:e.five,callback:function(t){e.five=t},expression:"five"}}),"100"==e.five[0]?a("Input",{staticClass:"inputLeft",staticStyle:{display:"inline-block",width:"100px"},attrs:{disabled:e.disabled1},on:{"on-blur":e.diyNameChange},model:{value:e.diyName,callback:function(t){e.diyName=t},expression:"diyName"}}):e._e()],1),a("FormItem",{attrs:{label:"描述"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.disposesForm.desc,callback:function(t){e.$set(e.disposesForm,"desc",t)},expression:"disposesForm.desc"}})],1),a("FormItem",{attrs:{label:"输入数值常量"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:"",maxlength:20},model:{value:e.calculateForm.constant,callback:function(t){e.$set(e.calculateForm,"constant",t)},expression:"calculateForm.constant"}}),a("Icon",{attrs:{type:"ios-checkmark-circle",size:"24",color:"green"},on:{click:function(t){e.itemComfirm("常量","calculateForm")}}}),a("span",{staticStyle:{color:"#999"}},[e._v("限20字符")])],1),a("FormItem",{attrs:{label:"计算项"}},[a("Cascader",{class:["常量"==e.calItem[0]?"w100":"w200"],staticStyle:{display:"inline-block"},attrs:{data:e.getProcessArray,clearable:"",filterable:"",placeholder:"支持输入筛选,可以为空"},on:{"on-change":function(t){e.changeCalItem(t)}},model:{value:e.calculateForm.calItem,callback:function(t){e.$set(e.calculateForm,"calItem",t)},expression:"calculateForm.calItem"}}),"常量"==e.calItem[0]?a("Input",{staticClass:"inputLeft",staticStyle:{display:"inline-block",width:"100px"},model:{value:e.leftConstant,callback:function(t){e.leftConstant=t},expression:"leftConstant"}}):e._e(),a("Icon",{attrs:{type:"ios-checkmark-circle",size:"24",color:"green"},on:{click:function(t){e.itemComfirm("计算项","calculateForm")}}})],1),a("FormItem",{attrs:{label:"计算符号"}},e._l(e.colorArray,function(t,o){return o<=6?a("div",{key:o+10,staticClass:"draButton drag-item",style:{color:"black",background:t.color},attrs:{draggable:"true"},on:{dragstart:function(a){e.dragstart(a,t,o)}}},[a("span",[e._v(e._s(t.name))])]):e._e()})),a("FormItem",{attrs:{label:"公式"}},[a("div",{on:{dragover:function(e){e.preventDefault()},drop:function(t){e.drop(t,"calculateForm")}}},[a("draggable",{staticClass:"list-group calJson",attrs:{element:"div",options:e.dragOptions,move:e.onMove},on:{end:e.dataDragEnd},model:{value:e.disposesForm.arithmetic.calculates,callback:function(t){e.$set(e.disposesForm.arithmetic,"calculates",t)},expression:"disposesForm.arithmetic.calculates"}},e._l(e.disposesForm.arithmetic.calculates,function(t,o){return a("span",{key:o,staticClass:"drag-item",class:"elementColor"+t.type},[e._v("\n               "+e._s(e.labelShow(t))+"\n               "),a("Icon",{attrs:{type:"md-close"},on:{click:function(t){t.stopPropagation(),e.delCard(o,"calculateForm")}}})],1)}))],1)])],1)],1)],1)],1)},i=[],r=(a("7f7f"),a("99d3")),n=a("1516"),s=a.n(n),l={components:{draggable:s.a},data:function(){var e=this;return{newType:!1,modal:!1,loading:!1,type1:"",leftConstant:"",newLabel:[],modifyNodeIndex:0,tableHeight:220,columns:[{title:" ",type:"index",width:50,align:"center"},{title:"处理变量名",key:"nameType",render:function(t,a){var o=e.deepClone(a.row.nameType),i=[];switch(parseInt(o.type)){case 2:o.type="指令节点";break;case 3:o.type="指标节点";break;case 4:o.type="数据处理节点";break;case 5:o.type="循环节点";break;case 6:o.type="判断节点";break;case 7:o.type="报告节点";break;case 8:o.type="触发节点";break;case 9:o.type="系统变量";break;case 10:o.type="常量";break;case 11:o.type="节点属性";break;default:o.type="";break}i.push(""+o.type),o.se&&i.push(""+o.se.name),o.tr&&i.push(""+o.tr.name),o.fo&&i.push(""+o.fo.name),o.fv&&i.push(""+o.fv.name);for(var r=i.length-1;r>=0;r--)if("null"!=i[r]&&null!=i[r]&&void 0!=i[r])return t("div",i[r])}},{title:"标识",key:"label",render:function(e,t){return 0==t.row.label?e("div","新增"):e("div","非新增")}},{title:"类型",key:"disposeType",render:function(e,t){if(1==t.row.disposeType)return e("div","算术运算")}},{title:"数据处理描述",key:"desc"},{title:"操作",key:"action",fixed:"right",width:138,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.modifyNode(a.index,a.row,"修改")}}},"修改"),t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.deleteNode(a.index,a.row,"删除")}}},"删除")])}}],data:[],five:[],diyName:"",calItem:[],calculateForm:{disposeType:1,calItem:[],disposes:[{arithmetic:{calculates:[]}}]},disposesForm:{arithmetic:{calculates:[]}},calculateFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}]},colorArray:[{color:"#FFDF25",name:"+"},{color:"#FFFF66",name:"-"},{color:"#D0E17D",name:"*"},{color:"#CC9966",name:"/"},{color:"#EF5AA1",name:"("},{color:"#EF5AA1",name:")"},{color:"#EB35A1",name:"MOD"},{color:"#CC6666",name:"变量"},{color:"#36A9CE",name:"常量"}],elementColor:"#47a9da",baseObj:{type:"",se:{},tr:{},fo:{},fv:{}},processArray:[],disabled1:!1,userInfo:JSON.parse(localStorage.getItem("userInfo"))}},created:function(){},computed:{dragOptions:function(){return{animation:0,ghostClass:"ghost"}},getProcessArray:function(){return this.$store.state.yt.processArray},getProcessArray1:function(){var e=this.$store.state.yt.processArray;this.processArray=[];for(var t=0;t<e.length;t++)"数据处理节点"!=e[t].label&&"节点属性"!=e[t].label||this.processArray.push(e[t]);return this.processArray.push({label:"自定义",value:"100"}),this.processArray}},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeDataDispose?id="+e).then(function(e){if(0==e.code){var a=e.content;if(t.type1=Object(r["a"])(e.content),null===a.arithmetic&&(a.arithmetic={calculates:[]}),null===a.nameType&&(a.nameType=t.deepClone(t.baseObj)),t.calculateForm=a,e.content.disposes){t.data=e.content.disposes;for(var o=0;o<e.content.disposes.length;o++)0==parseInt(e.content.disposes[o].label)&&(t.newLabel.push(e.content.disposes[o].nameType.se.name),console.log(t.newLabel))}else t.data=[]}})},getData:function(){var e=this.deepClone(this.calculateForm);return e},itemComfirm:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"计算项",t=arguments.length>1?arguments[1]:void 0;this.deepClone(this.baseObj);if("calculateForm"==t){var a=this.deepClone(this.baseObj),o=this.calculateForm.calItem;if("计算项"==e)if("常量"==o[0]){var i=this.deepClone(o);i.push(this.leftConstant),a=Object(r["c"])(i)}else a=Object(r["c"])(o);else"常量"==e&&(a.type=10,a.se.name=this.calculateForm.constant,a.se.num=1);this.disposesForm.arithmetic.calculates.push(a)}},labelShow:function(e){return e.fv&&"{}"!==JSON.stringify(e.fv)&&e.fv.name?e.fv.name:e.fo&&"{}"!==JSON.stringify(e.fo)&&e.fo.name?e.fo.name:e.tr&&"{}"!==JSON.stringify(e.tr)&&e.tr.name?e.tr.name:e.se&&"{}"!==JSON.stringify(e.se)&&e.se.name?e.se.name:0==e.type?"开始节点":1==e.type?"结束节点":2==e.type?"指令节点":3==e.type?"指标节点":4==e.type?"数据节点":5==e.type?"报告节点":6==e.type?"判断节点":7==e.type?"循环节点":8==e.type?"触发节点":void 0},drop:function(e,t){if(e.dataTransfer.getData("item")){var a=this.deepClone(this.baseObj);a.type="10",a.se.name=e.dataTransfer.getData("item"),a.se.num=0,"calculateForm"==t&&this.disposesForm.arithmetic.calculates.push(a)}},onMove:function(e){e.draggedContext,e.relatedContext;return!0},dragstart:function(e,t,a){e.dataTransfer.setData("item",t.name)},dataDragEnd:function(e){e.preventDefault()},delCard:function(e,t){"calculateForm"==t&&this.disposesForm.arithmetic.calculates.splice(e,1)},modifyNode:function(e,t,a){if(this.calItem=[],this.calculateForm.calItem=[],this.leftConstant="",this.modal=!0,"修改"==a)if(this.modifyNodeIndex=e,this.newType=!1,this.disposesForm=t,0==parseInt(t.label))this.five=[],this.five.push("100"),this.diyName=t.nameType.se.name,this.disabled1=!0;else{var o=this.deepClone(this.disposesForm.nameType),i=[];switch(parseInt(o.type)){case 2:o.type="指令节点";break;case 3:o.type="指标节点";break;case 4:o.type="数据处理节点";break;case 5:o.type="循环节点";break;case 6:o.type="判断节点";break;case 7:o.type="报告节点";break;case 8:o.type="触发节点";break;case 9:o.type="系统变量";break;case 10:o.type="常量";break;case 11:o.type="节点属性";break;default:o.type="";break}if(i.push(""+o.type),o.se&&i.push(""+o.se.name),o.tr&&i.push(""+o.tr.name),o.fo&&i.push(""+o.fo.name),o.fv&&i.push(""+o.fv.name),this.five=i,"数据处理节点"==this.five[0]){for(var r=this.processArray,n=!1,s=0;s<r.length;s++)if(void 0!=r[s].children)for(var l=0;l<r[s].children.length;l++)void 0!=this.five[1]?this.five[1]==r[s].children[l].label&&(n=!0):r[s].children||(n=!0);0==n&&(this.five=[]),this.disabled1=!1}}else this.newType=!0,this.disposesForm={arithmetic:{calculates:[]}},this.calculateForm.constant="",this.five=[],this.disabled1=!1},deleteNode:function(e,t,a){var o=this;this.$Modal.confirm({title:"删除",content:"您确认删除该条数据?",onOk:function(){o.calculateForm.disposes.splice(e,1),o.data=o.calculateForm.disposes,o.$Message.success("删除成功")}})},calculateSubmit:function(){if(100==parseInt(this.five[0])){var e={type:"4",se:{num:0,name:this.diyName},tr:{num:null,name:null},fo:{num:null,name:null},fv:{num:null,name:null}};this.disposesForm.nameType=e,this.disposesForm.label=0}else this.disposesForm.nameType=Object(r["c"])(this.five),this.disposesForm.label=1;this.disposesForm.disposeType=1,0==this.newType?this.calculateForm.disposes[this.modifyNodeIndex]=this.disposesForm:(null==this.calculateForm.disposes&&(this.calculateForm.disposes=[]),this.calculateForm.disposes.push(this.disposesForm));for(var t=!1,a=0;a<this.newLabel.length;a++)this.newLabel[a]==this.diyName&&(t=!0);if(0==t){""!=this.diyName&&this.newLabel.push(this.diyName);for(a=0;a<this.processArray.length;a++)"数据处理节点"==this.processArray[a].label&&void 0!=this.processArray[a].children&&this.processArray[a].children.push({label:this.diyName,value:this.diyName})}this.data=this.calculateForm.disposes,this.disposesForm={arithmetic:{calculates:[]}},this.calculateForm.calItem=[],this.calculateForm.constant="",this.five=[],this.diyName="",this.calItem=[],this.leftConstant=""},diyNameChange:function(){if(this.newLabel.length>0)for(var e=0;e<this.newLabel.length;e++)this.newLabel[e]==this.diyName&&(this.diyName="",this.$Message.warning("已存在该变量，请重新定义！"))},changeCalItem:function(e){this.calItem=e}}},c=l,d=(a("8fc1"),a("2877")),u=Object(d["a"])(c,o,i,!1,null,null,null);u.options.__file="dataDispose.vue";t["default"]=u.exports},"69b9":function(e,t,a){var o=a("3550");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("ac528acc",o,!0,{sourceMap:!1,shadowMode:!1})},"700b":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"downloadNode",staticStyle:{position:"fixed",right:"40px",top:"10px","z-index":"99999"}},[a("Button",{attrs:{type:"primary"},on:{click:e.printFormAdd}},[e._v("确认")]),a("Button",{attrs:{type:"text"},on:{click:e.printFormHide}},[e._v("关闭")])],1),a("print",{ref:"print",on:{onItemDbClick:e.onItemDbClick,success:e.success}}),a("Modal",{attrs:{fullscreen:e.fullValue,title:e.nodeTitle+"节点编辑",id:"nodeForm","footer-hide":""},on:{"on-ok":e.nodeSubmit},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},["start"==e.showString?a("start",{ref:"start"}):"end"==e.showString?a("end",{ref:"end"}):"instruct"==e.showString?a("instruct",{ref:"instruct"}):"circle"==e.showString?a("circleForm",{ref:"circle"}):"judge"==e.showString?a("judge",{ref:"judge"}):"trigger"==e.showString?a("trigger",{ref:"trigger"}):"dataDispose"==e.showString?a("dataDispose",{ref:"dataDispose"}):"task"==e.showString?a("div",{ref:"task"},[e._v("\n      开发中\n    ")]):e._e(),a("div",{staticClass:"closeButton",class:{fullscreen:e.fullValue}},[a("Button",{attrs:{type:"primary"},on:{click:e.nodeSubmit}},[e._v("确认")]),a("Button",{attrs:{type:"text"},on:{click:e.nodeCancel}},[e._v("关闭")])],1)],1)],1)},i=[],r=(a("7f7f"),a("a481"),a("57e7"),a("96cf"),a("1da1")),n=a("4921"),s=a("8705"),l=a("dabb"),c=a("e622"),d=a("b019"),u=a("9258"),p=a("5437"),m=a("c9dc"),h={components:{start:n["default"],end:s["default"],instruct:l["default"],circleForm:c["default"],judge:d["default"],trigger:u["default"],dataDispose:p["default"],print:m["default"]},props:{printData:{type:Object,default:function(){}}},data:function(){return{arr:["算数运算","过滤","排序","查找","聚合运算","联结","集合","数组","正则运算"],row:{},btnName:"新增",showString:"",value1:!1,value2:!1,tabsOn:"name1",nodeTitle:"",isCollapsed:!1,fullValue:!1}},computed:{keyGetSelect:function(){return this.$store.state.yt.keySelectArray}},methods:{printFormAdd:function(){this.$refs.print.saveProcedureJson(!0)},printFormHide:function(){this.$emit("on-cancel")},success:function(){this.$emit("on-add")},loadData:function(){var e=Object(r["a"])(regeneratorRuntime.mark(function e(t){var a,o,i=this,r=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=r.length>1&&void 0!==r[1]&&r[1],e.prev=1,this.getRequest("/operation/param/getCurrentParam?id="+t).then(function(e){0===e.code?i.$store.commit("setProcessArray",e.content):i.$Message.error({content:e.result,duration:20,closable:!0})}),e.next=5,this.request("get","/operation/procedure/getProcedure?id="+t);case 5:o=e.sent,this.$store.commit("setProcessId",t),this.$refs.print.loadData(o),a&&this.$parent.$parent.jumpShow(),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),this.$Message.warning(e.t0);case 14:case"end":return e.stop()}},e,this,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),onItemDbClick:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"start";this.getRequest("/operation/param/getCurrentParam?id="+this.$store.state.yt.processId).then(function(o){0===o.code?(t.$store.commit("setProcessArray",o.content),t.fullValue=!1,a.indexOf("start")>=0?(t.showString="start",t.nodeTitle="开始"):a.indexOf("end")>=0?(t.showString="end",t.nodeTitle="结束"):a.indexOf("instruct")>=0?(t.showString="instruct",t.nodeTitle="指令",t.fullValue=!0):a.indexOf("circleStart")>=0?(t.showString="circle",t.nodeTitle="循环",t.fullValue=!0):a.indexOf("circleEnd")>=0?(t.showString="circle",t.nodeTitle="循环",e--,t.fullValue=!0):a.indexOf("judge")>=0?(t.showString="judge",t.nodeTitle="判断",t.fullValue=!0):a.indexOf("trigger")>=0?(t.showString="trigger",t.nodeTitle="触发"):a.indexOf("dataDispose")>=0?(t.showString="dataDispose",t.nodeTitle="数据",t.fullValue=!0):a.indexOf("target")>=0&&(t.showString="target",t.nodeTitle="指标"),t.value2=!0,t.$nextTick(function(){t.$refs[t.showString].init(e)})):t.$Message.error({content:o.result,duration:20,closable:!0})})},nodeSubmit:function(){var e=this,t="";switch(this.showString){case"start":t="beginNodeForm";break;case"end":t="endNodeForm";break;case"instruct":t="orderForm";break;case"judge":t="judgeNodeForm";break;case"trigger":t="triggerNodeForm";break;case"dataDispose":t="calculateForm";break;case"circle":t="circleForm";break}this.$refs[this.showString].$refs[t].validate(function(t){if(t){var a=e.$refs[e.showString].getData(),o=e.showString;o=o.replace(/\b\w+\b/g,function(e){return e.substring(0,1).toUpperCase()+e.substring(1)});var i="/operation/Node"+o;e.putYTRequest(i,a).then(function(t){if(0==t.code){var o=e.$refs.print.$refs.gooFlow.getItemInfo(a.id,"node");o.extra.desc=a.desc||a.describe;var i=e.$refs.print.propsForm;e.$refs.print.$refs.gooFlow.setItemExtra(a.id,"node",o),e.$nextTick(function(){e.$refs.print.$refs.gooFlow.setName(a.id,a.name,"node"),i.name=a.name,i.extra.desc=a.desc||a.describe}),e.$nextTick(function(){e.$refs["print"].saveProcedureJson()}),e.$Message.info("保存成功"),e.value2=!1}else e.$Message.warning(t.msg||t.result)})}else e.$Message.error("请填写完整表单信息!")})},nodeCancel:function(){this.value2=!1}}},f=h,g=(a("1542"),a("2877")),b=Object(g["a"])(f,o,i,!1,null,null,null);b.options.__file="printForm.vue";t["default"]=b.exports},"7bd1":function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"addForm",attrs:{model:e.addForm,"label-width":200,rules:e.addFormValidate}},[a("FormItem",{attrs:{label:"流程名称",prop:"procedureName"}},[a("Input",{staticStyle:{width:"300px"},attrs:{maxlength:30},model:{value:e.addForm.procedureName,callback:function(t){e.$set(e.addForm,"procedureName",t)},expression:"addForm.procedureName"}})],1),a("FormItem",{attrs:{label:"流程所属",prop:"belongMajor"}},[a("Select",{staticStyle:{width:"300px"},attrs:{clearable:"",filterable:"",placeholder:"支持输入筛选,不能为空"},model:{value:e.addForm.belongMajor,callback:function(t){e.$set(e.addForm,"belongMajor",t)},expression:"addForm.belongMajor"}},e._l(e.belongMajorArr,function(t){return a("Option",{key:t,attrs:{value:t}},[e._v(e._s(t))])}))],1),a("FormItem",{attrs:{label:"描述",prop:"memo"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:10}},model:{value:e.addForm.memo,callback:function(t){e.$set(e.addForm,"memo",t)},expression:"addForm.memo"}})],1),a("FormItem",["查看"!=e.btnName?a("Button",{attrs:{type:"primary"},on:{click:function(t){e.addFormSubmit("草稿",!1)}}},[e._v("保存")]):e._e(),"查看"!=e.btnName?a("Button",{attrs:{type:"primary"},on:{click:function(t){e.addFormSubmit("草稿",!0)}}},[e._v("保存并绘制流程图")]):e._e(),a("Button",{staticStyle:{"margin-left":"8px"},attrs:{type:"warning"},on:{click:e.cancelReg}},[e._v("取消")])],1)],1)],1)},i=[],r=a("be94"),n=(a("96cf"),a("1da1")),s={data:function(){return{dataType:["neCategory","neType","neProducer"],userInfo:JSON.parse(localStorage.getItem("userInfo")),addForm:{procedureName:"",belongMajor:"",memo:""},addFormValidate:{belongMajor:[{required:!0,message:"选择不能为空",trigger:"change"}],procedureName:[{required:!0,message:"不能为空",trigger:"blur"}]},belongMajorArr:["核心网","模拟数据1","模拟数据2"],submitLoading:!1,maxLength:20,row:{},btnName:"新增"}},computed:{keyGetSelect:function(){return this.$store.state.yt.keySelectArray}},methods:{init:function(e,t){var a=this;this.btnName=t,this.addFormInit(!0),this.addForm=this.deepClone(e),this.getRequest("/operation/procedure/listMajors").then(function(e){a.belongMajorArr=e.content})},addFormInit:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.$refs["addForm"].resetFields(),e?this.$emit("on-show"):this.$emit("on-cancel")},addFormSubmit:function(e,t){var a=this;this.$refs["addForm"].validate(function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(o){var i,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!o){e.next=24;break}if(i=Object(r["a"])({},a.addForm),i.userName=a.userInfo.username,"新增"!=a.btnName){e.next=23;break}return e.prev=4,e.next=7,a.request("post","/operation/procedure/addProcedure",i);case 7:return n=e.sent,i.procedureId=n.procedureId,s={procedureId:n.procedureId,userName:a.userInfo.username,json:JSON.stringify({title:i.procedureName,nodes:{},lines:{},initNum:1,areas:{},memos:{},extra:{}})},e.next=12,a.request("post","/operation/procedure/saveProcedureJson",s);case 12:e.sent,a.$Message.success("新增成功"),a.$emit("on-add",i,t),a.addFormInit(),e.next=21;break;case 18:e.prev=18,e.t0=e["catch"](4),a.$Message.warning(e.t0);case 21:e.next=24;break;case 23:"修改"==a.btnName?a.postRequest("/operation/procedure/updateProcedure",i).then(function(e){t||a.$Message.success("修改成功"),a.$emit("on-add",i,t),a.addFormInit()}):"复制"==a.btnName&&a.$Message.success("开发中");case 24:case"end":return e.stop()}},e,this,[[4,18]])}));return function(t){return e.apply(this,arguments)}}())},cancelReg:function(){var e=this;this.$Modal.confirm({title:"确定关闭该页面吗",onOk:function(){e.addFormInit()}})}}},l=s,c=a("2877"),d=Object(c["a"])(l,o,i,!1,null,null,null);d.options.__file="flowForm.vue";t["default"]=d.exports},8705:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"endNodeForm",attrs:{model:e.endNodeForm,"label-width":100,id:"endNodeForm",rules:e.endNodeFormValidate}},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.endNodeForm.name,callback:function(t){e.$set(e.endNodeForm,"name",t)},expression:"endNodeForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.endNodeForm.desc,callback:function(t){e.$set(e.endNodeForm,"desc",t)},expression:"endNodeForm.desc"}})],1),a("FormItem",{attrs:{label:"结束状态"}},[a("RadioGroup",{staticStyle:{width:"200px"},model:{value:e.endNodeForm.status,callback:function(t){e.$set(e.endNodeForm,"status",t)},expression:"endNodeForm.status"}},[a("Radio",{attrs:{label:0}},[e._v("正常")]),a("Radio",{attrs:{label:1}},[e._v("异常")]),a("Radio",{attrs:{label:2}},[e._v("未知")])],1)],1)],1)],1)},i=[],r=a("99d3"),n={data:function(){return{type1:"",endNodeForm:{status:0},endNodeFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}],desc:[{max:200,message:"最多输入200个字符",trigger:"blur"}]}}},computed:{},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeEnd?id="+e).then(function(e){0==e.code&&e.content&&(t.endNodeForm=e.content,t.type1=Object(r["a"])(e.content))})},getData:function(){return this.endNodeForm}}},s=n,l=a("2877"),c=Object(l["a"])(s,o,i,!1,null,null,null);c.options.__file="end.vue";t["default"]=c.exports},"8f71":function(e,t,a){var o=a("2dc2");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("617400d6",o,!0,{sourceMap:!1,shadowMode:!1})},"8fc1":function(e,t,a){"use strict";var o=a("69b9"),i=a.n(o);i.a},9258:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"triggerNodeForm",attrs:{model:e.triggerNodeForm,"label-width":100,id:"triggerNodeForm",rules:e.triggerNodeFormValidate}},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.triggerNodeForm.name,callback:function(t){e.$set(e.triggerNodeForm,"name",t)},expression:"triggerNodeForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.triggerNodeForm.desc,callback:function(t){e.$set(e.triggerNodeForm,"desc",t)},expression:"triggerNodeForm.desc"}})],1),a("FormItem",{attrs:{label:"流程选择"}},[a("Cascader",{staticStyle:{width:"300px"},attrs:{data:e.processChoice},model:{value:e.right,callback:function(t){e.right=t},expression:"right"}})],1),a("FormItem",{attrs:{label:"赋值变量"}},[a("RadioGroup",{staticStyle:{width:"400px"},model:{value:e.triggerNodeForm.variable,callback:function(t){e.$set(e.triggerNodeForm,"variable",t)},expression:"triggerNodeForm.variable"}},[a("Radio",{attrs:{label:0}},[e._v("直接指定")]),a("Radio",{attrs:{label:1}},[e._v("变量指定")]),a("Radio",{attrs:{label:2}},[e._v("无")])],1)],1),"0"==e.triggerNodeForm.variable?a("FormItem",{attrs:{label:"参数"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.triggerNodeForm.variableStr,callback:function(t){e.$set(e.triggerNodeForm,"variableStr",t)},expression:"triggerNodeForm.variableStr"}})],1):e._e(),"2"==e.triggerNodeForm.variable?a("FormItem",{attrs:{label:"参数"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""}})],1):e._e(),"1"==e.triggerNodeForm.variable?a("FormItem",{attrs:{label:"变量"}},[a("Cascader",{class:["常量"==e.variableFive[0]?"w100":"w200"],staticStyle:{display:"inline-block"},attrs:{data:e.getProcessArray},model:{value:e.variableFive,callback:function(t){e.variableFive=t},expression:"variableFive"}}),"常量"==e.variableFive[0]?a("Input",{staticClass:"inputLeft",staticStyle:{display:"inline-block",width:"100px"},model:{value:e.leftConstant,callback:function(t){e.leftConstant=t},expression:"leftConstant"}}):e._e()],1):e._e()],1)],1)},i=[],r=a("99d3"),n={data:function(){return{type1:"",right:[],variableFive:[],leftConstant:"",triggerNodeForm:{variable:"0",processId:"",processName:"",variableFive:{}},triggerNodeFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}],desc:[{max:200,message:"最多输入200个字符",trigger:"blur"}]},processChoice:[],baseObj:{type:"",se:{},tr:{},fo:{},fv:{}}}},computed:{getProcessArray:function(){return this.$store.state.yt.processArray}},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeTrigger/process?id="+e).then(function(e){0==e.code&&(t.processChoice=e.content)}),this.getRequest("/operation/NodeTrigger?id="+e).then(function(e){if(0==e.code){null==e.content.variable&&(e.content.variable="0"),t.triggerNodeForm=e.content,t.right=[];for(var a=t.processChoice,o=0;o<a.length;o++)for(var i=0;i<a[o].children.length;i++)parseInt(a[o].children[i].value)==e.content.processId&&t.right.push(""+a[o].label,""+a[o].children[i].value);if("1"==t.triggerNodeForm.variable){var n=Object(r["b"])(e.content.variableFive);"常量"==n[0]?(t.leftConstant=n[2],t.variableFive=t.deepClone(n),t.variableFive.splice(2,1)):t.variableFive=n}t.type1=Object(r["a"])(e.content)}})},getData:function(){for(var e=this.processChoice,t=0;t<e.length;t++)if(e[t].label==this.right[0])for(var a=0;a<e[t].children.length;a++)e[t].children[a].value==this.right[1]&&(this.triggerNodeForm.processId=e[t].children[a].value,this.triggerNodeForm.processName=e[t].children[a].label);if("1"==this.triggerNodeForm.variable){if("常量"==this.variableFive[0]){var o=this.deepClone(this.variableFive);o.push(this.leftConstant),this.triggerNodeForm.variableFive=Object(r["c"])(o)}else this.triggerNodeForm.variableFive=Object(r["c"])(this.variableFive);this.triggerNodeForm.variableStr=""}else"0"==this.triggerNodeForm.variable?this.triggerNodeForm.variableFive={}:(this.triggerNodeForm.variableFive={},this.triggerNodeForm.variableStr="");return this.triggerNodeForm}}},s=n,l=a("2877"),c=Object(l["a"])(s,o,i,!1,null,null,null);c.options.__file="trigger.vue";t["default"]=c.exports},aea9:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"\n.w100{width:100px\n}\n.w200{width:200px\n}",""])},b019:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"judgeNodeForm",attrs:{model:e.judgeNodeForm,"label-width":100,id:"judgeNodeForm",rules:e.judgeNodeFormValidate}},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.judgeNodeForm.name,callback:function(t){e.$set(e.judgeNodeForm,"name",t)},expression:"judgeNodeForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.judgeNodeForm.desc,callback:function(t){e.$set(e.judgeNodeForm,"desc",t)},expression:"judgeNodeForm.desc"}})],1),a("FormItem",{attrs:{label:"逻辑运算"}},[a("div",{attrs:{id:"opTree"}},[a("my-tree",{attrs:{treeData:e.judgeNodeForm.opConditions},on:{addBrother:e.addBrother,addChild:e.addChild,deleteNode:e.deleteNode}})],1)])],1)],1)},i=[],r=(a("7f7f"),a("57e7"),a("6b54"),a("87b3"),a("6d67"),a("99d3")),n=a("f247"),s={components:{"my-tree":n["default"]},data:function(){return{type1:"",judgeNodeForm:{},judgeNodeFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}],desc:[{max:200,message:"最多输入200个字符",trigger:"blur"}]},changeData:["left","right"],baseObj:{type:"",se:{},tr:{},fo:{},fv:{}},opConditionsObj:{operator:2,compare:4,leftConstant:"",rightConstant:"",left:[],right:[],childOperator:0,childConditions:[]}}},computed:{},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeJudge?id="+e).then(function(e){if(0==e.code){var a=e.content;t.type1=Object(r["a"])(e.content),null!==a.opConditions?a.opConditions.map(function(e){t.changeBack(e)}):a.opConditions=[t.deepClone(t.opConditionsObj)],t.judgeNodeForm=a}})},getData:function(){var e=this,t=this.deepClone(this.judgeNodeForm);return t&&"[object Array]"===Object.prototype.toString.call(t.opConditions)?t.opConditions.map(function(t){e.changeFun(t)}):t.opConditions=null,t},conditionsAdd:function(e){var t=this.newNode();e.push(t)},addBrother:function(e,t){var a=this.getParentData(e.target);if(a){var o=a.indexOf(t);-1!==o&&a.splice(o+1,0,this.newNode())}},addChild:function(e,t){t.childConditions||this.$set(t,"childConditions",[]),t.childConditions.push(this.newNode())},deleteNode:function(e,t){var a=this.getParentData(e.target);if(a){var o=a.indexOf(t);-1!==o&&a.splice(o,1)}},newNode:function(){return{operator:0,compare:4,leftConstant:"",rightConstant:"",left:[],right:[],childOperator:0,childConditions:[]}},getParentData:function(e){while(e&&"BODY"!==e.tagName){if(e.__vue__&&"my-tree"===e.__vue__.$options.name)return e.__vue__.treeData;e=e.parentNode}return null},changeFun:function(e){var t=this;this.changeData.map(function(a){if(e[a]&&"[object Array]"===Object.prototype.toString.call(e[a]))if("常量"==e[a][0]){var o=t.deepClone(e[a]);o.push(e[a+"Constant"]),e[a]=Object(r["c"])(o)}else e[a]=Object(r["c"])(e[a]);else e[a]||(e[a]={});e.childConditions&&e.childConditions.length&&e.childConditions.map(function(e){console.dir(e),t.changeFun(e)})})},changeBack:function(e){var t=this;this.changeData.map(function(a){if(e[a]&&"[object Object]"===Object.prototype.toString.call(e[a])){var o=Object(r["b"])(e[a]);"常量"==o[0]?(e[a+"Constant"]=o[2],e[a]=t.deepClone(o),e[a].splice(2,1)):e[a]=o}else e[a]||(e[a]=[]);e.childConditions&&e.childConditions.length&&e.childConditions.map(function(e){console.dir(e),t.changeBack(e)})})}}},l=s,c=a("2877"),d=Object(c["a"])(l,o,i,!1,null,null,null);d.options.__file="judge.vue";t["default"]=d.exports},b3f3:function(e,t,a){"use strict";var o=a("8f71"),i=a.n(o);i.a},b9d1:function(e,t,a){var o=a("ed91");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=a("499e").default;i("3d70863e",o,!0,{sourceMap:!1,shadowMode:!1})},e622:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{ref:"circleForm",staticStyle:{height:"500px"},attrs:{model:e.circleForm,"label-width":100,id:"circleForm",rules:e.circleFormValidate}},[a("Collapse",{model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},[a("Panel",{attrs:{name:"1"}},[a("p",{attrs:{slot:"content"},slot:"content"},[a("FormItem",{attrs:{label:"节点名称",prop:"name"}},[a("Input",{staticStyle:{width:"300px"},attrs:{clearable:""},model:{value:e.circleForm.name,callback:function(t){e.$set(e.circleForm,"name",t)},expression:"circleForm.name"}})],1),a("FormItem",{attrs:{label:"节点类型"}},[a("Input",{staticStyle:{width:"300px"},attrs:{disabled:""},model:{value:e.type1,callback:function(t){e.type1=t},expression:"type1"}})],1),a("FormItem",{attrs:{label:"节点说明",prop:"desc"}},[a("Input",{staticStyle:{width:"300px"},attrs:{type:"textarea",autosize:{minRows:3,maxRows:4},clearable:""},model:{value:e.circleForm.desc,callback:function(t){e.$set(e.circleForm,"desc",t)},expression:"circleForm.desc"}})],1)],1)]),a("Panel",{attrs:{name:"2"}},[a("p",{attrs:{slot:"content"},slot:"content"},[a("FormItem",{attrs:{label:"循环方式"}},[a("RadioGroup",{staticStyle:{width:"400px"},on:{"on-change":function(t){e.changeCircle(t)}},model:{value:e.circleForm.circleType,callback:function(t){e.$set(e.circleForm,"circleType",t)},expression:"circleForm.circleType"}},[a("Radio",{attrs:{label:2}},[e._v("元组遍历")]),a("Radio",{attrs:{label:0}},[e._v("开始判断")]),a("Radio",{attrs:{label:1}},[e._v("结束判断")])],1)],1),a("FormItem",{attrs:{label:"循环配置"}},[a("div",[a("div",[e._v("：循环变量")])]),"2"==e.circleForm.circleType?a("div",[a("Cascader",{class:["常量"==e.five[0]?"w100":"w200"],staticStyle:{display:"inline-block"},attrs:{data:e.getProcessArray},model:{value:e.five,callback:function(t){e.five=t},expression:"five"}}),"常量"==e.five[0]?a("Input",{staticClass:"inputLeft",staticStyle:{display:"inline-block",width:"100px"},model:{value:e.leftConstant,callback:function(t){e.leftConstant=t},expression:"leftConstant"}}):e._e()],1):e._e(),"1"==e.circleForm.circleType||"0"==e.circleForm.circleType?a("div",{attrs:{id:"opTree"}},[a("my-tree",{attrs:{treeData:e.opConditions},on:{addBrother:e.addBrother,addChild:e.addChild,deleteNode:e.deleteNode}})],1):e._e()])],1)])],1)],1)],1)},i=[],r=(a("6b54"),a("87b3"),a("7f7f"),a("57e7"),a("6d67"),a("99d3")),n=a("f247"),s={components:{"my-tree":n["default"]},data:function(){return{circleForm:{circleType:2},five:[],leftConstant:"",opConditions:[],type1:"",circleFormValidate:{name:[{required:!0,message:"节点名称不能为空",trigger:"blur"},{max:20,message:"最多输入20个字符",trigger:"blur"}],desc:[{max:200,message:"最多输入200个字符",trigger:"blur"}]},value1:[1,2],changeData:["left","right"],baseObj:{type:"",se:{},tr:{},fo:{},fv:{}},opConditionsObj:{operator:0,compare:4,leftConstant:"",rightConstant:"",left:[],right:[],childOperator:0,childConditions:[]}}},created:function(){},computed:{getProcessArray:function(){return this.$store.state.yt.processArray}},methods:{init:function(e){var t=this;this.getRequest("/operation/NodeCircle?id="+e).then(function(e){if(0==e.code){t.type1=Object(r["a"])(e.content);var a=e.content;if(null===a.circleType)a.circleType=2,t.five=[],t.opConditions=[t.deepClone(t.opConditionsObj)];else if("2"==a.circleType){var o=Object(r["b"])(a.five);"常量"==o[0]?(t.leftConstant=o[2],t.five=t.deepClone(o),t.five.splice(2,1)):t.five=o}else a.opConditions&&a.opConditions.length?a.opConditions.map(function(e){t.changeBack(e)}):a.opConditions=[t.deepClone(t.opConditionsObj)];t.circleForm=a,t.opConditions=t.deepClone(a.opConditions)}})},changeCircle:function(e){"2"!=e&&(this.five=[],this.opConditions=[this.deepClone(this.opConditionsObj)])},getData:function(){var e=this,t=this.circleForm;if("2"==t.circleType&&(t.opConditions=null),this.five.length>0){if("常量"==this.five[0]){var a=this.deepClone(this.five);a.push(this.leftConstant),t.five=Object(r["c"])(a)}else t.five=Object(r["c"])(this.five);t.opConditions=[]}else this.five=[],t.five=this.deepClone(this.baseObj),t.opConditions=this.deepClone(this.opConditions);return t.opConditions&&t.opConditions.length&&t.opConditions.map(function(t){e.changeFun(t)}),t},conditionsAdd:function(e){var t=this.newNode();e.push(t)},addBrother:function(e,t){var a=this.getParentData(e.target);if(a){var o=a.indexOf(t);-1!==o&&a.splice(o+1,0,this.newNode())}},addChild:function(e,t){t.childConditions||this.$set(t,"childConditions",[]),t.childConditions.push(this.newNode())},deleteNode:function(e,t){var a=this.getParentData(e.target);if(a){var o=a.indexOf(t);-1!==o&&a.splice(o,1)}},newNode:function(){return{operator:0,compare:4,left:[],right:[],childOperator:0,childConditions:[]}},getParentData:function(e){while(e&&"BODY"!==e.tagName){if(e.__vue__&&"my-tree"===e.__vue__.$options.name)return e.__vue__.treeData;e=e.parentNode}return null},changeFun:function(e){var t=this;this.changeData.map(function(a){if(e[a]&&"[object Array]"===Object.prototype.toString.call(e[a]))if("常量"==e[a][0]){var o=t.deepClone(e[a]);o.push(e[a+"Constant"]),e[a]=Object(r["c"])(o)}else e[a]=Object(r["c"])(e[a]);else e[a]||(e[a]=null);e.childConditions&&e.childConditions.length&&e.childConditions.map(function(e){t.changeFun(e)})})},changeBack:function(e){var t=this;this.changeData.map(function(a){if(e[a]&&"[object Object]"===Object.prototype.toString.call(e[a])){var o=Object(r["b"])(e[a]);"常量"==o[0]?(e[a+"Constant"]=o[2],e[a]=t.deepClone(o),e[a].splice(2,1)):e[a]=o}else e[a]||(e[a]=[]);e.childConditions&&e.childConditions.length&&e.childConditions.map(function(e){console.dir(e),t.changeBack(e)})})}}},l=s,c=(a("50f3"),a("2877")),d=Object(c["a"])(l,o,i,!1,null,null,null);d.options.__file="circle.vue";t["default"]=d.exports},ed91:function(e,t,a){t=e.exports=a("2350")(!1),t.push([e.i,"\n#nodeForm{position:relative\n}\n#nodeForm form{padding-bottom:40px\n}\n#nodeForm .closeButton{position:absolute;right:200px;bottom:20px\n}\n#nodeForm .closeButton.fullscreen{position:fixed;right:40px;top:10px;z-index:99999;bottom:auto\n}",""])}}]);