(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-830dff66"],{"456d":function(t,e,o){var i=o("4bf8"),r=o("0d58");o("5eda")("keys",function(){return function(t){return r(i(t))}})},"4b6a":function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"DemoMulti"}},[o("goo-flow",{ref:"gooFlow",attrs:{property:t.myProps,global:t.global,plugIns:t.plugIns}},[o("div",{staticStyle:{float:"right","margin-right":"15px"},attrs:{slot:"headerCustom"},slot:"headerCustom"},[t._v("多选实验")])])],1)},r=[],s=o("2380"),n=o("5410"),l=o("6ed2"),p=o("f673"),a=o("9fec"),h=o("645d"),u=o("53ca"),f=(o("57e7"),o("28a5"),o("ac6a"),o("456d"),o("24f9")),d=o("752d");
/**
 * GooFlow-Vue - Web端流程设计器
 * @author foolegg126 (sdlddr)
 * @version v1.1.0
 * @license Commercially licensed to 宜通世纪科技股份有限公司-91440101731569620Y(自动运维系统)
 **/
Object.keys=Object.keys||function(t){var e=[];for(var o in t)t.hasOwnProperty(o)&&e.push(o);return e};var c={flag:"multi",prop:{$multiNodes:{},$multiLines:{}},events:{onBatchAdd:null,onBatchDel:null,onBatchMove:null,onBatchMark:null},methods:{_wallAllMulti:function(){if(this.prop.$multiNodes&&this.prop.$multiLines){if(0===Object.keys(this.prop.$multiNodes).length&&0===Object.keys(this.prop.$multiLines).length)return this.$refs.$multiGhost.hide(),void this.$refs.$multiOper.hide();var t=0,e=0,o=-1,i=-1;for(var r in this.prop.$multiNodes){var s=this.prop.$nodes[r];(-1===o||s.left<o)&&(o=s.left),(-1===i||s.top<i)&&(i=s.top),s.width+s.left>t&&(t=s.width+s.left),s.height+s.top>e&&(e=s.height+s.top)}for(var n in this.prop.$multiLines){var l=this.prop.$lines[n],p=this.$refs.$workArea.querySelector("#"+n),a=p.getAttribute("from").split(","),h=[];h[0]=parseFloat(a[0]),h[1]=parseFloat(a[1]);var u=p.getAttribute("to").split(","),f=[];f[0]=parseFloat(u[0]),f[1]=parseFloat(u[1]),"sl"===l.type||("tb"===l.type?(h[1]=l.M,f[1]=l.M):"lr"===l.type&&(h[0]=l.M,f[0]=l.M)),(-1===o||h[0]<o)&&(o=h[0]),(-1===o||f[0]<o)&&(o=f[0]),(-1===i||h[1]<i)&&(i=h[1]),(-1===i||f[1]<i)&&(i=f[1]),h[0]>t&&(t=h[0]),f[0]>t&&(t=f[0]),h[1]>e&&(e=h[1]),f[1]>e&&(e=f[1])}this.$refs.$multiGhost.show({left:o-2+"px",top:i-2+"px",width:t-o+4+"px",height:e-i+4+"px"}),this.$refs.$multiOper.show({left:t+4+"px",top:i-2+"px"})}},_addtoMultiList:function(t,e,o){var i=null;"node"===e?(this.prop.$multiNodes[t]=t,i=this.$refs.$workArea.querySelector("#"+t),f["a"].addClass(i,"item_focus"),i.style.borderColor=this.GooFlow.color.line):"line"===e&&(this.prop.$multiLines[t]=t,(i=this.$refs.$draw.querySelector("#"+t+" path[stroke-linecap='round']")).setAttribute("stroke","#ff8800"),this.prop.$lines[t].noArrow||i.setAttribute("marker-end","url(#arrow2)")),o&&this._wallAllMulti()},_removeFromMultiList:function(t,e,o){var i=null,r=null;"node"===e?(delete this.prop.$multiNodes[t],i=this.$refs.$workArea.querySelector("#"+t),f["a"].removeClass(i,"item_focus"),(r=this.prop.$nodes[t]).marked?(f["a"].addClass(i,"item_mark"),i.style.borderColor=this.GooFlow.color.mark):r.type.indexOf(" mix")>0?i.style.borderColor=this.GooFlow.color.mix:this.$nodeCustoms[this.prop.$nodes[t].type]?i.style.borderColor="transparent":i.style.borderColor=this.prop.$nodes[t].color||this.GooFlow.color.node):"line"===e&&(delete this.prop.$multiLines[t],r=this.prop.$lines[t],i=this.$refs.$draw.querySelector("#"+t+" path[stroke-linecap='round']"),r.marked||(i.setAttribute("stroke",r.color||this.GooFlow.color.line),r.noArrow||i.setAttribute("marker-end","url(#arrow1)"))),o&&this._wallAllMulti()},_clearMultiList:function(){for(var t in this.prop.$multiNodes)this._removeFromMultiList(t,"node");for(var e in this.prop.$multiLines)this._removeFromMultiList(e,"line");this._wallAllMulti()},_initMultiSelect:function(){var t=this;this.$refs.$workArea.addEventListener("mousedown",function(e){var o={X:0,Y:0};if("multi"===t.prop.$nowType){if(e.shiftKey)return!1;var i=e.target,r=i.tagName;if("svg"===r||"DIV"===r&&i.className.indexOf("GooFlow_work")>-1||"LABEL"===r){o=d["a"].getCoor(e,t.$refs.$workArea),t.$refs.$multiGhost.show({left:o.X+"px",top:o.Y+"px",width:"0",height:"0"});var s=!1;document.onmousemove=function(e){e||(e=window.event);var i=d["a"].getCoor(e,t.$refs.$workArea),r=i.X-o.X,n=i.Y-o.Y,l=t.$refs.$multiGhost.position();r<0&&(l.left=o.X+r,r*=-1),n<0&&(l.top=o.Y+n,n*=-1),s=!0,t.$refs.$multiGhost.css({left:l.left+"px",top:l.top+"px",width:r+"px",height:n+"px"})},document.onmouseup=function(){document.onmousemove=null,document.onmouseup=null;var o=t.$refs.$multiGhost.position(),i=t.$refs.$multiGhost.offsetSize(),r=o.left,n=o.top,l=i.width,p=i.height;if(t._clearMultiList(),s){for(var a in t.prop.$nodes){var h=t.prop.$nodes[a],u={left:h.left*t.scale,top:h.top*t.scale,right:(h.left+h.width)*t.scale,bottom:(h.top+h.height)*t.scale},f=u.left>=r&&u.left<=r+l||u.right>=r&&u.right<=r+l,c=u.top>=n&&u.top<=n+p||u.bottom>=n&&u.bottom<=n+p;if(!f||!c){var m=u.left<=r&&u.right>=r+l&&(n<=u.top&&n+p>=u.top||n<=u.bottom&&n+p>=u.bottom),$=u.top<=n&&u.bottom>=n+p&&(r<=u.left&&r+l>=u.left||r<=u.right&&r+l>=u.right);if(!m&&!$)continue}t._addtoMultiList(a,"node")}for(var v in t.prop.$lines){var b=void 0,g=void 0,y=void 0,w=t.prop.$lines[v],M=t.$refs.$draw.querySelector("#"+v),k=M.getAttribute("from").split(","),O=[];O[0]=parseFloat(k[0]),O[1]=parseFloat(k[1]);var x=M.getAttribute("to").split(","),A=[];A[0]=parseFloat(x[0]),A[1]=parseFloat(x[1]),"sl"===w.type||("tb"===w.type?(O[1]=w.M,A[1]=w.M):"lr"===w.type&&(O[0]=w.M,A[0]=w.M)),b=O[0]>=r&&O[0]<=r+l&&O[1]>=n&&O[1]<=n+p,g=A[0]>=r&&A[0]<=r+l&&A[1]>=n&&A[1]<=n+p,(b||g||("tb"===w.type?y=n<=A[1]&&A[1]<=n+p&&(O[0]<=r&&A[0]>=r+l||A[0]<=r&&O[0]>=r+l):"lr"===w.type&&(y=r<=A[0]&&A[0]<=r+l&&(O[1]<=n&&A[1]>=n+p||A[1]<=n&&O[1]>=n+p)),y))&&t._addtoMultiList(v,"line")}t._wallAllMulti(),d["a"].stopEventPop(e)}}}}})},batchMarkItem:function(t,e,o){if("function"!=typeof this.onBatchMark||!1!==this.onBatchMark(t,e,o)){if("object"==Object(u["a"])(t)&&"number"==typeof t.length&&t.length>0)for(var i=0;i<t.length;++i)this.markItem(t[i],o,!1,!0,!0);if("object"==Object(u["a"])(e)&&"number"==typeof e.length&&e.length>0)for(var r=0;r<e.length;++r)this.markItem(e[r],o,!1,!0,!0);"function"==typeof this.pushOper&&this.pushOper("batchMarkItem",[t,e,o]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},batchAddItem:function(t,e){if("function"!=typeof this.onBatchAdd||!1!==this.onBatchAdd(t,e)){var o=[],i=[];for(var r in t)this.addNode(r,t[r],!1,!0,!0),i.push(r);for(var s in e)this.addLine(s,e[s],!1,!0,!0),o.push(s);"function"==typeof this.pushOper&&this.prop.$editable&&this.pushOper("batchDelete",[i,o]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},batchDelete:function(t,e){if("function"!=typeof this.onBatchDel||!1!==this.onBatchDel(t,e)){var o={},i={};if("object"==Object(u["a"])(t)&&"number"==typeof t.length&&t.length>0)for(var r=0;r<t.length;++r)if(this.prop.$nodes[t[r]]&&null!=this.prop.$nodes[t[r]]){for(var s in i[t[r]]=JSON.parse(JSON.stringify(this.prop.$nodes[t[r]])),this.prop.$lines)this.prop.$lines[s].from!==t[r]&&this.prop.$lines[s].to!==t[r]||(o[s]=JSON.parse(JSON.stringify(this.prop.$lines[s])),this.delLine(s,!1,!0,!0),this.prop.$multiLines&&delete this.prop.$multiLines[s]);this.delNode(t[r],!1,!0,!0),this.prop.$multiNodes&&delete this.prop.$multiNodes[t[r]]}if("object"==Object(u["a"])(e)&&"number"==typeof e.length&&e.length>0)for(var n=0;n<e.length;++n)this.prop.$lines[e[n]]&&null!=this.prop.$lines[e[n]]&&(o[e[n]]=JSON.parse(JSON.stringify(this.prop.$lines[e[n]])),this.delLine(e[n],!1,!0,!0),this.prop.$multiLines&&delete this.prop.$multiLines[e[n]]);"function"==typeof this.pushOper&&this.prop.$editable&&this.pushOper("batchAddItem",[i,o]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}},batchMove:function(t,e,o,i){if((0!==Object.keys(t).length||0!==Object.keys(e).length)&&"number"==typeof o&&"number"==typeof i&&("function"!=typeof this.onBatchMove||!1!==this.onBatchMove(t,e,o,i))){var r={},s={};if("object"==Object(u["a"])(t))for(var n in t){var l=this.prop.$nodes[n];l&&null!=l&&(this.moveNode(n,l.left+o,l.top+i,!1,!0,!0),r[n]=n)}if("object"==Object(u["a"])(e))for(var p in e){var a=this.prop.$lines[p];a&&null!=a&&("lr"!==a.type&&"tb"!==a.type||(this.setLineM(p,"lr"===a.type?o+a.M:i+a.M,!0,!1,!0),s[p]=p))}"function"==typeof this.pushOper&&this.prop.$editable&&this.pushOper("batchMove",[r,s,-1*o,-1*i]),this.prop.$navMap&&this.$nextTick(function(){this.refreshMap()})}}}},m=o("bc3a"),$=o.n(m),v=o("70e5"),b={name:"DemoMulti",components:{GooFlow:s["a"]},data:function(){return{myProps:{id:"multi_demo",width:"900",height:"600",haveHead:!0,headLabel:!0,headBtns:["new","open","save","undo","redo","reload","print"],haveTool:!0,useOperStack:!0,haveMulti:!0,haveDirDashed:!0,haveSegment:!0,haveSegDashed:!0,toolBtns:["start round mix","end round","task","node","chat","state","plug","join","fork","complex mix"],toolTextWidth:60,auth:v["a"]},global:n["a"],plugIns:[l["a"],p["a"],a["a"],h["a"],c]}},mounted:function(){var t=this.$refs.gooFlow;$.a.get("./static/demo/data2.json",{},{headers:{"Content-Type":"application/json"}}).then(function(e){t.loadData(e)}),t.bindOperEvent({onPrintClick:function(){t.print()}})}},g=b,y=(o("71fa"),o("2877")),w=Object(y["a"])(g,i,r,!1,null,null,null);w.options.__file="DemoMulti.vue";e["default"]=w.exports},5824:function(t,e,o){e=t.exports=o("2350")(!1),e.i(o("2d1f"),""),e.push([t.i,"",""])},"5eda":function(t,e,o){var i=o("5ca1"),r=o("8378"),s=o("79e5");t.exports=function(t,e){var o=(r.Object||{})[t]||Object[t],n={};n[t]=e(o),i(i.S+i.F*s(function(){o(1)}),"Object",n)}},"71fa":function(t,e,o){"use strict";var i=o("f731"),r=o.n(i);r.a},f731:function(t,e,o){var i=o("5824");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var r=o("499e").default;r("4057d35c",i,!0,{sourceMap:!1,shadowMode:!1})}}]);