(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-327e9b5d"],{"28a5":function(e,t,r){r("214f")("split",2,function(e,t,n){"use strict";var a=r("aae3"),i=n,o=[].push,s="split",l="length",d="lastIndex";if("c"=="abbc"[s](/(b)*/)[1]||4!="test"[s](/(?:)/,-1)[l]||2!="ab"[s](/(?:ab)*/)[l]||4!="."[s](/(.?)(.?)/)[l]||"."[s](/()()/)[l]>1||""[s](/.?/)[l]){var c=void 0===/()??/.exec("")[1];n=function(e,t){var r=String(this);if(void 0===e&&0===t)return[];if(!a(e))return i.call(r,e,t);var n,s,p,u,h,m=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),g=0,v=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,f+"g");c||(n=new RegExp("^"+y.source+"$(?!\\s)",f));while(s=y.exec(r)){if(p=s.index+s[0][l],p>g&&(m.push(r.slice(g,s.index)),!c&&s[l]>1&&s[0].replace(n,function(){for(h=1;h<arguments[l]-2;h++)void 0===arguments[h]&&(s[h]=void 0)}),s[l]>1&&s.index<r[l]&&o.apply(m,s.slice(1)),u=s[0][l],g=p,m[l]>=v))break;y[d]===s.index&&y[d]++}return g===r[l]?!u&&y.test("")||m.push(""):m.push(r.slice(g)),m[l]>v?m.slice(0,v):m}}else"0"[s](void 0,0)[l]&&(n=function(e,t){return void 0===e&&0===t?[]:i.call(this,e,t)});return[function(r,a){var i=e(this),o=void 0==r?void 0:r[t];return void 0!==o?o.call(r,i,a):n.call(String(i),r,a)},n]})},"6c26":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("Form",{ref:"addForm",attrs:{model:e.addForm,"label-width":200,rules:e.addFormValidate,id:"whiteForm"}},[r("FormItem",{attrs:{label:"分类属性",prop:"keySelect"}},[r("Cascader",{attrs:{data:e.keyGetSelect,"element-id":"whiteKeySelect"},model:{value:e.addForm.keySelect,callback:function(t){e.$set(e.addForm,"keySelect",t)},expression:"addForm.keySelect"}})],1),r("FormItem",{attrs:{label:"操作指令",prop:"oprationalOrder"}},[r("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:20},"element-id":"whiteOprationalOrder"},on:{"on-change":e.textChange},model:{value:e.addForm.oprationalOrder,callback:function(t){e.$set(e.addForm,"oprationalOrder",t)},expression:"addForm.oprationalOrder"}})],1),r("FormItem",{staticClass:"opRemark",attrs:{label:"操作说明"}},[r("div",[r("p",[e._v("支持通配符星号(*)和问号(?)。可以使用星号(*)代替零个、单个或多个字符。可以使用问号(?)代替一个字符")]),r("p",[e._v("例：填写A???P*,将支持所有第一字符为A,第五字符为P的指令")]),r("p",[e._v("支持一次配置多条指令白名单记录，通过换行区分，最多支持20行")]),r("p",[e._v("一行限30字符")])])]),r("FormItem",[r("Button",{attrs:{type:"text",id:"whiteFormCancel"},on:{click:e.cancelAdd}},[e._v("取消")]),r("Button",{attrs:{type:"primary",id:"whiteFormAdd"},on:{click:e.submitAdd}},[e._v("校验提交")])],1)],1)],1)},a=[],i=r("be94"),o=(r("a481"),r("28a5"),/[^A-Za-z0-9_*?]/g),s=/^[*?]+$/g,l=/\n{2,}/g,d={data:function(){return{dataType:["neCategory","neType","neProducer"],userInfo:JSON.parse(localStorage.getItem("userInfo")),addForm:{oprationalOrder:"",keySelect:[]},addFormValidate:{keySelect:[{required:!0,type:"array",message:"选择不能为空",trigger:"change"}],oprationalOrder:[{required:!0,message:"操作指令不能为空",trigger:"blur"}]},submitLoading:!1,maxLength:20}},computed:{keyGetSelect:function(){return this.$store.state.yt.keySelectArray}},methods:{cancelAdd:function(){this.$emit("on-cancel"),this.$refs["addForm"].resetFields()},submitAdd:function(){var e=this;this.$refs.addForm.validate(function(t){if(t){var r=e.addForm.oprationalOrder,n=r.split("\n"),a=e.maxLength,o="";if(n.length>a){for(var l="",d=a;d<n.length;d++)l+=n[d]+"<br>";return void e.$Modal.error({title:"超出最大行数： "+a+" 行",content:"<p class='highLight'>"+l+"</p>"})}for(d=n.length-1;d>=0;d--){if(s.test(n[d]))return e.$Modal.confirm({title:"必须有一个通配符以外的字符，请检查第<span class='highLight'> "+(d+1)+" </span>行",content:"<p class='highLight'>"+n[d]+"</p>"}),void(n[d]=n[d].replace(s,""));if(n[d].length>30)return void e.$Message.error("每行最大字符数为30个")}for(d=0;d<a;d++)n[d]&&(o+=n[d]+"<br>");e.$Modal.confirm({title:"确认提交",content:"<p class='highLight'>"+o+"</p>",onOk:function(){var t={};if(e.addForm.keySelect&&"[]"!==JSON.stringify(e.addForm.keySelect))for(var r=e.addForm.keySelect,n=0,a=r.length;n<a;n++)t[e.dataType[n]]=r[n];var o=Object(i["a"])({},t,{creater:e.userInfo.username,args:e.addForm.oprationalOrder.split("\n")});e.postYTRequest("/routinejob/whiteList",o).then(function(t){0==t.code?(e.$Message.success("保存成功"),e.$emit("on-add"),e.$refs["addForm"].resetFields()):e.$Message.warning(t.result)})},onCancel:function(){e.$Message.info("已取消")}})}})},textChange:function(){var e=this,t=!0,r="",n="",a="",i=this.addForm.oprationalOrder.replace(l,"\n"),s=i.split("\n"),d=this.maxLength;if(s.length>d){for(var c=d;c<s.length;c++)n+="<p class='highLight'>"+s[c]+"</p>";s.length=d,r+="<p>超出最大行数： "+d+" 行</p>",t=!1}for(c=s.length-1;c>=0;c--)""==s[0]&&(s.splice(0,1),this.$set(this.addForm,"oprationalOrder",s.join("\n"))),o.test(s[c])&&(s[c]=s[c].replace(o,""),r+="<p>含有非法字符</p>",t=!1),s[c].length>30&&(a=s[c].slice(30),s[c]=s[c].slice(0,30),r+="<p>每行最大字符数为30个</p>",t=!1);if(!t){var p="";p+=a?"<p>将删除超出字符数： <p class='highLight'>"+a+"</p></p>":"",p+=n?"<p>将删除超出行数据： <p class='highLight'>"+n+"</p></p>":"",this.$Modal.confirm({title:r,content:p,onOk:function(){e.$set(e.addForm,"oprationalOrder",s.join("\n"))},onCancel:function(){e.$set(e.addForm,"oprationalOrder",s.join("\n"))}})}}}},c=d,p=r("2877"),u=Object(p["a"])(c,n,a,!1,null,null,null);u.options.__file="whiteForm.vue";t["default"]=u.exports},be94:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("ade3");function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},a=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),a.forEach(function(t){Object(n["a"])(e,t,r[t])})}return e}}}]);