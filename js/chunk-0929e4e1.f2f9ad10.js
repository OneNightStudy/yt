(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0929e4e1","chunk-327e9b5d"],{"28a5":function(e,t,i){i("214f")("split",2,function(e,t,a){"use strict";var r=i("aae3"),o=a,n=[].push,l="split",s="length",d="lastIndex";if("c"=="abbc"[l](/(b)*/)[1]||4!="test"[l](/(?:)/,-1)[s]||2!="ab"[l](/(?:ab)*/)[s]||4!="."[l](/(.?)(.?)/)[s]||"."[l](/()()/)[s]>1||""[l](/.?/)[s]){var c=void 0===/()??/.exec("")[1];a=function(e,t){var i=String(this);if(void 0===e&&0===t)return[];if(!r(e))return o.call(i,e,t);var a,l,u,h,p,g=[],f=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,b=void 0===t?4294967295:t>>>0,y=new RegExp(e.source,f+"g");c||(a=new RegExp("^"+y.source+"$(?!\\s)",f));while(l=y.exec(i)){if(u=l.index+l[0][s],u>m&&(g.push(i.slice(m,l.index)),!c&&l[s]>1&&l[0].replace(a,function(){for(p=1;p<arguments[s]-2;p++)void 0===arguments[p]&&(l[p]=void 0)}),l[s]>1&&l.index<i[s]&&n.apply(g,l.slice(1)),h=l[0][s],m=u,g[s]>=b))break;y[d]===l.index&&y[d]++}return m===i[s]?!h&&y.test("")||g.push(""):g.push(i.slice(m)),g[s]>b?g.slice(0,b):g}}else"0"[l](void 0,0)[s]&&(a=function(e,t){return void 0===e&&0===t?[]:o.call(this,e,t)});return[function(i,r){var o=e(this),n=void 0==i?void 0:i[t];return void 0!==n?n.call(i,o,r):a.call(String(o),i,r)},a]})},"29ba":function(e,t,i){"use strict";var a=i("d416"),r=i.n(a);r.a},"52b8":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"home-main"},[i("Row",[i("Col",[i("Card",[i("section",{staticClass:"searchArray"},[i("search-filter",{attrs:{filter:e.filterList,apiurl:"whiteList"},on:{getlist:e.getList}}),i("div",{staticClass:"btnArray"},[3!=e.$store.state.yt.userRole?i("Button",{attrs:{type:"primary",icon:"md-add",id:"addNew"},on:{click:e.addList}},[e._v("新增")]):e._e()],1)],1),i("Row",[i("Table",{ref:"table",attrs:{loading:e.loading,height:e.tableHeight,border:"",size:"small",columns:e.columns,data:e.data,"highlight-row":"",id:"whiteListTable"}})],1),i("Row",{staticClass:"tablePage",attrs:{type:"flex",justify:"end"}},[i("Page",{attrs:{current:e.pageNumber,total:e.total,"page-size":e.pageSize,"page-size-opts":[20,50,100],size:"small","show-total":"","show-elevator":"","show-sizer":""},on:{"on-change":e.changePage,"on-page-size-change":e.changePageSize}})],1)],1)],1)],1),i("Modal",{attrs:{title:e.modalTitle,width:"800",draggable:"","footer-hide":""},model:{value:e.addModalVisible,callback:function(t){e.addModalVisible=t},expression:"addModalVisible"}},[i("white-form",{on:{"on-cancel":e.formHide,"on-add":e.formAdd}})],1),i("Modal",{attrs:{title:e.delTitle,width:"800"},model:{value:e.delModalVisible,callback:function(t){e.delModalVisible=t},expression:"delModalVisible"}},[i("Table",{attrs:{columns:e.delColumns,data:e.delData}}),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("Button",{attrs:{type:"primary"},on:{click:function(t){e.delModalVisible=!1}}},[e._v("关闭")])],1)],1)],1)},r=[],o=(i("6d67"),i("be94")),n=i("6c26"),l={components:{whiteForm:n["default"]},data:function(){var e=this;return{filterList:["keySelect","query"],dataType:["neCategory","neType","neProducer"],filterData:{},pageNumber:1,pageSize:20,total:100,loading:!1,columns:[{type:"index",width:60,align:"center"},{title:"网元类别",key:"neCategory"},{title:"网元类型",key:"neType"},{title:"设备厂家",key:"neProducer"},{title:"操作指令",key:"oprationalOrder",sortable:!0},{title:"创建人员",key:"creater"},{title:"创建时间",key:"createTime",sortable:!0,render:function(t,i){return t("div",e.formatDate(new Date(i.row.createTime),"yyyy-MM-dd HH:mm:ss"))}},{title:"操作",key:"action",fixed:"right",width:160,align:"center",render:function(t,i){var a="none";return 3!=e.$store.state.yt.userRole&&(a="inline-block"),t("div",[t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px",display:a},on:{click:function(){e.del(i.row)}}},"删除")])}}],data:[],tableHeight:450,addModalVisible:!1,delModalVisible:!1,delColumns:[{title:"网元类别",key:"neCategory"},{title:"网元类型",key:"neType"},{title:"设备厂家",key:"neProducer"},{title:"指令集",key:"orderSetName"},{title:"操作指令",key:"oprationalOrder"}],delData:[],delTitle:"删除",modalTitle:"",addForm:{oprationalOrder:"",keySelect:[]},userInfo:JSON.parse(localStorage.getItem("userInfo")),addFormValidate:{keySelect:[{required:!0,type:"array",message:"选择不能为空",trigger:"change"}],oprationalOrder:[{required:!0,message:"操作指令不能为空",trigger:"blur"}]},submitLoading:!1,maxLength:20}},methods:{getList:function(e){var t=this;this.loading=!0,e&&(this.filterData=e);var i=Object(o["a"])({},this.filterData,{pageNumber:this.pageNumber,pageSize:this.pageSize});this.getRequest("/routinejob/whiteList",i).then(function(e){t.data=e.content.list,t.total=e.content.total,t.loading=!1})},changePage:function(e){this.pageNumber=e,this.$refs.table.selectAll(!1),this.getList()},changePageSize:function(e){this.pageSize=e,this.getList()},del:function(e){var t=this;this.$Modal.confirm({title:"确认删除",content:"您确认该条数据?",onOk:function(){t.deleteRequest("/routinejob/whiteList?id="+e.whiteListId+"&deleter="+t.userInfo.username).then(function(i){0===i.code?(t.$Message.success("删除成功"),t.getList()):(t.delTitle=i.result,t.delModalVisible=!0,i.content.map(function(t){return t["oprationalOrder"]=e.oprationalOrder}),t.delData=i.content)})}})},addList:function(){this.getThreeAndFour(this),this.modalTitle="新增",this.addModalVisible=!0},formHide:function(){this.addModalVisible=!1},formAdd:function(){this.addModalVisible=!1,this.getList()}},created:function(){this.getList()},mounted:function(){this.tableHeight=window.innerHeight-270}},s=l,d=(i("29ba"),i("2877")),c=Object(d["a"])(s,a,r,!1,null,null,null);c.options.__file="whiteList.vue";t["default"]=c.exports},"6c26":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("Form",{ref:"addForm",attrs:{model:e.addForm,"label-width":200,rules:e.addFormValidate,id:"whiteForm"}},[i("FormItem",{attrs:{label:"分类属性",prop:"keySelect"}},[i("Cascader",{attrs:{data:e.keyGetSelect,"element-id":"whiteKeySelect"},model:{value:e.addForm.keySelect,callback:function(t){e.$set(e.addForm,"keySelect",t)},expression:"addForm.keySelect"}})],1),i("FormItem",{attrs:{label:"操作指令",prop:"oprationalOrder"}},[i("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:20},"element-id":"whiteOprationalOrder"},on:{"on-change":e.textChange},model:{value:e.addForm.oprationalOrder,callback:function(t){e.$set(e.addForm,"oprationalOrder",t)},expression:"addForm.oprationalOrder"}})],1),i("FormItem",{staticClass:"opRemark",attrs:{label:"操作说明"}},[i("div",[i("p",[e._v("支持通配符星号(*)和问号(?)。可以使用星号(*)代替零个、单个或多个字符。可以使用问号(?)代替一个字符")]),i("p",[e._v("例：填写A???P*,将支持所有第一字符为A,第五字符为P的指令")]),i("p",[e._v("支持一次配置多条指令白名单记录，通过换行区分，最多支持20行")]),i("p",[e._v("一行限30字符")])])]),i("FormItem",[i("Button",{attrs:{type:"text",id:"whiteFormCancel"},on:{click:e.cancelAdd}},[e._v("取消")]),i("Button",{attrs:{type:"primary",id:"whiteFormAdd"},on:{click:e.submitAdd}},[e._v("校验提交")])],1)],1)],1)},r=[],o=i("be94"),n=(i("a481"),i("28a5"),/[^A-Za-z0-9_*?]/g),l=/^[*?]+$/g,s=/\n{2,}/g,d={data:function(){return{dataType:["neCategory","neType","neProducer"],userInfo:JSON.parse(localStorage.getItem("userInfo")),addForm:{oprationalOrder:"",keySelect:[]},addFormValidate:{keySelect:[{required:!0,type:"array",message:"选择不能为空",trigger:"change"}],oprationalOrder:[{required:!0,message:"操作指令不能为空",trigger:"blur"}]},submitLoading:!1,maxLength:20}},computed:{keyGetSelect:function(){return this.$store.state.yt.keySelectArray}},methods:{cancelAdd:function(){this.$emit("on-cancel"),this.$refs["addForm"].resetFields()},submitAdd:function(){var e=this;this.$refs.addForm.validate(function(t){if(t){var i=e.addForm.oprationalOrder,a=i.split("\n"),r=e.maxLength,n="";if(a.length>r){for(var s="",d=r;d<a.length;d++)s+=a[d]+"<br>";return void e.$Modal.error({title:"超出最大行数： "+r+" 行",content:"<p class='highLight'>"+s+"</p>"})}for(d=a.length-1;d>=0;d--){if(l.test(a[d]))return e.$Modal.confirm({title:"必须有一个通配符以外的字符，请检查第<span class='highLight'> "+(d+1)+" </span>行",content:"<p class='highLight'>"+a[d]+"</p>"}),void(a[d]=a[d].replace(l,""));if(a[d].length>30)return void e.$Message.error("每行最大字符数为30个")}for(d=0;d<r;d++)a[d]&&(n+=a[d]+"<br>");e.$Modal.confirm({title:"确认提交",content:"<p class='highLight'>"+n+"</p>",onOk:function(){var t={};if(e.addForm.keySelect&&"[]"!==JSON.stringify(e.addForm.keySelect))for(var i=e.addForm.keySelect,a=0,r=i.length;a<r;a++)t[e.dataType[a]]=i[a];var n=Object(o["a"])({},t,{creater:e.userInfo.username,args:e.addForm.oprationalOrder.split("\n")});e.postYTRequest("/routinejob/whiteList",n).then(function(t){0==t.code?(e.$Message.success("保存成功"),e.$emit("on-add"),e.$refs["addForm"].resetFields()):e.$Message.warning(t.result)})},onCancel:function(){e.$Message.info("已取消")}})}})},textChange:function(){var e=this,t=!0,i="",a="",r="",o=this.addForm.oprationalOrder.replace(s,"\n"),l=o.split("\n"),d=this.maxLength;if(l.length>d){for(var c=d;c<l.length;c++)a+="<p class='highLight'>"+l[c]+"</p>";l.length=d,i+="<p>超出最大行数： "+d+" 行</p>",t=!1}for(c=l.length-1;c>=0;c--)""==l[0]&&(l.splice(0,1),this.$set(this.addForm,"oprationalOrder",l.join("\n"))),n.test(l[c])&&(l[c]=l[c].replace(n,""),i+="<p>含有非法字符</p>",t=!1),l[c].length>30&&(r=l[c].slice(30),l[c]=l[c].slice(0,30),i+="<p>每行最大字符数为30个</p>",t=!1);if(!t){var u="";u+=r?"<p>将删除超出字符数： <p class='highLight'>"+r+"</p></p>":"",u+=a?"<p>将删除超出行数据： <p class='highLight'>"+a+"</p></p>":"",this.$Modal.confirm({title:i,content:u,onOk:function(){e.$set(e.addForm,"oprationalOrder",l.join("\n"))},onCancel:function(){e.$set(e.addForm,"oprationalOrder",l.join("\n"))}})}}}},c=d,u=i("2877"),h=Object(u["a"])(c,a,r,!1,null,null,null);h.options.__file="whiteForm.vue";t["default"]=h.exports},"770f":function(e,t,i){t=e.exports=i("2350")(!1),t.push([e.i,"\n.highLight{color:#ed4014;font-size:16px;font-weight:700\n}\n.opRemark{color:#999\n}\n.opRemark .ivu-form-item-label{color:#999!important\n}",""])},be94:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var a=i("ade3");function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},r=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),r.forEach(function(t){Object(a["a"])(e,t,i[t])})}return e}},d416:function(e,t,i){var a=i("770f");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var r=i("499e").default;r("5c782c82",a,!0,{sourceMap:!1,shadowMode:!1})}}]);